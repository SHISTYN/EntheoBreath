import{j as e,m as t,A as E}from"./vendor-motion-BZnxEU2V.js";import{B as n}from"./index-kZLVH7V4.js";import"./vendor-react-OXzYy3Vh.js";import"./vendor-ai-D7YN6fPx.js";import"./vendor-audio-vXGIxFqf.js";import"./vendor-icons-CZBwbNoe.js";const D=({phase:r,timeLeft:s,totalTimeForPhase:f,label:I,currentRound:S=1,totalRounds:p=0,currentBreath:C=0,mode:m="loop",isActive:c=!1,theme:O})=>{const d=m==="wim-hof",h=m==="stopwatch",y=d&&(r===n.Inhale||r===n.Exhale),w=d&&r===n.HoldOut,i=(()=>{if(!c)return{g1:"#18181b",g2:"#27272a",g3:"#09090b",ring:["transparent","transparent"],accent:"#71717a",shadow:"0 0 0px rgba(0,0,0,0)"};switch(r){case n.Inhale:return{g1:"#06b6d4",g2:"#3b82f6",g3:"#a5f3fc",ring:["#22d3ee","#3b82f6"],accent:"#22d3ee",shadow:"0 0 80px rgba(34, 211, 238, 0.6)"};case n.HoldIn:return{g1:"#7c3aed",g2:"#db2777",g3:"#e879f9",ring:["#a855f7","#d946ef"],accent:"#d946ef",shadow:"0 0 90px rgba(168, 85, 247, 0.6)"};case n.Exhale:return{g1:"#ea580c",g2:"#f59e0b",g3:"#fbbf24",ring:["#fb923c","#f59e0b"],accent:"#fb923c",shadow:"0 0 60px rgba(251, 146, 60, 0.5)"};case n.HoldOut:return{g1:"#1e1b4b",g2:"#312e81",g3:"#4338ca",ring:["#6366f1","#818cf8"],accent:"#818cf8",shadow:"0 0 60px rgba(99, 102, 241, 0.5)"};default:return{g1:"#27272a",g2:"#3f3f46",g3:"#18181b",ring:["#52525b","#71717a"],accent:"#52525b",shadow:"0 0 0 rgba(0,0,0,0)"}}})(),x=f>0?Math.max(0,Math.min(1,(f-s)/f)):0,a=320,j=3,v=a/2-j-20,k=2*Math.PI*v,M=k*(1-x);let o=1;c&&!h?r===n.Inhale?o=.88+x*.24:r===n.HoldIn?o=1.12:r===n.Exhale?o=1.12-x*.24:o=.88:o=.88;const N={idle:{borderRadius:"50% 50% 50% 50%",transition:{duration:1}},active:{borderRadius:["50% 50% 50% 50%","60% 40% 50% 50%","50% 50% 60% 40%","45% 55% 40% 60%","50% 50% 50% 50%"],transition:{duration:10,repeat:1/0,ease:"easeInOut",repeatType:"mirror"}}};let l="";if(h){const g=Math.floor(s/60),b=Math.floor(s%60);l=`${g}:${b.toString().padStart(2,"0")}`}else if(d)if(y)l=`${C}`;else if(w){const g=Math.floor(s/60),b=Math.floor(s%60);l=s>60?`${g}:${b.toString().padStart(2,"0")}`:s.toFixed(1)}else l=Math.ceil(s).toString();else l=Math.ceil(s).toString();const u={duration:3,ease:"easeInOut"};return e.jsxs("div",{className:"relative flex items-center justify-center select-none",style:{width:a,height:a},children:[e.jsx("div",{className:"absolute inset-0 z-30 flex items-center justify-center pointer-events-none",children:e.jsxs("svg",{width:a,height:a,className:"rotate-[-90deg] overflow-visible",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"ringGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:i.ring[0]}),e.jsx("stop",{offset:"100%",stopColor:i.ring[1]})]})}),c&&e.jsx(t.circle,{cx:a/2,cy:a/2,r:v,fill:"none",stroke:"url(#ringGradient)",strokeWidth:j,strokeLinecap:"round",strokeDasharray:k,animate:{strokeDashoffset:M},transition:{duration:.1,ease:"linear"},style:{filter:`drop-shadow(0 0 10px ${i.accent})`}})]})}),e.jsx(t.div,{className:"absolute z-10",style:{width:a*.75,height:a*.75},variants:N,animate:c?"active":"idle",children:e.jsx(t.div,{className:"w-full h-full bg-black",animate:{scale:o,boxShadow:i.shadow},transition:{scale:{duration:.8,ease:[.25,1,.5,1]},boxShadow:{duration:1.5,ease:"easeInOut"}},style:{borderRadius:"inherit"}})}),e.jsx(t.div,{className:"absolute z-20 overflow-hidden",style:{width:a*.75,height:a*.75},variants:N,animate:c?"active":"idle",children:e.jsxs(t.div,{className:"w-full h-full",animate:{scale:o},transition:{duration:.8,ease:[.25,1,.5,1]},style:{borderRadius:"inherit",background:"black",transform:"translateZ(0)"},children:[e.jsxs("div",{className:"absolute inset-0 opacity-80 mix-blend-screen blur-[30px]",children:[e.jsx(t.div,{className:"absolute top-[-10%] left-[-5%] w-[90%] h-[90%] rounded-full",animate:{backgroundColor:i.g1,x:[0,20,-15,0],y:[0,-15,20,0],scale:[1,1.1,.95,1]},transition:{backgroundColor:u,default:{duration:12,repeat:1/0,ease:"easeInOut"}}}),e.jsx(t.div,{className:"absolute bottom-[-10%] right-[-10%] w-[80%] h-[80%] rounded-full",animate:{backgroundColor:i.g2,x:[0,-20,15,0],y:[0,10,-25,0]},transition:{backgroundColor:u,default:{duration:15,repeat:1/0,ease:"easeInOut"}}}),e.jsx(t.div,{className:"absolute top-[15%] left-[15%] w-[50%] h-[50%] rounded-full opacity-60",animate:{backgroundColor:i.g3,x:[0,15,-15,0],y:[0,10,-10,0]},transition:{backgroundColor:u,default:{duration:8,repeat:1/0,ease:"easeInOut"}}})]}),e.jsx("div",{className:"absolute top-[10%] left-1/2 -translate-x-1/2 w-[60%] h-[30%] bg-gradient-to-b from-white/10 to-transparent rounded-full blur-[20px] pointer-events-none"}),e.jsx(t.div,{className:"absolute bottom-[-10%] inset-x-0 h-[40%] blur-[30px] opacity-50 mix-blend-screen",animate:{backgroundColor:i.accent},transition:{backgroundColor:u}})]})}),e.jsxs("div",{className:"relative z-40 flex flex-col items-center justify-center pointer-events-none",children:[e.jsx(E,{mode:"popLayout",children:e.jsx(t.span,{initial:{opacity:.5,scale:.9,y:5},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,position:"absolute",scale:1.1},transition:{duration:.1},className:"font-display font-bold text-7xl md:text-8xl tabular-nums tracking-tighter text-white drop-shadow-[0_4px_12px_rgba(0,0,0,0.5)]",children:l},Math.floor(s))}),e.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2",children:[e.jsx(t.div,{layout:!0,className:"px-6 py-2 rounded-full bg-black/10 backdrop-blur-md shadow-lg flex items-center justify-center min-w-[140px]",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:e.jsx(t.span,{className:"text-[11px] font-black uppercase tracking-[0.25em]",animate:{color:i.accent},transition:{color:u},children:d?y?"Дыхание":w?"Задержка":"Отдых":I})}),!d&&!h&&e.jsx("div",{className:"px-3 py-1 rounded-full bg-transparent",children:e.jsxs("span",{className:"text-[10px] font-bold text-white/30 tracking-widest",children:[S," / ",p===0?"∞":p]})})]})]})]})};export{D as default};
