import{j as e,m as M,A as V}from"./vendor-motion-BZnxEU2V.js";import{r as W}from"./vendor-react-OXzYy3Vh.js";import{B as o}from"./index-kZLVH7V4.js";import"./vendor-ai-D7YN6fPx.js";import"./vendor-audio-vXGIxFqf.js";import"./vendor-icons-CZBwbNoe.js";const X=M.path,E=M.div,F=M.circle,q=(r,d,x)=>{const h=parseInt(r.replace(/#/g,""),16),u=h>>16,w=h>>8&255,n=h&255,m=parseInt(d.replace(/#/g,""),16),j=m>>16,y=m>>8&255,k=m&255,s=u+x*(j-u),v=w+x*(y-w),O=n+x*(k-n);return"#"+((1<<24)+(s<<16)+(v<<8)+O|0).toString(16).slice(1)},re=({phase:r,timeLeft:d,totalTime:x,currentRound:h,totalRounds:u,isActive:w})=>{const[n,m]=W.useState(!1),j=h%2!==0,y=24,k="M 70 380 C 70 180 70 60 150 60 C 230 60 230 180 230 380",s=x>0?Math.min(Math.max((x-d)/x,0),1):1,v="#22d3ee",O="#a855f7",H="#fbbf24",D="rgba(255, 255, 255, 0.05)";let L=v;if(r===o.Exhale)L=H;else if(r===o.HoldIn)if(d<=2){const t=1-d/2;L=q(O,H,t)}else L=O;const p=.45,b=.55;let f=0,l=0,a="",_=!1,S=!1;const c=r===o.Ready,A=r===o.Done;let $=1,g=0;if(j){if(r===o.Inhale)a="Вдох левой",_=!0,f=0,l=.5*s;else if(r===o.HoldIn){a="Задержка";const t=0+p*s,i=.5+(b-.5)*s;f=t,l=i-t}else if(r===o.Exhale){a="Выдох правой",S=!0;const t=p+(1-p)*s,i=b+(1-b)*s;f=t,l=Math.max(0,i-t)}}else if(r===o.Inhale)a="Вдох правой",S=!0,f=1-.5*s,l=.5*s;else if(r===o.HoldIn){a="Задержка";const t=.5-(.5-p)*s,i=1-(1-b)*s;f=t,l=i-t}else if(r===o.Exhale){a="Выдох левой",_=!0;const t=p-p*s,i=b-b*s;f=t,l=Math.max(0,i-t)}(c||A)&&(a=c?"Готовность":"Завершено",l=0,$=0,c&&(g=Math.min(Math.max((3-d)/3,0),1)));const z=(t,i)=>{if(c)if(t===j){const R=.2+g*.3;return{borderColor:`rgba(34, 211, 238, ${R})`,bg:`rgba(34, 211, 238, ${R*.2})`,textColor:"text-cyan-400",scale:1+g*.05,icon:"lock"}}else return{borderColor:"rgba(255,255,255,0.05)",bg:"transparent",textColor:"text-zinc-700",scale:1,icon:"lock"};return A?{borderColor:"rgba(255,255,255,0.1)",bg:"rgba(255,255,255,0.02)",textColor:"text-zinc-600",scale:1,icon:"lock"}:i?{borderColor:"rgba(255,255,255,0.8)",bg:"rgba(255,255,255,0.1)",textColor:"text-white",scale:1.1,icon:"lock-open"}:{borderColor:"rgba(225,29,72,0.4)",bg:"rgba(225,29,72,0.1)",textColor:"text-rose-500",scale:1,icon:"lock"}},C=z(!0,_),N=z(!1,S),T=n?"БОЛЬШОЙ":"БЕЗЫМЯННЫЙ",B=n?"БЕЗЫМЯННЫЙ":"БОЛЬШОЙ",G=j?70:230;let I=0,P=0;return c?(I=g*1.2,P=g):r===o.Inhale?(I=1,P=1):(I=0,P=0),e.jsx("div",{className:"w-full flex flex-col items-center justify-center relative min-h-[320px]",children:e.jsxs("div",{className:"relative w-[300px] h-[320px] flex items-center justify-center",children:[e.jsxs("svg",{viewBox:"-20 40 340 380",className:"absolute inset-0 w-full h-full overflow-visible z-10 pointer-events-none",children:[e.jsx("defs",{children:e.jsxs("filter",{id:"neonGlowAV",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"6",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),e.jsx("path",{d:k,stroke:D,strokeWidth:y,fill:"none",strokeLinecap:"round"}),e.jsx(F,{cx:G,cy:"380",r:y/2,fill:v,animate:{opacity:P,scale:I,filter:c?`blur(${10-g*10}px)`:"blur(0px)"},transition:{duration:.1,ease:"linear"},style:{filter:"url(#neonGlowAV)",originX:"50%",originY:"50%"}}),e.jsx(X,{d:k,fill:"none",strokeLinecap:"round",filter:"url(#neonGlowAV)",animate:{stroke:L,pathLength:l,pathOffset:f,opacity:$},transition:{duration:.1,ease:"linear"},style:{strokeWidth:y}}),e.jsx("circle",{cx:"150",cy:"60",r:"4",fill:"white",opacity:"0.3"}),e.jsx("foreignObject",{x:"30",y:"350",width:"80",height:"90",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[e.jsx(E,{animate:{borderColor:C.borderColor,backgroundColor:C.bg,scale:C.scale},className:`w-12 h-12 rounded-full flex items-center justify-center border-2 ${C.textColor} transition-colors duration-300`,children:e.jsx("i",{className:`fas fa-${C.icon}`})}),e.jsx("span",{className:"mt-2 text-[9px] font-bold text-zinc-500 uppercase tracking-widest",children:T})]})}),e.jsx("foreignObject",{x:"110",y:"360",width:"80",height:"60",children:e.jsx(V,{children:(!w||c)&&e.jsx(E,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"flex flex-col items-center justify-center h-full pointer-events-auto",children:e.jsxs("button",{onClick:()=>m(!n),className:"flex flex-col items-center gap-1 group",children:[e.jsx("div",{className:`w-8 h-8 rounded-full border flex items-center justify-center transition-colors ${n?"border-indigo-500 text-indigo-400 bg-indigo-500/10":"border-cyan-500 text-cyan-400 bg-cyan-500/10"}`,children:e.jsx("i",{className:`fas fa-hand-paper text-xs ${n?"-scale-x-100":""}`})}),e.jsx("span",{className:"text-[8px] font-bold text-zinc-600 uppercase tracking-wide",children:n?"Левша":"Правша"})]})})})}),e.jsx("foreignObject",{x:"190",y:"350",width:"80",height:"90",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[e.jsx(E,{animate:{borderColor:N.borderColor,backgroundColor:N.bg,scale:N.scale},className:`w-12 h-12 rounded-full flex items-center justify-center border-2 ${N.textColor} transition-colors duration-300`,children:e.jsx("i",{className:`fas fa-${N.icon}`})}),e.jsx("span",{className:"mt-2 text-[9px] font-bold text-zinc-500 uppercase tracking-widest",children:B})]})})]}),e.jsxs("div",{className:"absolute top-[42%] flex flex-col items-center z-50 pointer-events-none",children:[e.jsx("span",{className:"text-7xl font-display font-bold text-white tabular-nums mb-4 drop-shadow-[0_0_20px_rgba(255,255,255,0.2)]",children:Math.ceil(d)}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"px-5 py-2 rounded-full bg-[#0a0a0b]/80 backdrop-blur-xl border border-white/10 shadow-[0_0_20px_-5px_rgba(0,0,0,0.5)]",children:e.jsx("span",{className:"text-[11px] font-black text-gray-100 uppercase tracking-widest",children:a})}),!c&&!A&&e.jsx(M.div,{className:"flex items-center gap-1 opacity-50 mt-1",animate:{opacity:[.3,.6,.3]},transition:{duration:4,repeat:1/0},children:e.jsxs("span",{className:"text-[9px] font-bold text-zinc-500 uppercase tracking-widest",children:["Раунд ",h," / ",u===0?"∞":u]})})]})]})]})})};export{re as default};
