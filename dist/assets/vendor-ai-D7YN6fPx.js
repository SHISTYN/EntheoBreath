import{j as Zn}from"./vendor-motion-BZnxEU2V.js";import{c as Nn,g as Fr}from"./vendor-react-OXzYy3Vh.js";var Cl={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Sl,_l;function Il(){return{geminiUrl:Sl,vertexUrl:_l}}function Al(n,e,t,i){var o,r;if(!(n!=null&&n.baseUrl)){const l=Il();return e?(o=l.vertexUrl)!==null&&o!==void 0?o:t:(r=l.geminiUrl)!==null&&r!==void 0?r:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pe{}function k(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const r=e[o];return r!=null?String(r):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function a(n,e,t){for(let r=0;r<e.length-1;r++){const l=e[r];if(l.endsWith("[]")){const u=l.slice(0,-2);if(!(u in n))if(Array.isArray(t))n[u]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(n[u])){const f=n[u];if(Array.isArray(t))for(let c=0;c<f.length;c++){const d=f[c];a(d,e.slice(r+1),t[c])}else for(const c of f)a(c,e.slice(r+1),t)}return}else if(l.endsWith("[0]")){const u=l.slice(0,-3);u in n||(n[u]=[{}]);const f=n[u];a(f[0],e.slice(r+1),t);return}(!n[l]||typeof n[l]!="object")&&(n[l]={}),n=n[l]}const i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function s(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const o=e[i];if(o.endsWith("[]")){const r=o.slice(0,-2);if(r in n){const l=n[r];return Array.isArray(l)?l.map(u=>s(u,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function wl(n,e){for(const[t,i]of Object.entries(e)){const o=t.split("."),r=i.split("."),l=new Set;let u=-1;for(let f=0;f<o.length;f++)if(o[f]==="*"){u=f;break}if(u!==-1&&r.length>u)for(let f=u;f<r.length;f++){const c=r[f];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&l.add(c)}dt(n,o,r,0,l)}}function dt(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;const r=e[i];if(r.endsWith("[]")){const l=r.slice(0,-2),u=n;if(l in u&&Array.isArray(u[l]))for(const f of u[l])dt(f,e,t,i+1,o)}else if(r==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const l=n,u=Object.keys(l).filter(c=>!c.startsWith("_")&&!o.has(c)),f={};for(const c of u)f[c]=l[c];for(const[c,d]of Object.entries(f)){const p=[];for(const h of t.slice(i))h==="*"?p.push(c):p.push(h);a(l,p,d)}for(const c of u)delete l[c]}}else{const l=n;r in l&&dt(l[r],e,t,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ft(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xl(n){const e={},t=s(n,["operationName"]);t!=null&&a(e,["operationName"],t);const i=s(n,["resourceName"]);return i!=null&&a(e,["_url","resourceName"],i),e}function Rl(n){const e={},t=s(n,["name"]);t!=null&&a(e,["name"],t);const i=s(n,["metadata"]);i!=null&&a(e,["metadata"],i);const o=s(n,["done"]);o!=null&&a(e,["done"],o);const r=s(n,["error"]);r!=null&&a(e,["error"],r);const l=s(n,["response","generateVideoResponse"]);return l!=null&&a(e,["response"],kl(l)),e}function Pl(n){const e={},t=s(n,["name"]);t!=null&&a(e,["name"],t);const i=s(n,["metadata"]);i!=null&&a(e,["metadata"],i);const o=s(n,["done"]);o!=null&&a(e,["done"],o);const r=s(n,["error"]);r!=null&&a(e,["error"],r);const l=s(n,["response"]);return l!=null&&a(e,["response"],Ml(l)),e}function kl(n){const e={},t=s(n,["generatedSamples"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Nl(l))),a(e,["generatedVideos"],r)}const i=s(n,["raiMediaFilteredCount"]);i!=null&&a(e,["raiMediaFilteredCount"],i);const o=s(n,["raiMediaFilteredReasons"]);return o!=null&&a(e,["raiMediaFilteredReasons"],o),e}function Ml(n){const e={},t=s(n,["videos"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Dl(l))),a(e,["generatedVideos"],r)}const i=s(n,["raiMediaFilteredCount"]);i!=null&&a(e,["raiMediaFilteredCount"],i);const o=s(n,["raiMediaFilteredReasons"]);return o!=null&&a(e,["raiMediaFilteredReasons"],o),e}function Nl(n){const e={},t=s(n,["video"]);return t!=null&&a(e,["video"],Gl(t)),e}function Dl(n){const e={},t=s(n,["_self"]);return t!=null&&a(e,["video"],Hl(t)),e}function Ll(n){const e={},t=s(n,["operationName"]);return t!=null&&a(e,["_url","operationName"],t),e}function bl(n){const e={},t=s(n,["operationName"]);return t!=null&&a(e,["_url","operationName"],t),e}function Ul(n){const e={},t=s(n,["name"]);t!=null&&a(e,["name"],t);const i=s(n,["metadata"]);i!=null&&a(e,["metadata"],i);const o=s(n,["done"]);o!=null&&a(e,["done"],o);const r=s(n,["error"]);r!=null&&a(e,["error"],r);const l=s(n,["response"]);return l!=null&&a(e,["response"],Fl(l)),e}function Fl(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const i=s(n,["parent"]);i!=null&&a(e,["parent"],i);const o=s(n,["documentName"]);return o!=null&&a(e,["documentName"],o),e}function Vr(n){const e={},t=s(n,["name"]);t!=null&&a(e,["name"],t);const i=s(n,["metadata"]);i!=null&&a(e,["metadata"],i);const o=s(n,["done"]);o!=null&&a(e,["done"],o);const r=s(n,["error"]);r!=null&&a(e,["error"],r);const l=s(n,["response"]);return l!=null&&a(e,["response"],Vl(l)),e}function Vl(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const i=s(n,["parent"]);i!=null&&a(e,["parent"],i);const o=s(n,["documentName"]);return o!=null&&a(e,["documentName"],o),e}function Gl(n){const e={},t=s(n,["uri"]);t!=null&&a(e,["uri"],t);const i=s(n,["encodedVideo"]);i!=null&&a(e,["videoBytes"],Ft(i));const o=s(n,["encoding"]);return o!=null&&a(e,["mimeType"],o),e}function Hl(n){const e={},t=s(n,["gcsUri"]);t!=null&&a(e,["uri"],t);const i=s(n,["bytesBase64Encoded"]);i!=null&&a(e,["videoBytes"],Ft(i));const o=s(n,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var pi;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(pi||(pi={}));var hi;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(hi||(hi={}));var mi;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(mi||(mi={}));var De;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(De||(De={}));var gi;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(gi||(gi={}));var yi;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(yi||(yi={}));var vi;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(vi||(vi={}));var Ti;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Ti||(Ti={}));var Ei;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Ei||(Ei={}));var Ci;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(Ci||(Ci={}));var Si;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Si||(Si={}));var _i;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(_i||(_i={}));var Ii;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Ii||(Ii={}));var Ai;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(Ai||(Ai={}));var wi;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(wi||(wi={}));var xi;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(xi||(xi={}));var Ri;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Ri||(Ri={}));var Pi;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(Pi||(Pi={}));var ki;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ki||(ki={}));var Dn;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Dn||(Dn={}));var Mi;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Mi||(Mi={}));var Ni;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Ni||(Ni={}));var Di;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Di||(Di={}));var pt;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(pt||(pt={}));var Li;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Li||(Li={}));var bi;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(bi||(bi={}));var Ui;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Ui||(Ui={}));var Fi;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Fi||(Fi={}));var Vi;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Vi||(Vi={}));var Gi;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Gi||(Gi={}));var Hi;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Hi||(Hi={}));var Bi;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Bi||(Bi={}));var qi;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(qi||(qi={}));var Ji;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Ji||(Ji={}));var zi;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(zi||(zi={}));var Oi;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Oi||(Oi={}));var $i;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})($i||($i={}));var Wi;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Wi||(Wi={}));var Yi;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Yi||(Yi={}));var Ki;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(Ki||(Ki={}));var Xi;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Xi||(Xi={}));var Qi;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Qi||(Qi={}));var Zi;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Zi||(Zi={}));var ji;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(ji||(ji={}));var eo;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(eo||(eo={}));var no;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(no||(no={}));var to;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(to||(to={}));var io;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(io||(io={}));var oo;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(oo||(oo={}));var ro;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ro||(ro={}));var so;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(so||(so={}));var lo;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(lo||(lo={}));var ao;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(ao||(ao={}));var uo;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(uo||(uo={}));var co;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(co||(co={}));var We;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(We||(We={}));class ht{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class an{get text(){var e,t,i,o,r,l,u,f;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",d=!1;const p=[];for(const h of(f=(u=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[m,g]of Object.entries(h))m!=="text"&&m!=="thought"&&m!=="thoughtSignature"&&(g!==null||g!==void 0)&&p.push(m);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;d=!0,c+=h.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?c:void 0}get data(){var e,t,i,o,r,l,u,f;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const d=[];for(const p of(f=(u=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[h,m]of Object.entries(p))h!=="inlineData"&&(m!==null||m!==void 0)&&d.push(h);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,t,i,o,r,l,u,f;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(f=(u=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,t,i,o,r,l,u,f,c;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(f=(u=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,t,i,o,r,l,u,f,c;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(f=(u=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.output}}class fo{}class po{}class Bl{}class ql{}class Jl{}class zl{}class ho{}class mo{}class go{}class Ol{}class Ln{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Ln;let o;const r=e;return t?o=Pl(r):o=Rl(r),Object.assign(i,o),i}}class yo{}class vo{}class To{}class Eo{}class $l{}class Wl{}class Yl{}class Vt{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Vt,r=Ul(e);return Object.assign(i,r),i}}class Kl{}class Xl{}class Ql{}class Co{}class Zl{get text(){var e,t,i;let o="",r=!1;const l=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,c]of Object.entries(u))f!=="text"&&f!=="thought"&&c!==null&&l.push(f);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;r=!0,o+=u.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?o:void 0}get data(){var e,t,i;let o="";const r=[];for(const l of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[u,f]of Object.entries(l))u!=="inlineData"&&f!==null&&r.push(u);l.inlineData&&typeof l.inlineData.data=="string"&&(o+=atob(l.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class jl{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Gt{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Gt,r=Vr(e);return Object.assign(i,r),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function z(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Gr(n,e){const t=z(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function Hr(n){return Array.isArray(n)?n.map(e=>bn(e)):[bn(n)]}function bn(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Br(n){const e=bn(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function qr(n){const e=bn(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function So(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Jr(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>So(e)):[So(n)]}function mt(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function _o(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Io(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function ne(n){if(n==null)throw new Error("ContentUnion is required");return mt(n)?n:{role:"user",parts:Jr(n)}}function Ht(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=ne(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=ne(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>ne(t)):[ne(e)]}function de(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(_o(n)||Io(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ne(n)]}const e=[],t=[],i=mt(n[0]);for(const o of n){const r=mt(o);if(r!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)e.push(o);else{if(_o(o)||Io(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:Jr(t)}),e}function ea(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(De).includes(t[0].toUpperCase())?t[0].toUpperCase():De.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(De).includes(i.toUpperCase())?i.toUpperCase():De.TYPE_UNSPECIFIED})}}function Ke(n){const e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=n.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(e.nullable=!0,n=r[1]):r[1].type==="null"&&(e.nullable=!0,n=r[0])),n.type instanceof Array&&ea(n.type,e);for(const[l,u]of Object.entries(n))if(u!=null)if(l=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(De).includes(u.toUpperCase())?u.toUpperCase():De.TYPE_UNSPECIFIED}else if(t.includes(l))e[l]=Ke(u);else if(i.includes(l)){const f=[];for(const c of u){if(c.type=="null"){e.nullable=!0;continue}f.push(Ke(c))}e[l]=f}else if(o.includes(l)){const f={};for(const[c,d]of Object.entries(u))f[c]=Ke(d);e[l]=f}else{if(l==="additionalProperties")continue;e[l]=u}return e}function Bt(n){return Ke(n)}function qt(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Jt(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function je(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ke(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ke(e.response));return n}function en(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function na(n,e,t,i=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function ke(n,e){if(typeof e!="string")throw new Error("name must be a string");return na(n,e,"cachedContents")}function zr(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Le(n){return Ft(n)}function ta(n){return n!=null&&typeof n=="object"&&"name"in n}function ia(n){return n!=null&&typeof n=="object"&&"video"in n}function oa(n){return n!=null&&typeof n=="object"&&"uri"in n}function Or(n){var e;let t;if(ta(n)&&(t=n.name),!(oa(n)&&(t=n.uri,t===void 0))&&!(ia(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function $r(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function Wr(n){for(const e of["models","tunedModels","publisherModels"])if(ra(n,e))return n[e];return[]}function ra(n,e){return n!==null&&typeof n=="object"&&e in n}function sa(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function la(n,e={}){const t=[],i=new Set;for(const o of n){const r=o.name;if(i.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);i.add(r);const l=sa(o,e);l.functionDeclarations&&t.push(...l.functionDeclarations)}return{functionDeclarations:t}}function Yr(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function aa(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Kr(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let r=!1;for(const l of o){if(typeof l!="object"||l===null)continue;const f=l.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){r=!0;break}}return r&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function nn(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function Xr(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ua(n){const e={},t=s(n,["responsesFile"]);t!=null&&a(e,["fileName"],t);const i=s(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>Ja(l))),a(e,["inlinedResponses"],r)}const o=s(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),a(e,["inlinedEmbedContentResponses"],r)}return e}function ca(n){const e={},t=s(n,["predictionsFormat"]);t!=null&&a(e,["format"],t);const i=s(n,["gcsDestination","outputUriPrefix"]);i!=null&&a(e,["gcsUri"],i);const o=s(n,["bigqueryDestination","outputUri"]);return o!=null&&a(e,["bigqueryUri"],o),e}function fa(n){const e={},t=s(n,["format"]);t!=null&&a(e,["predictionsFormat"],t);const i=s(n,["gcsUri"]);i!=null&&a(e,["gcsDestination","outputUriPrefix"],i);const o=s(n,["bigqueryUri"]);if(o!=null&&a(e,["bigqueryDestination","outputUri"],o),s(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(s(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(s(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Rn(n){const e={},t=s(n,["name"]);t!=null&&a(e,["name"],t);const i=s(n,["metadata","displayName"]);i!=null&&a(e,["displayName"],i);const o=s(n,["metadata","state"]);o!=null&&a(e,["state"],Xr(o));const r=s(n,["metadata","createTime"]);r!=null&&a(e,["createTime"],r);const l=s(n,["metadata","endTime"]);l!=null&&a(e,["endTime"],l);const u=s(n,["metadata","updateTime"]);u!=null&&a(e,["updateTime"],u);const f=s(n,["metadata","model"]);f!=null&&a(e,["model"],f);const c=s(n,["metadata","output"]);return c!=null&&a(e,["dest"],ua(Kr(c))),e}function gt(n){const e={},t=s(n,["name"]);t!=null&&a(e,["name"],t);const i=s(n,["displayName"]);i!=null&&a(e,["displayName"],i);const o=s(n,["state"]);o!=null&&a(e,["state"],Xr(o));const r=s(n,["error"]);r!=null&&a(e,["error"],r);const l=s(n,["createTime"]);l!=null&&a(e,["createTime"],l);const u=s(n,["startTime"]);u!=null&&a(e,["startTime"],u);const f=s(n,["endTime"]);f!=null&&a(e,["endTime"],f);const c=s(n,["updateTime"]);c!=null&&a(e,["updateTime"],c);const d=s(n,["model"]);d!=null&&a(e,["model"],d);const p=s(n,["inputConfig"]);p!=null&&a(e,["src"],da(p));const h=s(n,["outputConfig"]);h!=null&&a(e,["dest"],ca(Kr(h)));const m=s(n,["completionStats"]);return m!=null&&a(e,["completionStats"],m),e}function da(n){const e={},t=s(n,["instancesFormat"]);t!=null&&a(e,["format"],t);const i=s(n,["gcsSource","uris"]);i!=null&&a(e,["gcsUri"],i);const o=s(n,["bigquerySource","inputUri"]);return o!=null&&a(e,["bigqueryUri"],o),e}function pa(n,e){const t={};if(s(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(s(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(s(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=s(e,["fileName"]);i!=null&&a(t,["fileName"],i);const o=s(e,["inlinedRequests"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>qa(n,l))),a(t,["requests","requests"],r)}return t}function ha(n){const e={},t=s(n,["format"]);t!=null&&a(e,["instancesFormat"],t);const i=s(n,["gcsUri"]);i!=null&&a(e,["gcsSource","uris"],i);const o=s(n,["bigqueryUri"]);if(o!=null&&a(e,["bigquerySource","inputUri"],o),s(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(s(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function ma(n){const e={},t=s(n,["data"]);if(t!=null&&a(e,["data"],t),s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=s(n,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function ga(n,e){const t={},i=s(e,["name"]);return i!=null&&a(t,["_url","name"],nn(n,i)),t}function ya(n,e){const t={},i=s(e,["name"]);return i!=null&&a(t,["_url","name"],nn(n,i)),t}function va(n){const e={},t=s(n,["content"]);t!=null&&a(e,["content"],t);const i=s(n,["citationMetadata"]);i!=null&&a(e,["citationMetadata"],Ta(i));const o=s(n,["tokenCount"]);o!=null&&a(e,["tokenCount"],o);const r=s(n,["finishReason"]);r!=null&&a(e,["finishReason"],r);const l=s(n,["avgLogprobs"]);l!=null&&a(e,["avgLogprobs"],l);const u=s(n,["groundingMetadata"]);u!=null&&a(e,["groundingMetadata"],u);const f=s(n,["index"]);f!=null&&a(e,["index"],f);const c=s(n,["logprobsResult"]);c!=null&&a(e,["logprobsResult"],c);const d=s(n,["safetyRatings"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(m=>m)),a(e,["safetyRatings"],h)}const p=s(n,["urlContextMetadata"]);return p!=null&&a(e,["urlContextMetadata"],p),e}function Ta(n){const e={},t=s(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),a(e,["citations"],i)}return e}function Qr(n){const e={},t=s(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Xa(r))),a(e,["parts"],o)}const i=s(n,["role"]);return i!=null&&a(e,["role"],i),e}function Ea(n,e){const t={},i=s(n,["displayName"]);if(e!==void 0&&i!=null&&a(e,["batch","displayName"],i),s(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function Ca(n,e){const t={},i=s(n,["displayName"]);e!==void 0&&i!=null&&a(e,["displayName"],i);const o=s(n,["dest"]);return e!==void 0&&o!=null&&a(e,["outputConfig"],fa(aa(o))),t}function Ao(n,e){const t={},i=s(e,["model"]);i!=null&&a(t,["_url","model"],z(n,i));const o=s(e,["src"]);o!=null&&a(t,["batch","inputConfig"],pa(n,Yr(n,o)));const r=s(e,["config"]);return r!=null&&Ea(r,t),t}function Sa(n,e){const t={},i=s(e,["model"]);i!=null&&a(t,["model"],z(n,i));const o=s(e,["src"]);o!=null&&a(t,["inputConfig"],ha(Yr(n,o)));const r=s(e,["config"]);return r!=null&&Ca(r,t),t}function _a(n,e){const t={},i=s(n,["displayName"]);return e!==void 0&&i!=null&&a(e,["batch","displayName"],i),t}function Ia(n,e){const t={},i=s(e,["model"]);i!=null&&a(t,["_url","model"],z(n,i));const o=s(e,["src"]);o!=null&&a(t,["batch","inputConfig"],Ma(n,o));const r=s(e,["config"]);return r!=null&&_a(r,t),t}function Aa(n,e){const t={},i=s(e,["name"]);return i!=null&&a(t,["_url","name"],nn(n,i)),t}function wa(n,e){const t={},i=s(e,["name"]);return i!=null&&a(t,["_url","name"],nn(n,i)),t}function xa(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const i=s(n,["name"]);i!=null&&a(e,["name"],i);const o=s(n,["done"]);o!=null&&a(e,["done"],o);const r=s(n,["error"]);return r!=null&&a(e,["error"],r),e}function Ra(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const i=s(n,["name"]);i!=null&&a(e,["name"],i);const o=s(n,["done"]);o!=null&&a(e,["done"],o);const r=s(n,["error"]);return r!=null&&a(e,["error"],r),e}function Pa(n,e){const t={},i=s(e,["contents"]);if(i!=null){let r=Ht(n,i);Array.isArray(r)&&(r=r.map(l=>l)),a(t,["requests[]","request","content"],r)}const o=s(e,["config"]);return o!=null&&(a(t,["_self"],ka(o,t)),wl(t,{"requests[].*":"requests[].request.*"})),t}function ka(n,e){const t={},i=s(n,["taskType"]);e!==void 0&&i!=null&&a(e,["requests[]","taskType"],i);const o=s(n,["title"]);e!==void 0&&o!=null&&a(e,["requests[]","title"],o);const r=s(n,["outputDimensionality"]);if(e!==void 0&&r!=null&&a(e,["requests[]","outputDimensionality"],r),s(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(s(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Ma(n,e){const t={},i=s(e,["fileName"]);i!=null&&a(t,["file_name"],i);const o=s(e,["inlinedRequests"]);return o!=null&&a(t,["requests"],Pa(n,o)),t}function Na(n){const e={};if(s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=s(n,["fileUri"]);t!=null&&a(e,["fileUri"],t);const i=s(n,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function Da(n){const e={},t=s(n,["id"]);t!=null&&a(e,["id"],t);const i=s(n,["args"]);i!=null&&a(e,["args"],i);const o=s(n,["name"]);if(o!=null&&a(e,["name"],o),s(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(s(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function La(n){const e={},t=s(n,["mode"]);t!=null&&a(e,["mode"],t);const i=s(n,["allowedFunctionNames"]);if(i!=null&&a(e,["allowedFunctionNames"],i),s(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ba(n,e,t){const i={},o=s(e,["systemInstruction"]);t!==void 0&&o!=null&&a(t,["systemInstruction"],Qr(ne(o)));const r=s(e,["temperature"]);r!=null&&a(i,["temperature"],r);const l=s(e,["topP"]);l!=null&&a(i,["topP"],l);const u=s(e,["topK"]);u!=null&&a(i,["topK"],u);const f=s(e,["candidateCount"]);f!=null&&a(i,["candidateCount"],f);const c=s(e,["maxOutputTokens"]);c!=null&&a(i,["maxOutputTokens"],c);const d=s(e,["stopSequences"]);d!=null&&a(i,["stopSequences"],d);const p=s(e,["responseLogprobs"]);p!=null&&a(i,["responseLogprobs"],p);const h=s(e,["logprobs"]);h!=null&&a(i,["logprobs"],h);const m=s(e,["presencePenalty"]);m!=null&&a(i,["presencePenalty"],m);const g=s(e,["frequencyPenalty"]);g!=null&&a(i,["frequencyPenalty"],g);const T=s(e,["seed"]);T!=null&&a(i,["seed"],T);const E=s(e,["responseMimeType"]);E!=null&&a(i,["responseMimeType"],E);const C=s(e,["responseSchema"]);C!=null&&a(i,["responseSchema"],Bt(C));const A=s(e,["responseJsonSchema"]);if(A!=null&&a(i,["responseJsonSchema"],A),s(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(s(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=s(e,["safetySettings"]);if(t!==void 0&&_!=null){let U=_;Array.isArray(U)&&(U=U.map(O=>Qa(O))),a(t,["safetySettings"],U)}const R=s(e,["tools"]);if(t!==void 0&&R!=null){let U=en(R);Array.isArray(U)&&(U=U.map(O=>ja(je(O)))),a(t,["tools"],U)}const D=s(e,["toolConfig"]);if(t!==void 0&&D!=null&&a(t,["toolConfig"],Za(D)),s(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=s(e,["cachedContent"]);t!==void 0&&S!=null&&a(t,["cachedContent"],ke(n,S));const M=s(e,["responseModalities"]);M!=null&&a(i,["responseModalities"],M);const H=s(e,["mediaResolution"]);H!=null&&a(i,["mediaResolution"],H);const P=s(e,["speechConfig"]);if(P!=null&&a(i,["speechConfig"],qt(P)),s(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const b=s(e,["thinkingConfig"]);b!=null&&a(i,["thinkingConfig"],b);const N=s(e,["imageConfig"]);N!=null&&a(i,["imageConfig"],Ba(N));const L=s(e,["enableEnhancedCivicAnswers"]);return L!=null&&a(i,["enableEnhancedCivicAnswers"],L),i}function Ua(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const i=s(n,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(c=>va(c))),a(e,["candidates"],f)}const o=s(n,["modelVersion"]);o!=null&&a(e,["modelVersion"],o);const r=s(n,["promptFeedback"]);r!=null&&a(e,["promptFeedback"],r);const l=s(n,["responseId"]);l!=null&&a(e,["responseId"],l);const u=s(n,["usageMetadata"]);return u!=null&&a(e,["usageMetadata"],u),e}function Fa(n,e){const t={},i=s(e,["name"]);return i!=null&&a(t,["_url","name"],nn(n,i)),t}function Va(n,e){const t={},i=s(e,["name"]);return i!=null&&a(t,["_url","name"],nn(n,i)),t}function Ga(n){const e={};if(s(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=s(n,["enableWidget"]);return t!=null&&a(e,["enableWidget"],t),e}function Ha(n){const e={};if(s(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(s(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=s(n,["timeRangeFilter"]);return t!=null&&a(e,["timeRangeFilter"],t),e}function Ba(n){const e={},t=s(n,["aspectRatio"]);t!=null&&a(e,["aspectRatio"],t);const i=s(n,["imageSize"]);if(i!=null&&a(e,["imageSize"],i),s(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(s(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function qa(n,e){const t={},i=s(e,["model"]);i!=null&&a(t,["request","model"],z(n,i));const o=s(e,["contents"]);if(o!=null){let u=de(o);Array.isArray(u)&&(u=u.map(f=>Qr(f))),a(t,["request","contents"],u)}const r=s(e,["metadata"]);r!=null&&a(t,["metadata"],r);const l=s(e,["config"]);return l!=null&&a(t,["request","generationConfig"],ba(n,l,s(t,["request"],{}))),t}function Ja(n){const e={},t=s(n,["response"]);t!=null&&a(e,["response"],Ua(t));const i=s(n,["error"]);return i!=null&&a(e,["error"],i),e}function za(n,e){const t={},i=s(n,["pageSize"]);e!==void 0&&i!=null&&a(e,["_query","pageSize"],i);const o=s(n,["pageToken"]);if(e!==void 0&&o!=null&&a(e,["_query","pageToken"],o),s(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function Oa(n,e){const t={},i=s(n,["pageSize"]);e!==void 0&&i!=null&&a(e,["_query","pageSize"],i);const o=s(n,["pageToken"]);e!==void 0&&o!=null&&a(e,["_query","pageToken"],o);const r=s(n,["filter"]);return e!==void 0&&r!=null&&a(e,["_query","filter"],r),t}function $a(n){const e={},t=s(n,["config"]);return t!=null&&za(t,e),e}function Wa(n){const e={},t=s(n,["config"]);return t!=null&&Oa(t,e),e}function Ya(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const i=s(n,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const o=s(n,["operations"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>Rn(l))),a(e,["batchJobs"],r)}return e}function Ka(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const i=s(n,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const o=s(n,["batchPredictionJobs"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>gt(l))),a(e,["batchJobs"],r)}return e}function Xa(n){const e={},t=s(n,["mediaResolution"]);t!=null&&a(e,["mediaResolution"],t);const i=s(n,["codeExecutionResult"]);i!=null&&a(e,["codeExecutionResult"],i);const o=s(n,["executableCode"]);o!=null&&a(e,["executableCode"],o);const r=s(n,["fileData"]);r!=null&&a(e,["fileData"],Na(r));const l=s(n,["functionCall"]);l!=null&&a(e,["functionCall"],Da(l));const u=s(n,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const f=s(n,["inlineData"]);f!=null&&a(e,["inlineData"],ma(f));const c=s(n,["text"]);c!=null&&a(e,["text"],c);const d=s(n,["thought"]);d!=null&&a(e,["thought"],d);const p=s(n,["thoughtSignature"]);p!=null&&a(e,["thoughtSignature"],p);const h=s(n,["videoMetadata"]);return h!=null&&a(e,["videoMetadata"],h),e}function Qa(n){const e={},t=s(n,["category"]);if(t!=null&&a(e,["category"],t),s(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=s(n,["threshold"]);return i!=null&&a(e,["threshold"],i),e}function Za(n){const e={},t=s(n,["functionCallingConfig"]);t!=null&&a(e,["functionCallingConfig"],La(t));const i=s(n,["retrievalConfig"]);return i!=null&&a(e,["retrievalConfig"],i),e}function ja(n){const e={},t=s(n,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(p=>p)),a(e,["functionDeclarations"],d)}if(s(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(n,["googleSearchRetrieval"]);i!=null&&a(e,["googleSearchRetrieval"],i);const o=s(n,["computerUse"]);o!=null&&a(e,["computerUse"],o);const r=s(n,["fileSearch"]);r!=null&&a(e,["fileSearch"],r);const l=s(n,["codeExecution"]);if(l!=null&&a(e,["codeExecution"],l),s(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=s(n,["googleMaps"]);u!=null&&a(e,["googleMaps"],Ga(u));const f=s(n,["googleSearch"]);f!=null&&a(e,["googleSearch"],Ha(f));const c=s(n,["urlContext"]);return c!=null&&a(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Re;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Re||(Re={}));class He{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,r;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=t.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(r=(o=l.config)===null||o===void 0?void 0:o.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eu extends Pe{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new He(Re.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=Ao(this.apiClient,e),i=t._url,o=k("{model}:batchGenerateContent",i),u=t.batch.inputConfig.requests,f=u.requests,c=[];for(const d of f){const p=Object.assign({},d);if(p.systemInstruction){const h=p.systemInstruction;delete p.systemInstruction;const m=p.request;m.systemInstruction=h,p.request=m}c.push(p)}return u.requests=c,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const r=this.getGcsUri(e),l=this.getBigqueryUri(e);if(r)r.endsWith(".jsonl")?i.dest=`${r.slice(0,-6)}/dest`:i.dest=`${r}_dest_${o}`;else if(l)i.dest=`${l}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,o,r;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=Sa(this.apiClient,e);return u=k("batchPredictionJobs",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>gt(d))}else{const c=Ao(this.apiClient,e);return u=k("{model}:batchGenerateContent",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),l.then(d=>Rn(d))}}async createEmbeddingsInternal(e){var t,i;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ia(this.apiClient,e);return r=k("{model}:asyncBatchEmbedContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>Rn(f))}}async get(e){var t,i,o,r;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=Va(this.apiClient,e);return u=k("batchPredictionJobs/{name}",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>gt(d))}else{const c=Fa(this.apiClient,e);return u=k("batches/{name}",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),l.then(d=>Rn(d))}}async cancel(e){var t,i,o,r;let l="",u={};if(this.apiClient.isVertexAI()){const f=ya(this.apiClient,e);l=k("batchPredictionJobs/{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=ga(this.apiClient,e);l=k("batches/{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var t,i,o,r;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=Wa(e);return u=k("batchPredictionJobs",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),l.then(d=>{const p=Ka(d),h=new Co;return Object.assign(h,p),h})}else{const c=$a(e);return u=k("batches",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),l.then(d=>{const p=Ya(d),h=new Co;return Object.assign(h,p),h})}}async delete(e){var t,i,o,r;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=wa(this.apiClient,e);return u=k("batchPredictionJobs/{name}",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),l.then(d=>Ra(d))}else{const c=Aa(this.apiClient,e);return u=k("batches/{name}",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),l.then(d=>xa(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nu(n){const e={},t=s(n,["data"]);if(t!=null&&a(e,["data"],t),s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=s(n,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function wo(n){const e={},t=s(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Iu(r))),a(e,["parts"],o)}const i=s(n,["role"]);return i!=null&&a(e,["role"],i),e}function tu(n,e){const t={},i=s(n,["ttl"]);e!==void 0&&i!=null&&a(e,["ttl"],i);const o=s(n,["expireTime"]);e!==void 0&&o!=null&&a(e,["expireTime"],o);const r=s(n,["displayName"]);e!==void 0&&r!=null&&a(e,["displayName"],r);const l=s(n,["contents"]);if(e!==void 0&&l!=null){let d=de(l);Array.isArray(d)&&(d=d.map(p=>wo(p))),a(e,["contents"],d)}const u=s(n,["systemInstruction"]);e!==void 0&&u!=null&&a(e,["systemInstruction"],wo(ne(u)));const f=s(n,["tools"]);if(e!==void 0&&f!=null){let d=f;Array.isArray(d)&&(d=d.map(p=>wu(p))),a(e,["tools"],d)}const c=s(n,["toolConfig"]);if(e!==void 0&&c!=null&&a(e,["toolConfig"],Au(c)),s(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function iu(n,e){const t={},i=s(n,["ttl"]);e!==void 0&&i!=null&&a(e,["ttl"],i);const o=s(n,["expireTime"]);e!==void 0&&o!=null&&a(e,["expireTime"],o);const r=s(n,["displayName"]);e!==void 0&&r!=null&&a(e,["displayName"],r);const l=s(n,["contents"]);if(e!==void 0&&l!=null){let p=de(l);Array.isArray(p)&&(p=p.map(h=>h)),a(e,["contents"],p)}const u=s(n,["systemInstruction"]);e!==void 0&&u!=null&&a(e,["systemInstruction"],ne(u));const f=s(n,["tools"]);if(e!==void 0&&f!=null){let p=f;Array.isArray(p)&&(p=p.map(h=>xu(h))),a(e,["tools"],p)}const c=s(n,["toolConfig"]);e!==void 0&&c!=null&&a(e,["toolConfig"],c);const d=s(n,["kmsKeyName"]);return e!==void 0&&d!=null&&a(e,["encryption_spec","kmsKeyName"],d),t}function ou(n,e){const t={},i=s(e,["model"]);i!=null&&a(t,["model"],Gr(n,i));const o=s(e,["config"]);return o!=null&&tu(o,t),t}function ru(n,e){const t={},i=s(e,["model"]);i!=null&&a(t,["model"],Gr(n,i));const o=s(e,["config"]);return o!=null&&iu(o,t),t}function su(n,e){const t={},i=s(e,["name"]);return i!=null&&a(t,["_url","name"],ke(n,i)),t}function lu(n,e){const t={},i=s(e,["name"]);return i!=null&&a(t,["_url","name"],ke(n,i)),t}function au(n){const e={},t=s(n,["sdkHttpResponse"]);return t!=null&&a(e,["sdkHttpResponse"],t),e}function uu(n){const e={},t=s(n,["sdkHttpResponse"]);return t!=null&&a(e,["sdkHttpResponse"],t),e}function cu(n){const e={};if(s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=s(n,["fileUri"]);t!=null&&a(e,["fileUri"],t);const i=s(n,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function fu(n){const e={},t=s(n,["id"]);t!=null&&a(e,["id"],t);const i=s(n,["args"]);i!=null&&a(e,["args"],i);const o=s(n,["name"]);if(o!=null&&a(e,["name"],o),s(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(s(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function du(n){const e={},t=s(n,["mode"]);t!=null&&a(e,["mode"],t);const i=s(n,["allowedFunctionNames"]);if(i!=null&&a(e,["allowedFunctionNames"],i),s(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function pu(n){const e={};if(s(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=s(n,["description"]);t!=null&&a(e,["description"],t);const i=s(n,["name"]);i!=null&&a(e,["name"],i);const o=s(n,["parameters"]);o!=null&&a(e,["parameters"],o);const r=s(n,["parametersJsonSchema"]);r!=null&&a(e,["parametersJsonSchema"],r);const l=s(n,["response"]);l!=null&&a(e,["response"],l);const u=s(n,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function hu(n,e){const t={},i=s(e,["name"]);return i!=null&&a(t,["_url","name"],ke(n,i)),t}function mu(n,e){const t={},i=s(e,["name"]);return i!=null&&a(t,["_url","name"],ke(n,i)),t}function gu(n){const e={};if(s(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=s(n,["enableWidget"]);return t!=null&&a(e,["enableWidget"],t),e}function yu(n){const e={};if(s(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(s(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=s(n,["timeRangeFilter"]);return t!=null&&a(e,["timeRangeFilter"],t),e}function vu(n,e){const t={},i=s(n,["pageSize"]);e!==void 0&&i!=null&&a(e,["_query","pageSize"],i);const o=s(n,["pageToken"]);return e!==void 0&&o!=null&&a(e,["_query","pageToken"],o),t}function Tu(n,e){const t={},i=s(n,["pageSize"]);e!==void 0&&i!=null&&a(e,["_query","pageSize"],i);const o=s(n,["pageToken"]);return e!==void 0&&o!=null&&a(e,["_query","pageToken"],o),t}function Eu(n){const e={},t=s(n,["config"]);return t!=null&&vu(t,e),e}function Cu(n){const e={},t=s(n,["config"]);return t!=null&&Tu(t,e),e}function Su(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const i=s(n,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const o=s(n,["cachedContents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),a(e,["cachedContents"],r)}return e}function _u(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const i=s(n,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const o=s(n,["cachedContents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),a(e,["cachedContents"],r)}return e}function Iu(n){const e={},t=s(n,["mediaResolution"]);t!=null&&a(e,["mediaResolution"],t);const i=s(n,["codeExecutionResult"]);i!=null&&a(e,["codeExecutionResult"],i);const o=s(n,["executableCode"]);o!=null&&a(e,["executableCode"],o);const r=s(n,["fileData"]);r!=null&&a(e,["fileData"],cu(r));const l=s(n,["functionCall"]);l!=null&&a(e,["functionCall"],fu(l));const u=s(n,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const f=s(n,["inlineData"]);f!=null&&a(e,["inlineData"],nu(f));const c=s(n,["text"]);c!=null&&a(e,["text"],c);const d=s(n,["thought"]);d!=null&&a(e,["thought"],d);const p=s(n,["thoughtSignature"]);p!=null&&a(e,["thoughtSignature"],p);const h=s(n,["videoMetadata"]);return h!=null&&a(e,["videoMetadata"],h),e}function Au(n){const e={},t=s(n,["functionCallingConfig"]);t!=null&&a(e,["functionCallingConfig"],du(t));const i=s(n,["retrievalConfig"]);return i!=null&&a(e,["retrievalConfig"],i),e}function wu(n){const e={},t=s(n,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(p=>p)),a(e,["functionDeclarations"],d)}if(s(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(n,["googleSearchRetrieval"]);i!=null&&a(e,["googleSearchRetrieval"],i);const o=s(n,["computerUse"]);o!=null&&a(e,["computerUse"],o);const r=s(n,["fileSearch"]);r!=null&&a(e,["fileSearch"],r);const l=s(n,["codeExecution"]);if(l!=null&&a(e,["codeExecution"],l),s(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=s(n,["googleMaps"]);u!=null&&a(e,["googleMaps"],gu(u));const f=s(n,["googleSearch"]);f!=null&&a(e,["googleSearch"],yu(f));const c=s(n,["urlContext"]);return c!=null&&a(e,["urlContext"],c),e}function xu(n){const e={},t=s(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(h=>pu(h))),a(e,["functionDeclarations"],p)}const i=s(n,["retrieval"]);i!=null&&a(e,["retrieval"],i);const o=s(n,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const r=s(n,["computerUse"]);if(r!=null&&a(e,["computerUse"],r),s(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=s(n,["codeExecution"]);l!=null&&a(e,["codeExecution"],l);const u=s(n,["enterpriseWebSearch"]);u!=null&&a(e,["enterpriseWebSearch"],u);const f=s(n,["googleMaps"]);f!=null&&a(e,["googleMaps"],f);const c=s(n,["googleSearch"]);c!=null&&a(e,["googleSearch"],c);const d=s(n,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}function Ru(n,e){const t={},i=s(n,["ttl"]);e!==void 0&&i!=null&&a(e,["ttl"],i);const o=s(n,["expireTime"]);return e!==void 0&&o!=null&&a(e,["expireTime"],o),t}function Pu(n,e){const t={},i=s(n,["ttl"]);e!==void 0&&i!=null&&a(e,["ttl"],i);const o=s(n,["expireTime"]);return e!==void 0&&o!=null&&a(e,["expireTime"],o),t}function ku(n,e){const t={},i=s(e,["name"]);i!=null&&a(t,["_url","name"],ke(n,i));const o=s(e,["config"]);return o!=null&&Ru(o,t),t}function Mu(n,e){const t={},i=s(e,["name"]);i!=null&&a(t,["_url","name"],ke(n,i));const o=s(e,["config"]);return o!=null&&Pu(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nu extends Pe{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new He(Re.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,r;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=ru(this.apiClient,e);return u=k("cachedContents",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>d)}else{const c=ou(this.apiClient,e);return u=k("cachedContents",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),l.then(d=>d)}}async get(e){var t,i,o,r;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=mu(this.apiClient,e);return u=k("{name}",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>d)}else{const c=hu(this.apiClient,e);return u=k("{name}",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),l.then(d=>d)}}async delete(e){var t,i,o,r;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=lu(this.apiClient,e);return u=k("{name}",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),l.then(d=>{const p=uu(d),h=new To;return Object.assign(h,p),h})}else{const c=su(this.apiClient,e);return u=k("{name}",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),l.then(d=>{const p=au(d),h=new To;return Object.assign(h,p),h})}}async update(e){var t,i,o,r;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=Mu(this.apiClient,e);return u=k("{name}",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>d)}else{const c=ku(this.apiClient,e);return u=k("{name}",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),l.then(d=>d)}}async listInternal(e){var t,i,o,r;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=Cu(e);return u=k("cachedContents",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),l.then(d=>{const p=_u(d),h=new Eo;return Object.assign(h,p),h})}else{const c=Eu(e);return u=k("cachedContents",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),l.then(d=>{const p=Su(d),h=new Eo;return Object.assign(h,p),h})}}}function Un(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function xo(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function V(n){return this instanceof V?(this.v=n,this):new V(n)}function ve(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,r=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),o[Symbol.asyncIterator]=function(){return this},o;function l(m){return function(g){return Promise.resolve(g).then(m,p)}}function u(m,g){i[m]&&(o[m]=function(T){return new Promise(function(E,C){r.push([m,T,E,C])>1||f(m,T)})},g&&(o[m]=g(o[m])))}function f(m,g){try{c(i[m](g))}catch(T){h(r[0][3],T)}}function c(m){m.value instanceof V?Promise.resolve(m.value.v).then(d,p):h(r[0][2],m)}function d(m){f("next",m)}function p(m){f("throw",m)}function h(m,g){m(g),r.shift(),r.length&&f(r[0][0],r[0][1])}}function Te(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof xo=="function"?xo(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=n[r]&&function(l){return new Promise(function(u,f){l=n[r](l),o(u,f,l.done,l.value)})}}function o(r,l,u,f){Promise.resolve(f).then(function(c){r({value:c,done:u})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Du(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:Zr(t)}function Zr(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Lu(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Ro(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const o=[];let r=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),r&&!Zr(n[i])&&(r=!1),i++;r?e.push(...o):e.pop()}return e}class bu{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Uu(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Uu{constructor(e,t,i,o={},r=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=r,this.sendPromise=Promise.resolve(),Lu(r)}async sendMessage(e){var t;await this.sendPromise;const i=ne(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var r,l,u;const f=await o,c=(l=(r=f.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content,d=f.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let h=[];d!=null&&(h=(u=d.slice(p))!==null&&u!==void 0?u:[]);const m=c?[c]:[];this.recordHistory(i,m,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const i=ne(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const r=await o;return this.processStreamResponse(r,i)}getHistory(e=!1){const t=e?Ro(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return ve(this,arguments,function*(){var o,r,l,u,f,c;const d=[];try{for(var p=!0,h=Te(e),m;m=yield V(h.next()),o=m.done,!o;p=!0){u=m.value,p=!1;const g=u;if(Du(g)){const T=(c=(f=g.candidates)===null||f===void 0?void 0:f[0])===null||c===void 0?void 0:c.content;T!==void 0&&d.push(T)}yield yield V(g)}}catch(g){r={error:g}}finally{try{!p&&!o&&(l=h.return)&&(yield V(l.call(h)))}finally{if(r)throw r.error}}this.recordHistory(t,d)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(r=>r.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Ro(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bn extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Bn.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fu(n){const e={},t=s(n,["file"]);return t!=null&&a(e,["file"],t),e}function Vu(n){const e={},t=s(n,["sdkHttpResponse"]);return t!=null&&a(e,["sdkHttpResponse"],t),e}function Gu(n){const e={},t=s(n,["name"]);return t!=null&&a(e,["_url","file"],Or(t)),e}function Hu(n){const e={},t=s(n,["sdkHttpResponse"]);return t!=null&&a(e,["sdkHttpResponse"],t),e}function Bu(n){const e={},t=s(n,["name"]);return t!=null&&a(e,["_url","file"],Or(t)),e}function qu(n,e){const t={},i=s(n,["pageSize"]);e!==void 0&&i!=null&&a(e,["_query","pageSize"],i);const o=s(n,["pageToken"]);return e!==void 0&&o!=null&&a(e,["_query","pageToken"],o),t}function Ju(n){const e={},t=s(n,["config"]);return t!=null&&qu(t,e),e}function zu(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const i=s(n,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const o=s(n,["files"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),a(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ou extends Pe{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new He(Re.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ju(e);return r=k("files",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:f.headers},d})),o.then(f=>{const c=zu(f),d=new Kl;return Object.assign(d,c),d})}}async createInternal(e){var t,i;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Fu(e);return r=k("upload/v1beta/files",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const c=Vu(f),d=new Xl;return Object.assign(d,c),d})}}async get(e){var t,i;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Bu(e);return r=k("files/{file}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async delete(e){var t,i;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Gu(e);return r=k("files/{file}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:f.headers},d})),o.then(f=>{const c=Hu(f),d=new Ql;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pn(n){const e={},t=s(n,["data"]);if(t!=null&&a(e,["data"],t),s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=s(n,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function $u(n){const e={},t=s(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>ac(r))),a(e,["parts"],o)}const i=s(n,["role"]);return i!=null&&a(e,["role"],i),e}function Wu(n){const e={};if(s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=s(n,["fileUri"]);t!=null&&a(e,["fileUri"],t);const i=s(n,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function Yu(n){const e={},t=s(n,["id"]);t!=null&&a(e,["id"],t);const i=s(n,["args"]);i!=null&&a(e,["args"],i);const o=s(n,["name"]);if(o!=null&&a(e,["name"],o),s(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(s(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Ku(n){const e={};if(s(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=s(n,["description"]);t!=null&&a(e,["description"],t);const i=s(n,["name"]);i!=null&&a(e,["name"],i);const o=s(n,["parameters"]);o!=null&&a(e,["parameters"],o);const r=s(n,["parametersJsonSchema"]);r!=null&&a(e,["parametersJsonSchema"],r);const l=s(n,["response"]);l!=null&&a(e,["response"],l);const u=s(n,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function Xu(n){const e={},t=s(n,["modelSelectionConfig"]);t!=null&&a(e,["modelConfig"],t);const i=s(n,["responseJsonSchema"]);i!=null&&a(e,["responseJsonSchema"],i);const o=s(n,["audioTimestamp"]);o!=null&&a(e,["audioTimestamp"],o);const r=s(n,["candidateCount"]);r!=null&&a(e,["candidateCount"],r);const l=s(n,["enableAffectiveDialog"]);l!=null&&a(e,["enableAffectiveDialog"],l);const u=s(n,["frequencyPenalty"]);u!=null&&a(e,["frequencyPenalty"],u);const f=s(n,["logprobs"]);f!=null&&a(e,["logprobs"],f);const c=s(n,["maxOutputTokens"]);c!=null&&a(e,["maxOutputTokens"],c);const d=s(n,["mediaResolution"]);d!=null&&a(e,["mediaResolution"],d);const p=s(n,["presencePenalty"]);p!=null&&a(e,["presencePenalty"],p);const h=s(n,["responseLogprobs"]);h!=null&&a(e,["responseLogprobs"],h);const m=s(n,["responseMimeType"]);m!=null&&a(e,["responseMimeType"],m);const g=s(n,["responseModalities"]);g!=null&&a(e,["responseModalities"],g);const T=s(n,["responseSchema"]);T!=null&&a(e,["responseSchema"],T);const E=s(n,["routingConfig"]);E!=null&&a(e,["routingConfig"],E);const C=s(n,["seed"]);C!=null&&a(e,["seed"],C);const A=s(n,["speechConfig"]);A!=null&&a(e,["speechConfig"],A);const _=s(n,["stopSequences"]);_!=null&&a(e,["stopSequences"],_);const R=s(n,["temperature"]);R!=null&&a(e,["temperature"],R);const D=s(n,["thinkingConfig"]);D!=null&&a(e,["thinkingConfig"],D);const S=s(n,["topK"]);S!=null&&a(e,["topK"],S);const M=s(n,["topP"]);if(M!=null&&a(e,["topP"],M),s(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Qu(n){const e={};if(s(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=s(n,["enableWidget"]);return t!=null&&a(e,["enableWidget"],t),e}function Zu(n){const e={};if(s(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(s(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=s(n,["timeRangeFilter"]);return t!=null&&a(e,["timeRangeFilter"],t),e}function ju(n,e){const t={},i=s(n,["generationConfig"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig"],i);const o=s(n,["responseModalities"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig","responseModalities"],o);const r=s(n,["temperature"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig","temperature"],r);const l=s(n,["topP"]);e!==void 0&&l!=null&&a(e,["setup","generationConfig","topP"],l);const u=s(n,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const f=s(n,["maxOutputTokens"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","maxOutputTokens"],f);const c=s(n,["mediaResolution"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","mediaResolution"],c);const d=s(n,["seed"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","seed"],d);const p=s(n,["speechConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","speechConfig"],Jt(p));const h=s(n,["thinkingConfig"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","thinkingConfig"],h);const m=s(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=s(n,["systemInstruction"]);e!==void 0&&g!=null&&a(e,["setup","systemInstruction"],$u(ne(g)));const T=s(n,["tools"]);if(e!==void 0&&T!=null){let S=en(T);Array.isArray(S)&&(S=S.map(M=>cc(je(M)))),a(e,["setup","tools"],S)}const E=s(n,["sessionResumption"]);e!==void 0&&E!=null&&a(e,["setup","sessionResumption"],uc(E));const C=s(n,["inputAudioTranscription"]);e!==void 0&&C!=null&&a(e,["setup","inputAudioTranscription"],C);const A=s(n,["outputAudioTranscription"]);e!==void 0&&A!=null&&a(e,["setup","outputAudioTranscription"],A);const _=s(n,["realtimeInputConfig"]);e!==void 0&&_!=null&&a(e,["setup","realtimeInputConfig"],_);const R=s(n,["contextWindowCompression"]);e!==void 0&&R!=null&&a(e,["setup","contextWindowCompression"],R);const D=s(n,["proactivity"]);if(e!==void 0&&D!=null&&a(e,["setup","proactivity"],D),s(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function ec(n,e){const t={},i=s(n,["generationConfig"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig"],Xu(i));const o=s(n,["responseModalities"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig","responseModalities"],o);const r=s(n,["temperature"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig","temperature"],r);const l=s(n,["topP"]);e!==void 0&&l!=null&&a(e,["setup","generationConfig","topP"],l);const u=s(n,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const f=s(n,["maxOutputTokens"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","maxOutputTokens"],f);const c=s(n,["mediaResolution"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","mediaResolution"],c);const d=s(n,["seed"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","seed"],d);const p=s(n,["speechConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","speechConfig"],Jt(p));const h=s(n,["thinkingConfig"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","thinkingConfig"],h);const m=s(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=s(n,["systemInstruction"]);e!==void 0&&g!=null&&a(e,["setup","systemInstruction"],ne(g));const T=s(n,["tools"]);if(e!==void 0&&T!=null){let M=en(T);Array.isArray(M)&&(M=M.map(H=>fc(je(H)))),a(e,["setup","tools"],M)}const E=s(n,["sessionResumption"]);e!==void 0&&E!=null&&a(e,["setup","sessionResumption"],E);const C=s(n,["inputAudioTranscription"]);e!==void 0&&C!=null&&a(e,["setup","inputAudioTranscription"],C);const A=s(n,["outputAudioTranscription"]);e!==void 0&&A!=null&&a(e,["setup","outputAudioTranscription"],A);const _=s(n,["realtimeInputConfig"]);e!==void 0&&_!=null&&a(e,["setup","realtimeInputConfig"],_);const R=s(n,["contextWindowCompression"]);e!==void 0&&R!=null&&a(e,["setup","contextWindowCompression"],R);const D=s(n,["proactivity"]);e!==void 0&&D!=null&&a(e,["setup","proactivity"],D);const S=s(n,["explicitVadSignal"]);return e!==void 0&&S!=null&&a(e,["setup","explicitVadSignal"],S),t}function nc(n,e){const t={},i=s(e,["model"]);i!=null&&a(t,["setup","model"],z(n,i));const o=s(e,["config"]);return o!=null&&a(t,["config"],ju(o,t)),t}function tc(n,e){const t={},i=s(e,["model"]);i!=null&&a(t,["setup","model"],z(n,i));const o=s(e,["config"]);return o!=null&&a(t,["config"],ec(o,t)),t}function ic(n){const e={},t=s(n,["musicGenerationConfig"]);return t!=null&&a(e,["musicGenerationConfig"],t),e}function oc(n){const e={},t=s(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),a(e,["weightedPrompts"],i)}return e}function rc(n){const e={},t=s(n,["media"]);if(t!=null){let c=Hr(t);Array.isArray(c)&&(c=c.map(d=>Pn(d))),a(e,["mediaChunks"],c)}const i=s(n,["audio"]);i!=null&&a(e,["audio"],Pn(qr(i)));const o=s(n,["audioStreamEnd"]);o!=null&&a(e,["audioStreamEnd"],o);const r=s(n,["video"]);r!=null&&a(e,["video"],Pn(Br(r)));const l=s(n,["text"]);l!=null&&a(e,["text"],l);const u=s(n,["activityStart"]);u!=null&&a(e,["activityStart"],u);const f=s(n,["activityEnd"]);return f!=null&&a(e,["activityEnd"],f),e}function sc(n){const e={},t=s(n,["media"]);if(t!=null){let c=Hr(t);Array.isArray(c)&&(c=c.map(d=>d)),a(e,["mediaChunks"],c)}const i=s(n,["audio"]);i!=null&&a(e,["audio"],qr(i));const o=s(n,["audioStreamEnd"]);o!=null&&a(e,["audioStreamEnd"],o);const r=s(n,["video"]);r!=null&&a(e,["video"],Br(r));const l=s(n,["text"]);l!=null&&a(e,["text"],l);const u=s(n,["activityStart"]);u!=null&&a(e,["activityStart"],u);const f=s(n,["activityEnd"]);return f!=null&&a(e,["activityEnd"],f),e}function lc(n){const e={},t=s(n,["setupComplete"]);t!=null&&a(e,["setupComplete"],t);const i=s(n,["serverContent"]);i!=null&&a(e,["serverContent"],i);const o=s(n,["toolCall"]);o!=null&&a(e,["toolCall"],o);const r=s(n,["toolCallCancellation"]);r!=null&&a(e,["toolCallCancellation"],r);const l=s(n,["usageMetadata"]);l!=null&&a(e,["usageMetadata"],dc(l));const u=s(n,["goAway"]);u!=null&&a(e,["goAway"],u);const f=s(n,["sessionResumptionUpdate"]);f!=null&&a(e,["sessionResumptionUpdate"],f);const c=s(n,["voiceActivityDetectionSignal"]);return c!=null&&a(e,["voiceActivityDetectionSignal"],c),e}function ac(n){const e={},t=s(n,["mediaResolution"]);t!=null&&a(e,["mediaResolution"],t);const i=s(n,["codeExecutionResult"]);i!=null&&a(e,["codeExecutionResult"],i);const o=s(n,["executableCode"]);o!=null&&a(e,["executableCode"],o);const r=s(n,["fileData"]);r!=null&&a(e,["fileData"],Wu(r));const l=s(n,["functionCall"]);l!=null&&a(e,["functionCall"],Yu(l));const u=s(n,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const f=s(n,["inlineData"]);f!=null&&a(e,["inlineData"],Pn(f));const c=s(n,["text"]);c!=null&&a(e,["text"],c);const d=s(n,["thought"]);d!=null&&a(e,["thought"],d);const p=s(n,["thoughtSignature"]);p!=null&&a(e,["thoughtSignature"],p);const h=s(n,["videoMetadata"]);return h!=null&&a(e,["videoMetadata"],h),e}function uc(n){const e={},t=s(n,["handle"]);if(t!=null&&a(e,["handle"],t),s(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function cc(n){const e={},t=s(n,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(p=>p)),a(e,["functionDeclarations"],d)}if(s(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(n,["googleSearchRetrieval"]);i!=null&&a(e,["googleSearchRetrieval"],i);const o=s(n,["computerUse"]);o!=null&&a(e,["computerUse"],o);const r=s(n,["fileSearch"]);r!=null&&a(e,["fileSearch"],r);const l=s(n,["codeExecution"]);if(l!=null&&a(e,["codeExecution"],l),s(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=s(n,["googleMaps"]);u!=null&&a(e,["googleMaps"],Qu(u));const f=s(n,["googleSearch"]);f!=null&&a(e,["googleSearch"],Zu(f));const c=s(n,["urlContext"]);return c!=null&&a(e,["urlContext"],c),e}function fc(n){const e={},t=s(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(h=>Ku(h))),a(e,["functionDeclarations"],p)}const i=s(n,["retrieval"]);i!=null&&a(e,["retrieval"],i);const o=s(n,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const r=s(n,["computerUse"]);if(r!=null&&a(e,["computerUse"],r),s(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=s(n,["codeExecution"]);l!=null&&a(e,["codeExecution"],l);const u=s(n,["enterpriseWebSearch"]);u!=null&&a(e,["enterpriseWebSearch"],u);const f=s(n,["googleMaps"]);f!=null&&a(e,["googleMaps"],f);const c=s(n,["googleSearch"]);c!=null&&a(e,["googleSearch"],c);const d=s(n,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}function dc(n){const e={},t=s(n,["promptTokenCount"]);t!=null&&a(e,["promptTokenCount"],t);const i=s(n,["cachedContentTokenCount"]);i!=null&&a(e,["cachedContentTokenCount"],i);const o=s(n,["candidatesTokenCount"]);o!=null&&a(e,["responseTokenCount"],o);const r=s(n,["toolUsePromptTokenCount"]);r!=null&&a(e,["toolUsePromptTokenCount"],r);const l=s(n,["thoughtsTokenCount"]);l!=null&&a(e,["thoughtsTokenCount"],l);const u=s(n,["totalTokenCount"]);u!=null&&a(e,["totalTokenCount"],u);const f=s(n,["promptTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>g)),a(e,["promptTokensDetails"],m)}const c=s(n,["cacheTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>g)),a(e,["cacheTokensDetails"],m)}const d=s(n,["candidatesTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>g)),a(e,["responseTokensDetails"],m)}const p=s(n,["toolUsePromptTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>g)),a(e,["toolUsePromptTokensDetails"],m)}const h=s(n,["trafficType"]);return h!=null&&a(e,["trafficType"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pc(n){const e={},t=s(n,["data"]);if(t!=null&&a(e,["data"],t),s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=s(n,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function hc(n){const e={},t=s(n,["content"]);t!=null&&a(e,["content"],t);const i=s(n,["citationMetadata"]);i!=null&&a(e,["citationMetadata"],mc(i));const o=s(n,["tokenCount"]);o!=null&&a(e,["tokenCount"],o);const r=s(n,["finishReason"]);r!=null&&a(e,["finishReason"],r);const l=s(n,["avgLogprobs"]);l!=null&&a(e,["avgLogprobs"],l);const u=s(n,["groundingMetadata"]);u!=null&&a(e,["groundingMetadata"],u);const f=s(n,["index"]);f!=null&&a(e,["index"],f);const c=s(n,["logprobsResult"]);c!=null&&a(e,["logprobsResult"],c);const d=s(n,["safetyRatings"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(m=>m)),a(e,["safetyRatings"],h)}const p=s(n,["urlContextMetadata"]);return p!=null&&a(e,["urlContextMetadata"],p),e}function mc(n){const e={},t=s(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),a(e,["citations"],i)}return e}function gc(n,e){const t={},i=s(e,["model"]);i!=null&&a(t,["_url","model"],z(n,i));const o=s(e,["contents"]);if(o!=null){let r=de(o);Array.isArray(r)&&(r=r.map(l=>l)),a(t,["contents"],r)}return t}function yc(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const i=s(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),a(e,["tokensInfo"],o)}return e}function vc(n){const e={},t=s(n,["values"]);t!=null&&a(e,["values"],t);const i=s(n,["statistics"]);return i!=null&&a(e,["statistics"],Tc(i)),e}function Tc(n){const e={},t=s(n,["truncated"]);t!=null&&a(e,["truncated"],t);const i=s(n,["token_count"]);return i!=null&&a(e,["tokenCount"],i),e}function qn(n){const e={},t=s(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Pf(r))),a(e,["parts"],o)}const i=s(n,["role"]);return i!=null&&a(e,["role"],i),e}function Ec(n){const e={},t=s(n,["controlType"]);t!=null&&a(e,["controlType"],t);const i=s(n,["enableControlImageComputation"]);return i!=null&&a(e,["computeControl"],i),e}function Cc(n){const e={};if(s(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(s(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(s(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Sc(n,e){const t={},i=s(n,["systemInstruction"]);e!==void 0&&i!=null&&a(e,["systemInstruction"],ne(i));const o=s(n,["tools"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>ts(u))),a(e,["tools"],l)}const r=s(n,["generationConfig"]);return e!==void 0&&r!=null&&a(e,["generationConfig"],hf(r)),t}function _c(n,e){const t={},i=s(e,["model"]);i!=null&&a(t,["_url","model"],z(n,i));const o=s(e,["contents"]);if(o!=null){let l=de(o);Array.isArray(l)&&(l=l.map(u=>qn(u))),a(t,["contents"],l)}const r=s(e,["config"]);return r!=null&&Cc(r),t}function Ic(n,e){const t={},i=s(e,["model"]);i!=null&&a(t,["_url","model"],z(n,i));const o=s(e,["contents"]);if(o!=null){let l=de(o);Array.isArray(l)&&(l=l.map(u=>u)),a(t,["contents"],l)}const r=s(e,["config"]);return r!=null&&Sc(r,t),t}function Ac(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const i=s(n,["totalTokens"]);i!=null&&a(e,["totalTokens"],i);const o=s(n,["cachedContentTokenCount"]);return o!=null&&a(e,["cachedContentTokenCount"],o),e}function wc(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const i=s(n,["totalTokens"]);return i!=null&&a(e,["totalTokens"],i),e}function xc(n,e){const t={},i=s(e,["model"]);return i!=null&&a(t,["_url","name"],z(n,i)),t}function Rc(n,e){const t={},i=s(e,["model"]);return i!=null&&a(t,["_url","name"],z(n,i)),t}function Pc(n){const e={},t=s(n,["sdkHttpResponse"]);return t!=null&&a(e,["sdkHttpResponse"],t),e}function kc(n){const e={},t=s(n,["sdkHttpResponse"]);return t!=null&&a(e,["sdkHttpResponse"],t),e}function Mc(n,e){const t={},i=s(n,["outputGcsUri"]);e!==void 0&&i!=null&&a(e,["parameters","storageUri"],i);const o=s(n,["negativePrompt"]);e!==void 0&&o!=null&&a(e,["parameters","negativePrompt"],o);const r=s(n,["numberOfImages"]);e!==void 0&&r!=null&&a(e,["parameters","sampleCount"],r);const l=s(n,["aspectRatio"]);e!==void 0&&l!=null&&a(e,["parameters","aspectRatio"],l);const u=s(n,["guidanceScale"]);e!==void 0&&u!=null&&a(e,["parameters","guidanceScale"],u);const f=s(n,["seed"]);e!==void 0&&f!=null&&a(e,["parameters","seed"],f);const c=s(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&a(e,["parameters","safetySetting"],c);const d=s(n,["personGeneration"]);e!==void 0&&d!=null&&a(e,["parameters","personGeneration"],d);const p=s(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&a(e,["parameters","includeSafetyAttributes"],p);const h=s(n,["includeRaiReason"]);e!==void 0&&h!=null&&a(e,["parameters","includeRaiReason"],h);const m=s(n,["language"]);e!==void 0&&m!=null&&a(e,["parameters","language"],m);const g=s(n,["outputMimeType"]);e!==void 0&&g!=null&&a(e,["parameters","outputOptions","mimeType"],g);const T=s(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&a(e,["parameters","outputOptions","compressionQuality"],T);const E=s(n,["addWatermark"]);e!==void 0&&E!=null&&a(e,["parameters","addWatermark"],E);const C=s(n,["labels"]);e!==void 0&&C!=null&&a(e,["labels"],C);const A=s(n,["editMode"]);e!==void 0&&A!=null&&a(e,["parameters","editMode"],A);const _=s(n,["baseSteps"]);return e!==void 0&&_!=null&&a(e,["parameters","editConfig","baseSteps"],_),t}function Nc(n,e){const t={},i=s(e,["model"]);i!=null&&a(t,["_url","model"],z(n,i));const o=s(e,["prompt"]);o!=null&&a(t,["instances[0]","prompt"],o);const r=s(e,["referenceImages"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>bf(f))),a(t,["instances[0]","referenceImages"],u)}const l=s(e,["config"]);return l!=null&&Mc(l,t),t}function Dc(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const i=s(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>Jn(r))),a(e,["generatedImages"],o)}return e}function Lc(n,e){const t={},i=s(n,["taskType"]);e!==void 0&&i!=null&&a(e,["requests[]","taskType"],i);const o=s(n,["title"]);e!==void 0&&o!=null&&a(e,["requests[]","title"],o);const r=s(n,["outputDimensionality"]);if(e!==void 0&&r!=null&&a(e,["requests[]","outputDimensionality"],r),s(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(s(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function bc(n,e){const t={},i=s(n,["taskType"]);e!==void 0&&i!=null&&a(e,["instances[]","task_type"],i);const o=s(n,["title"]);e!==void 0&&o!=null&&a(e,["instances[]","title"],o);const r=s(n,["outputDimensionality"]);e!==void 0&&r!=null&&a(e,["parameters","outputDimensionality"],r);const l=s(n,["mimeType"]);e!==void 0&&l!=null&&a(e,["instances[]","mimeType"],l);const u=s(n,["autoTruncate"]);return e!==void 0&&u!=null&&a(e,["parameters","autoTruncate"],u),t}function Uc(n,e){const t={},i=s(e,["model"]);i!=null&&a(t,["_url","model"],z(n,i));const o=s(e,["contents"]);if(o!=null){let u=Ht(n,o);Array.isArray(u)&&(u=u.map(f=>f)),a(t,["requests[]","content"],u)}const r=s(e,["config"]);r!=null&&Lc(r,t);const l=s(e,["model"]);return l!==void 0&&a(t,["requests[]","model"],z(n,l)),t}function Fc(n,e){const t={},i=s(e,["model"]);i!=null&&a(t,["_url","model"],z(n,i));const o=s(e,["contents"]);if(o!=null){let l=Ht(n,o);Array.isArray(l)&&(l=l.map(u=>u)),a(t,["instances[]","content"],l)}const r=s(e,["config"]);return r!=null&&bc(r,t),t}function Vc(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const i=s(n,["embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>l)),a(e,["embeddings"],r)}const o=s(n,["metadata"]);return o!=null&&a(e,["metadata"],o),e}function Gc(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const i=s(n,["predictions[]","embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>vc(l))),a(e,["embeddings"],r)}const o=s(n,["metadata"]);return o!=null&&a(e,["metadata"],o),e}function Hc(n){const e={},t=s(n,["endpoint"]);t!=null&&a(e,["name"],t);const i=s(n,["deployedModelId"]);return i!=null&&a(e,["deployedModelId"],i),e}function Bc(n){const e={};if(s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=s(n,["fileUri"]);t!=null&&a(e,["fileUri"],t);const i=s(n,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function qc(n){const e={},t=s(n,["id"]);t!=null&&a(e,["id"],t);const i=s(n,["args"]);i!=null&&a(e,["args"],i);const o=s(n,["name"]);if(o!=null&&a(e,["name"],o),s(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(s(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Jc(n){const e={},t=s(n,["mode"]);t!=null&&a(e,["mode"],t);const i=s(n,["allowedFunctionNames"]);if(i!=null&&a(e,["allowedFunctionNames"],i),s(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function zc(n){const e={};if(s(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=s(n,["description"]);t!=null&&a(e,["description"],t);const i=s(n,["name"]);i!=null&&a(e,["name"],i);const o=s(n,["parameters"]);o!=null&&a(e,["parameters"],o);const r=s(n,["parametersJsonSchema"]);r!=null&&a(e,["parametersJsonSchema"],r);const l=s(n,["response"]);l!=null&&a(e,["response"],l);const u=s(n,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function Oc(n,e,t){const i={},o=s(e,["systemInstruction"]);t!==void 0&&o!=null&&a(t,["systemInstruction"],qn(ne(o)));const r=s(e,["temperature"]);r!=null&&a(i,["temperature"],r);const l=s(e,["topP"]);l!=null&&a(i,["topP"],l);const u=s(e,["topK"]);u!=null&&a(i,["topK"],u);const f=s(e,["candidateCount"]);f!=null&&a(i,["candidateCount"],f);const c=s(e,["maxOutputTokens"]);c!=null&&a(i,["maxOutputTokens"],c);const d=s(e,["stopSequences"]);d!=null&&a(i,["stopSequences"],d);const p=s(e,["responseLogprobs"]);p!=null&&a(i,["responseLogprobs"],p);const h=s(e,["logprobs"]);h!=null&&a(i,["logprobs"],h);const m=s(e,["presencePenalty"]);m!=null&&a(i,["presencePenalty"],m);const g=s(e,["frequencyPenalty"]);g!=null&&a(i,["frequencyPenalty"],g);const T=s(e,["seed"]);T!=null&&a(i,["seed"],T);const E=s(e,["responseMimeType"]);E!=null&&a(i,["responseMimeType"],E);const C=s(e,["responseSchema"]);C!=null&&a(i,["responseSchema"],Bt(C));const A=s(e,["responseJsonSchema"]);if(A!=null&&a(i,["responseJsonSchema"],A),s(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(s(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=s(e,["safetySettings"]);if(t!==void 0&&_!=null){let U=_;Array.isArray(U)&&(U=U.map(O=>Uf(O))),a(t,["safetySettings"],U)}const R=s(e,["tools"]);if(t!==void 0&&R!=null){let U=en(R);Array.isArray(U)&&(U=U.map(O=>Jf(je(O)))),a(t,["tools"],U)}const D=s(e,["toolConfig"]);if(t!==void 0&&D!=null&&a(t,["toolConfig"],qf(D)),s(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=s(e,["cachedContent"]);t!==void 0&&S!=null&&a(t,["cachedContent"],ke(n,S));const M=s(e,["responseModalities"]);M!=null&&a(i,["responseModalities"],M);const H=s(e,["mediaResolution"]);H!=null&&a(i,["mediaResolution"],H);const P=s(e,["speechConfig"]);if(P!=null&&a(i,["speechConfig"],qt(P)),s(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const b=s(e,["thinkingConfig"]);b!=null&&a(i,["thinkingConfig"],b);const N=s(e,["imageConfig"]);N!=null&&a(i,["imageConfig"],Tf(N));const L=s(e,["enableEnhancedCivicAnswers"]);return L!=null&&a(i,["enableEnhancedCivicAnswers"],L),i}function $c(n,e,t){const i={},o=s(e,["systemInstruction"]);t!==void 0&&o!=null&&a(t,["systemInstruction"],ne(o));const r=s(e,["temperature"]);r!=null&&a(i,["temperature"],r);const l=s(e,["topP"]);l!=null&&a(i,["topP"],l);const u=s(e,["topK"]);u!=null&&a(i,["topK"],u);const f=s(e,["candidateCount"]);f!=null&&a(i,["candidateCount"],f);const c=s(e,["maxOutputTokens"]);c!=null&&a(i,["maxOutputTokens"],c);const d=s(e,["stopSequences"]);d!=null&&a(i,["stopSequences"],d);const p=s(e,["responseLogprobs"]);p!=null&&a(i,["responseLogprobs"],p);const h=s(e,["logprobs"]);h!=null&&a(i,["logprobs"],h);const m=s(e,["presencePenalty"]);m!=null&&a(i,["presencePenalty"],m);const g=s(e,["frequencyPenalty"]);g!=null&&a(i,["frequencyPenalty"],g);const T=s(e,["seed"]);T!=null&&a(i,["seed"],T);const E=s(e,["responseMimeType"]);E!=null&&a(i,["responseMimeType"],E);const C=s(e,["responseSchema"]);C!=null&&a(i,["responseSchema"],Bt(C));const A=s(e,["responseJsonSchema"]);A!=null&&a(i,["responseJsonSchema"],A);const _=s(e,["routingConfig"]);_!=null&&a(i,["routingConfig"],_);const R=s(e,["modelSelectionConfig"]);R!=null&&a(i,["modelConfig"],R);const D=s(e,["safetySettings"]);if(t!==void 0&&D!=null){let Y=D;Array.isArray(Y)&&(Y=Y.map(Q=>Q)),a(t,["safetySettings"],Y)}const S=s(e,["tools"]);if(t!==void 0&&S!=null){let Y=en(S);Array.isArray(Y)&&(Y=Y.map(Q=>ts(je(Q)))),a(t,["tools"],Y)}const M=s(e,["toolConfig"]);t!==void 0&&M!=null&&a(t,["toolConfig"],M);const H=s(e,["labels"]);t!==void 0&&H!=null&&a(t,["labels"],H);const P=s(e,["cachedContent"]);t!==void 0&&P!=null&&a(t,["cachedContent"],ke(n,P));const b=s(e,["responseModalities"]);b!=null&&a(i,["responseModalities"],b);const N=s(e,["mediaResolution"]);N!=null&&a(i,["mediaResolution"],N);const L=s(e,["speechConfig"]);L!=null&&a(i,["speechConfig"],qt(L));const U=s(e,["audioTimestamp"]);U!=null&&a(i,["audioTimestamp"],U);const O=s(e,["thinkingConfig"]);O!=null&&a(i,["thinkingConfig"],O);const q=s(e,["imageConfig"]);if(q!=null&&a(i,["imageConfig"],Ef(q)),s(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function Po(n,e){const t={},i=s(e,["model"]);i!=null&&a(t,["_url","model"],z(n,i));const o=s(e,["contents"]);if(o!=null){let l=de(o);Array.isArray(l)&&(l=l.map(u=>qn(u))),a(t,["contents"],l)}const r=s(e,["config"]);return r!=null&&a(t,["generationConfig"],Oc(n,r,t)),t}function ko(n,e){const t={},i=s(e,["model"]);i!=null&&a(t,["_url","model"],z(n,i));const o=s(e,["contents"]);if(o!=null){let l=de(o);Array.isArray(l)&&(l=l.map(u=>u)),a(t,["contents"],l)}const r=s(e,["config"]);return r!=null&&a(t,["generationConfig"],$c(n,r,t)),t}function Mo(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const i=s(n,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(c=>hc(c))),a(e,["candidates"],f)}const o=s(n,["modelVersion"]);o!=null&&a(e,["modelVersion"],o);const r=s(n,["promptFeedback"]);r!=null&&a(e,["promptFeedback"],r);const l=s(n,["responseId"]);l!=null&&a(e,["responseId"],l);const u=s(n,["usageMetadata"]);return u!=null&&a(e,["usageMetadata"],u),e}function No(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const i=s(n,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>d)),a(e,["candidates"],c)}const o=s(n,["createTime"]);o!=null&&a(e,["createTime"],o);const r=s(n,["modelVersion"]);r!=null&&a(e,["modelVersion"],r);const l=s(n,["promptFeedback"]);l!=null&&a(e,["promptFeedback"],l);const u=s(n,["responseId"]);u!=null&&a(e,["responseId"],u);const f=s(n,["usageMetadata"]);return f!=null&&a(e,["usageMetadata"],f),e}function Wc(n,e){const t={};if(s(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=s(n,["numberOfImages"]);e!==void 0&&i!=null&&a(e,["parameters","sampleCount"],i);const o=s(n,["aspectRatio"]);e!==void 0&&o!=null&&a(e,["parameters","aspectRatio"],o);const r=s(n,["guidanceScale"]);if(e!==void 0&&r!=null&&a(e,["parameters","guidanceScale"],r),s(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=s(n,["safetyFilterLevel"]);e!==void 0&&l!=null&&a(e,["parameters","safetySetting"],l);const u=s(n,["personGeneration"]);e!==void 0&&u!=null&&a(e,["parameters","personGeneration"],u);const f=s(n,["includeSafetyAttributes"]);e!==void 0&&f!=null&&a(e,["parameters","includeSafetyAttributes"],f);const c=s(n,["includeRaiReason"]);e!==void 0&&c!=null&&a(e,["parameters","includeRaiReason"],c);const d=s(n,["language"]);e!==void 0&&d!=null&&a(e,["parameters","language"],d);const p=s(n,["outputMimeType"]);e!==void 0&&p!=null&&a(e,["parameters","outputOptions","mimeType"],p);const h=s(n,["outputCompressionQuality"]);if(e!==void 0&&h!=null&&a(e,["parameters","outputOptions","compressionQuality"],h),s(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(s(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const m=s(n,["imageSize"]);if(e!==void 0&&m!=null&&a(e,["parameters","sampleImageSize"],m),s(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function Yc(n,e){const t={},i=s(n,["outputGcsUri"]);e!==void 0&&i!=null&&a(e,["parameters","storageUri"],i);const o=s(n,["negativePrompt"]);e!==void 0&&o!=null&&a(e,["parameters","negativePrompt"],o);const r=s(n,["numberOfImages"]);e!==void 0&&r!=null&&a(e,["parameters","sampleCount"],r);const l=s(n,["aspectRatio"]);e!==void 0&&l!=null&&a(e,["parameters","aspectRatio"],l);const u=s(n,["guidanceScale"]);e!==void 0&&u!=null&&a(e,["parameters","guidanceScale"],u);const f=s(n,["seed"]);e!==void 0&&f!=null&&a(e,["parameters","seed"],f);const c=s(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&a(e,["parameters","safetySetting"],c);const d=s(n,["personGeneration"]);e!==void 0&&d!=null&&a(e,["parameters","personGeneration"],d);const p=s(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&a(e,["parameters","includeSafetyAttributes"],p);const h=s(n,["includeRaiReason"]);e!==void 0&&h!=null&&a(e,["parameters","includeRaiReason"],h);const m=s(n,["language"]);e!==void 0&&m!=null&&a(e,["parameters","language"],m);const g=s(n,["outputMimeType"]);e!==void 0&&g!=null&&a(e,["parameters","outputOptions","mimeType"],g);const T=s(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&a(e,["parameters","outputOptions","compressionQuality"],T);const E=s(n,["addWatermark"]);e!==void 0&&E!=null&&a(e,["parameters","addWatermark"],E);const C=s(n,["labels"]);e!==void 0&&C!=null&&a(e,["labels"],C);const A=s(n,["imageSize"]);e!==void 0&&A!=null&&a(e,["parameters","sampleImageSize"],A);const _=s(n,["enhancePrompt"]);return e!==void 0&&_!=null&&a(e,["parameters","enhancePrompt"],_),t}function Kc(n,e){const t={},i=s(e,["model"]);i!=null&&a(t,["_url","model"],z(n,i));const o=s(e,["prompt"]);o!=null&&a(t,["instances[0]","prompt"],o);const r=s(e,["config"]);return r!=null&&Wc(r,t),t}function Xc(n,e){const t={},i=s(e,["model"]);i!=null&&a(t,["_url","model"],z(n,i));const o=s(e,["prompt"]);o!=null&&a(t,["instances[0]","prompt"],o);const r=s(e,["config"]);return r!=null&&Yc(r,t),t}function Qc(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const i=s(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>cf(l))),a(e,["generatedImages"],r)}const o=s(n,["positivePromptSafetyAttributes"]);return o!=null&&a(e,["positivePromptSafetyAttributes"],es(o)),e}function Zc(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const i=s(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>Jn(l))),a(e,["generatedImages"],r)}const o=s(n,["positivePromptSafetyAttributes"]);return o!=null&&a(e,["positivePromptSafetyAttributes"],ns(o)),e}function jc(n,e){const t={},i=s(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&a(e,["parameters","sampleCount"],i),s(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=s(n,["durationSeconds"]);if(e!==void 0&&o!=null&&a(e,["parameters","durationSeconds"],o),s(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=s(n,["aspectRatio"]);e!==void 0&&r!=null&&a(e,["parameters","aspectRatio"],r);const l=s(n,["resolution"]);e!==void 0&&l!=null&&a(e,["parameters","resolution"],l);const u=s(n,["personGeneration"]);if(e!==void 0&&u!=null&&a(e,["parameters","personGeneration"],u),s(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=s(n,["negativePrompt"]);e!==void 0&&f!=null&&a(e,["parameters","negativePrompt"],f);const c=s(n,["enhancePrompt"]);if(e!==void 0&&c!=null&&a(e,["parameters","enhancePrompt"],c),s(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const d=s(n,["lastFrame"]);e!==void 0&&d!=null&&a(e,["instances[0]","lastFrame"],zn(d));const p=s(n,["referenceImages"]);if(e!==void 0&&p!=null){let h=p;Array.isArray(h)&&(h=h.map(m=>td(m))),a(e,["instances[0]","referenceImages"],h)}if(s(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(s(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function ef(n,e){const t={},i=s(n,["numberOfVideos"]);e!==void 0&&i!=null&&a(e,["parameters","sampleCount"],i);const o=s(n,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const r=s(n,["fps"]);e!==void 0&&r!=null&&a(e,["parameters","fps"],r);const l=s(n,["durationSeconds"]);e!==void 0&&l!=null&&a(e,["parameters","durationSeconds"],l);const u=s(n,["seed"]);e!==void 0&&u!=null&&a(e,["parameters","seed"],u);const f=s(n,["aspectRatio"]);e!==void 0&&f!=null&&a(e,["parameters","aspectRatio"],f);const c=s(n,["resolution"]);e!==void 0&&c!=null&&a(e,["parameters","resolution"],c);const d=s(n,["personGeneration"]);e!==void 0&&d!=null&&a(e,["parameters","personGeneration"],d);const p=s(n,["pubsubTopic"]);e!==void 0&&p!=null&&a(e,["parameters","pubsubTopic"],p);const h=s(n,["negativePrompt"]);e!==void 0&&h!=null&&a(e,["parameters","negativePrompt"],h);const m=s(n,["enhancePrompt"]);e!==void 0&&m!=null&&a(e,["parameters","enhancePrompt"],m);const g=s(n,["generateAudio"]);e!==void 0&&g!=null&&a(e,["parameters","generateAudio"],g);const T=s(n,["lastFrame"]);e!==void 0&&T!=null&&a(e,["instances[0]","lastFrame"],Ee(T));const E=s(n,["referenceImages"]);if(e!==void 0&&E!=null){let _=E;Array.isArray(_)&&(_=_.map(R=>id(R))),a(e,["instances[0]","referenceImages"],_)}const C=s(n,["mask"]);e!==void 0&&C!=null&&a(e,["instances[0]","mask"],nd(C));const A=s(n,["compressionQuality"]);return e!==void 0&&A!=null&&a(e,["parameters","compressionQuality"],A),t}function nf(n){const e={},t=s(n,["name"]);t!=null&&a(e,["name"],t);const i=s(n,["metadata"]);i!=null&&a(e,["metadata"],i);const o=s(n,["done"]);o!=null&&a(e,["done"],o);const r=s(n,["error"]);r!=null&&a(e,["error"],r);const l=s(n,["response","generateVideoResponse"]);return l!=null&&a(e,["response"],sf(l)),e}function tf(n){const e={},t=s(n,["name"]);t!=null&&a(e,["name"],t);const i=s(n,["metadata"]);i!=null&&a(e,["metadata"],i);const o=s(n,["done"]);o!=null&&a(e,["done"],o);const r=s(n,["error"]);r!=null&&a(e,["error"],r);const l=s(n,["response"]);return l!=null&&a(e,["response"],lf(l)),e}function of(n,e){const t={},i=s(e,["model"]);i!=null&&a(t,["_url","model"],z(n,i));const o=s(e,["prompt"]);o!=null&&a(t,["instances[0]","prompt"],o);const r=s(e,["image"]);r!=null&&a(t,["instances[0]","image"],zn(r));const l=s(e,["video"]);l!=null&&a(t,["instances[0]","video"],is(l));const u=s(e,["source"]);u!=null&&af(u,t);const f=s(e,["config"]);return f!=null&&jc(f,t),t}function rf(n,e){const t={},i=s(e,["model"]);i!=null&&a(t,["_url","model"],z(n,i));const o=s(e,["prompt"]);o!=null&&a(t,["instances[0]","prompt"],o);const r=s(e,["image"]);r!=null&&a(t,["instances[0]","image"],Ee(r));const l=s(e,["video"]);l!=null&&a(t,["instances[0]","video"],os(l));const u=s(e,["source"]);u!=null&&uf(u,t);const f=s(e,["config"]);return f!=null&&ef(f,t),t}function sf(n){const e={},t=s(n,["generatedSamples"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>df(l))),a(e,["generatedVideos"],r)}const i=s(n,["raiMediaFilteredCount"]);i!=null&&a(e,["raiMediaFilteredCount"],i);const o=s(n,["raiMediaFilteredReasons"]);return o!=null&&a(e,["raiMediaFilteredReasons"],o),e}function lf(n){const e={},t=s(n,["videos"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>pf(l))),a(e,["generatedVideos"],r)}const i=s(n,["raiMediaFilteredCount"]);i!=null&&a(e,["raiMediaFilteredCount"],i);const o=s(n,["raiMediaFilteredReasons"]);return o!=null&&a(e,["raiMediaFilteredReasons"],o),e}function af(n,e){const t={},i=s(n,["prompt"]);e!==void 0&&i!=null&&a(e,["instances[0]","prompt"],i);const o=s(n,["image"]);e!==void 0&&o!=null&&a(e,["instances[0]","image"],zn(o));const r=s(n,["video"]);return e!==void 0&&r!=null&&a(e,["instances[0]","video"],is(r)),t}function uf(n,e){const t={},i=s(n,["prompt"]);e!==void 0&&i!=null&&a(e,["instances[0]","prompt"],i);const o=s(n,["image"]);e!==void 0&&o!=null&&a(e,["instances[0]","image"],Ee(o));const r=s(n,["video"]);return e!==void 0&&r!=null&&a(e,["instances[0]","video"],os(r)),t}function cf(n){const e={},t=s(n,["_self"]);t!=null&&a(e,["image"],Cf(t));const i=s(n,["raiFilteredReason"]);i!=null&&a(e,["raiFilteredReason"],i);const o=s(n,["_self"]);return o!=null&&a(e,["safetyAttributes"],es(o)),e}function Jn(n){const e={},t=s(n,["_self"]);t!=null&&a(e,["image"],jr(t));const i=s(n,["raiFilteredReason"]);i!=null&&a(e,["raiFilteredReason"],i);const o=s(n,["_self"]);o!=null&&a(e,["safetyAttributes"],ns(o));const r=s(n,["prompt"]);return r!=null&&a(e,["enhancedPrompt"],r),e}function ff(n){const e={},t=s(n,["_self"]);t!=null&&a(e,["mask"],jr(t));const i=s(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),a(e,["labels"],o)}return e}function df(n){const e={},t=s(n,["video"]);return t!=null&&a(e,["video"],jf(t)),e}function pf(n){const e={},t=s(n,["_self"]);return t!=null&&a(e,["video"],ed(t)),e}function hf(n){const e={},t=s(n,["modelSelectionConfig"]);t!=null&&a(e,["modelConfig"],t);const i=s(n,["responseJsonSchema"]);i!=null&&a(e,["responseJsonSchema"],i);const o=s(n,["audioTimestamp"]);o!=null&&a(e,["audioTimestamp"],o);const r=s(n,["candidateCount"]);r!=null&&a(e,["candidateCount"],r);const l=s(n,["enableAffectiveDialog"]);l!=null&&a(e,["enableAffectiveDialog"],l);const u=s(n,["frequencyPenalty"]);u!=null&&a(e,["frequencyPenalty"],u);const f=s(n,["logprobs"]);f!=null&&a(e,["logprobs"],f);const c=s(n,["maxOutputTokens"]);c!=null&&a(e,["maxOutputTokens"],c);const d=s(n,["mediaResolution"]);d!=null&&a(e,["mediaResolution"],d);const p=s(n,["presencePenalty"]);p!=null&&a(e,["presencePenalty"],p);const h=s(n,["responseLogprobs"]);h!=null&&a(e,["responseLogprobs"],h);const m=s(n,["responseMimeType"]);m!=null&&a(e,["responseMimeType"],m);const g=s(n,["responseModalities"]);g!=null&&a(e,["responseModalities"],g);const T=s(n,["responseSchema"]);T!=null&&a(e,["responseSchema"],T);const E=s(n,["routingConfig"]);E!=null&&a(e,["routingConfig"],E);const C=s(n,["seed"]);C!=null&&a(e,["seed"],C);const A=s(n,["speechConfig"]);A!=null&&a(e,["speechConfig"],A);const _=s(n,["stopSequences"]);_!=null&&a(e,["stopSequences"],_);const R=s(n,["temperature"]);R!=null&&a(e,["temperature"],R);const D=s(n,["thinkingConfig"]);D!=null&&a(e,["thinkingConfig"],D);const S=s(n,["topK"]);S!=null&&a(e,["topK"],S);const M=s(n,["topP"]);if(M!=null&&a(e,["topP"],M),s(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function mf(n,e){const t={},i=s(e,["model"]);return i!=null&&a(t,["_url","name"],z(n,i)),t}function gf(n,e){const t={},i=s(e,["model"]);return i!=null&&a(t,["_url","name"],z(n,i)),t}function yf(n){const e={};if(s(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=s(n,["enableWidget"]);return t!=null&&a(e,["enableWidget"],t),e}function vf(n){const e={};if(s(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(s(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=s(n,["timeRangeFilter"]);return t!=null&&a(e,["timeRangeFilter"],t),e}function Tf(n){const e={},t=s(n,["aspectRatio"]);t!=null&&a(e,["aspectRatio"],t);const i=s(n,["imageSize"]);if(i!=null&&a(e,["imageSize"],i),s(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(s(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Ef(n){const e={},t=s(n,["aspectRatio"]);t!=null&&a(e,["aspectRatio"],t);const i=s(n,["imageSize"]);i!=null&&a(e,["imageSize"],i);const o=s(n,["outputMimeType"]);o!=null&&a(e,["imageOutputOptions","mimeType"],o);const r=s(n,["outputCompressionQuality"]);return r!=null&&a(e,["imageOutputOptions","compressionQuality"],r),e}function Cf(n){const e={},t=s(n,["bytesBase64Encoded"]);t!=null&&a(e,["imageBytes"],Le(t));const i=s(n,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function jr(n){const e={},t=s(n,["gcsUri"]);t!=null&&a(e,["gcsUri"],t);const i=s(n,["bytesBase64Encoded"]);i!=null&&a(e,["imageBytes"],Le(i));const o=s(n,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function zn(n){const e={};if(s(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=s(n,["imageBytes"]);t!=null&&a(e,["bytesBase64Encoded"],Le(t));const i=s(n,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function Ee(n){const e={},t=s(n,["gcsUri"]);t!=null&&a(e,["gcsUri"],t);const i=s(n,["imageBytes"]);i!=null&&a(e,["bytesBase64Encoded"],Le(i));const o=s(n,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Sf(n,e,t){const i={},o=s(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const r=s(e,["pageToken"]);t!==void 0&&r!=null&&a(t,["_query","pageToken"],r);const l=s(e,["filter"]);t!==void 0&&l!=null&&a(t,["_query","filter"],l);const u=s(e,["queryBase"]);return t!==void 0&&u!=null&&a(t,["_url","models_url"],$r(n,u)),i}function _f(n,e,t){const i={},o=s(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const r=s(e,["pageToken"]);t!==void 0&&r!=null&&a(t,["_query","pageToken"],r);const l=s(e,["filter"]);t!==void 0&&l!=null&&a(t,["_query","filter"],l);const u=s(e,["queryBase"]);return t!==void 0&&u!=null&&a(t,["_url","models_url"],$r(n,u)),i}function If(n,e){const t={},i=s(e,["config"]);return i!=null&&Sf(n,i,t),t}function Af(n,e){const t={},i=s(e,["config"]);return i!=null&&_f(n,i,t),t}function wf(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const i=s(n,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const o=s(n,["_self"]);if(o!=null){let r=Wr(o);Array.isArray(r)&&(r=r.map(l=>yt(l))),a(e,["models"],r)}return e}function xf(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const i=s(n,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const o=s(n,["_self"]);if(o!=null){let r=Wr(o);Array.isArray(r)&&(r=r.map(l=>vt(l))),a(e,["models"],r)}return e}function Rf(n){const e={},t=s(n,["maskMode"]);t!=null&&a(e,["maskMode"],t);const i=s(n,["segmentationClasses"]);i!=null&&a(e,["maskClasses"],i);const o=s(n,["maskDilation"]);return o!=null&&a(e,["dilation"],o),e}function yt(n){const e={},t=s(n,["name"]);t!=null&&a(e,["name"],t);const i=s(n,["displayName"]);i!=null&&a(e,["displayName"],i);const o=s(n,["description"]);o!=null&&a(e,["description"],o);const r=s(n,["version"]);r!=null&&a(e,["version"],r);const l=s(n,["_self"]);l!=null&&a(e,["tunedModelInfo"],zf(l));const u=s(n,["inputTokenLimit"]);u!=null&&a(e,["inputTokenLimit"],u);const f=s(n,["outputTokenLimit"]);f!=null&&a(e,["outputTokenLimit"],f);const c=s(n,["supportedGenerationMethods"]);c!=null&&a(e,["supportedActions"],c);const d=s(n,["temperature"]);d!=null&&a(e,["temperature"],d);const p=s(n,["maxTemperature"]);p!=null&&a(e,["maxTemperature"],p);const h=s(n,["topP"]);h!=null&&a(e,["topP"],h);const m=s(n,["topK"]);m!=null&&a(e,["topK"],m);const g=s(n,["thinking"]);return g!=null&&a(e,["thinking"],g),e}function vt(n){const e={},t=s(n,["name"]);t!=null&&a(e,["name"],t);const i=s(n,["displayName"]);i!=null&&a(e,["displayName"],i);const o=s(n,["description"]);o!=null&&a(e,["description"],o);const r=s(n,["versionId"]);r!=null&&a(e,["version"],r);const l=s(n,["deployedModels"]);if(l!=null){let p=l;Array.isArray(p)&&(p=p.map(h=>Hc(h))),a(e,["endpoints"],p)}const u=s(n,["labels"]);u!=null&&a(e,["labels"],u);const f=s(n,["_self"]);f!=null&&a(e,["tunedModelInfo"],Of(f));const c=s(n,["defaultCheckpointId"]);c!=null&&a(e,["defaultCheckpointId"],c);const d=s(n,["checkpoints"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(h=>h)),a(e,["checkpoints"],p)}return e}function Pf(n){const e={},t=s(n,["mediaResolution"]);t!=null&&a(e,["mediaResolution"],t);const i=s(n,["codeExecutionResult"]);i!=null&&a(e,["codeExecutionResult"],i);const o=s(n,["executableCode"]);o!=null&&a(e,["executableCode"],o);const r=s(n,["fileData"]);r!=null&&a(e,["fileData"],Bc(r));const l=s(n,["functionCall"]);l!=null&&a(e,["functionCall"],qc(l));const u=s(n,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const f=s(n,["inlineData"]);f!=null&&a(e,["inlineData"],pc(f));const c=s(n,["text"]);c!=null&&a(e,["text"],c);const d=s(n,["thought"]);d!=null&&a(e,["thought"],d);const p=s(n,["thoughtSignature"]);p!=null&&a(e,["thoughtSignature"],p);const h=s(n,["videoMetadata"]);return h!=null&&a(e,["videoMetadata"],h),e}function kf(n){const e={},t=s(n,["productImage"]);return t!=null&&a(e,["image"],Ee(t)),e}function Mf(n,e){const t={},i=s(n,["numberOfImages"]);e!==void 0&&i!=null&&a(e,["parameters","sampleCount"],i);const o=s(n,["baseSteps"]);e!==void 0&&o!=null&&a(e,["parameters","baseSteps"],o);const r=s(n,["outputGcsUri"]);e!==void 0&&r!=null&&a(e,["parameters","storageUri"],r);const l=s(n,["seed"]);e!==void 0&&l!=null&&a(e,["parameters","seed"],l);const u=s(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&a(e,["parameters","safetySetting"],u);const f=s(n,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const c=s(n,["addWatermark"]);e!==void 0&&c!=null&&a(e,["parameters","addWatermark"],c);const d=s(n,["outputMimeType"]);e!==void 0&&d!=null&&a(e,["parameters","outputOptions","mimeType"],d);const p=s(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&a(e,["parameters","outputOptions","compressionQuality"],p);const h=s(n,["enhancePrompt"]);e!==void 0&&h!=null&&a(e,["parameters","enhancePrompt"],h);const m=s(n,["labels"]);return e!==void 0&&m!=null&&a(e,["labels"],m),t}function Nf(n,e){const t={},i=s(e,["model"]);i!=null&&a(t,["_url","model"],z(n,i));const o=s(e,["source"]);o!=null&&Lf(o,t);const r=s(e,["config"]);return r!=null&&Mf(r,t),t}function Df(n){const e={},t=s(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>Jn(o))),a(e,["generatedImages"],i)}return e}function Lf(n,e){const t={},i=s(n,["prompt"]);e!==void 0&&i!=null&&a(e,["instances[0]","prompt"],i);const o=s(n,["personImage"]);e!==void 0&&o!=null&&a(e,["instances[0]","personImage","image"],Ee(o));const r=s(n,["productImages"]);if(e!==void 0&&r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>kf(u))),a(e,["instances[0]","productImages"],l)}return t}function bf(n){const e={},t=s(n,["referenceImage"]);t!=null&&a(e,["referenceImage"],Ee(t));const i=s(n,["referenceId"]);i!=null&&a(e,["referenceId"],i);const o=s(n,["referenceType"]);o!=null&&a(e,["referenceType"],o);const r=s(n,["maskImageConfig"]);r!=null&&a(e,["maskImageConfig"],Rf(r));const l=s(n,["controlImageConfig"]);l!=null&&a(e,["controlImageConfig"],Ec(l));const u=s(n,["styleImageConfig"]);u!=null&&a(e,["styleImageConfig"],u);const f=s(n,["subjectImageConfig"]);return f!=null&&a(e,["subjectImageConfig"],f),e}function es(n){const e={},t=s(n,["safetyAttributes","categories"]);t!=null&&a(e,["categories"],t);const i=s(n,["safetyAttributes","scores"]);i!=null&&a(e,["scores"],i);const o=s(n,["contentType"]);return o!=null&&a(e,["contentType"],o),e}function ns(n){const e={},t=s(n,["safetyAttributes","categories"]);t!=null&&a(e,["categories"],t);const i=s(n,["safetyAttributes","scores"]);i!=null&&a(e,["scores"],i);const o=s(n,["contentType"]);return o!=null&&a(e,["contentType"],o),e}function Uf(n){const e={},t=s(n,["category"]);if(t!=null&&a(e,["category"],t),s(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=s(n,["threshold"]);return i!=null&&a(e,["threshold"],i),e}function Ff(n){const e={},t=s(n,["image"]);return t!=null&&a(e,["image"],Ee(t)),e}function Vf(n,e){const t={},i=s(n,["mode"]);e!==void 0&&i!=null&&a(e,["parameters","mode"],i);const o=s(n,["maxPredictions"]);e!==void 0&&o!=null&&a(e,["parameters","maxPredictions"],o);const r=s(n,["confidenceThreshold"]);e!==void 0&&r!=null&&a(e,["parameters","confidenceThreshold"],r);const l=s(n,["maskDilation"]);e!==void 0&&l!=null&&a(e,["parameters","maskDilation"],l);const u=s(n,["binaryColorThreshold"]);e!==void 0&&u!=null&&a(e,["parameters","binaryColorThreshold"],u);const f=s(n,["labels"]);return e!==void 0&&f!=null&&a(e,["labels"],f),t}function Gf(n,e){const t={},i=s(e,["model"]);i!=null&&a(t,["_url","model"],z(n,i));const o=s(e,["source"]);o!=null&&Bf(o,t);const r=s(e,["config"]);return r!=null&&Vf(r,t),t}function Hf(n){const e={},t=s(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>ff(o))),a(e,["generatedMasks"],i)}return e}function Bf(n,e){const t={},i=s(n,["prompt"]);e!==void 0&&i!=null&&a(e,["instances[0]","prompt"],i);const o=s(n,["image"]);e!==void 0&&o!=null&&a(e,["instances[0]","image"],Ee(o));const r=s(n,["scribbleImage"]);return e!==void 0&&r!=null&&a(e,["instances[0]","scribble"],Ff(r)),t}function qf(n){const e={},t=s(n,["functionCallingConfig"]);t!=null&&a(e,["functionCallingConfig"],Jc(t));const i=s(n,["retrievalConfig"]);return i!=null&&a(e,["retrievalConfig"],i),e}function Jf(n){const e={},t=s(n,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(p=>p)),a(e,["functionDeclarations"],d)}if(s(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(n,["googleSearchRetrieval"]);i!=null&&a(e,["googleSearchRetrieval"],i);const o=s(n,["computerUse"]);o!=null&&a(e,["computerUse"],o);const r=s(n,["fileSearch"]);r!=null&&a(e,["fileSearch"],r);const l=s(n,["codeExecution"]);if(l!=null&&a(e,["codeExecution"],l),s(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=s(n,["googleMaps"]);u!=null&&a(e,["googleMaps"],yf(u));const f=s(n,["googleSearch"]);f!=null&&a(e,["googleSearch"],vf(f));const c=s(n,["urlContext"]);return c!=null&&a(e,["urlContext"],c),e}function ts(n){const e={},t=s(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(h=>zc(h))),a(e,["functionDeclarations"],p)}const i=s(n,["retrieval"]);i!=null&&a(e,["retrieval"],i);const o=s(n,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const r=s(n,["computerUse"]);if(r!=null&&a(e,["computerUse"],r),s(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=s(n,["codeExecution"]);l!=null&&a(e,["codeExecution"],l);const u=s(n,["enterpriseWebSearch"]);u!=null&&a(e,["enterpriseWebSearch"],u);const f=s(n,["googleMaps"]);f!=null&&a(e,["googleMaps"],f);const c=s(n,["googleSearch"]);c!=null&&a(e,["googleSearch"],c);const d=s(n,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}function zf(n){const e={},t=s(n,["baseModel"]);t!=null&&a(e,["baseModel"],t);const i=s(n,["createTime"]);i!=null&&a(e,["createTime"],i);const o=s(n,["updateTime"]);return o!=null&&a(e,["updateTime"],o),e}function Of(n){const e={},t=s(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&a(e,["baseModel"],t);const i=s(n,["createTime"]);i!=null&&a(e,["createTime"],i);const o=s(n,["updateTime"]);return o!=null&&a(e,["updateTime"],o),e}function $f(n,e){const t={},i=s(n,["displayName"]);e!==void 0&&i!=null&&a(e,["displayName"],i);const o=s(n,["description"]);e!==void 0&&o!=null&&a(e,["description"],o);const r=s(n,["defaultCheckpointId"]);return e!==void 0&&r!=null&&a(e,["defaultCheckpointId"],r),t}function Wf(n,e){const t={},i=s(n,["displayName"]);e!==void 0&&i!=null&&a(e,["displayName"],i);const o=s(n,["description"]);e!==void 0&&o!=null&&a(e,["description"],o);const r=s(n,["defaultCheckpointId"]);return e!==void 0&&r!=null&&a(e,["defaultCheckpointId"],r),t}function Yf(n,e){const t={},i=s(e,["model"]);i!=null&&a(t,["_url","name"],z(n,i));const o=s(e,["config"]);return o!=null&&$f(o,t),t}function Kf(n,e){const t={},i=s(e,["model"]);i!=null&&a(t,["_url","model"],z(n,i));const o=s(e,["config"]);return o!=null&&Wf(o,t),t}function Xf(n,e){const t={},i=s(n,["outputGcsUri"]);e!==void 0&&i!=null&&a(e,["parameters","storageUri"],i);const o=s(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&a(e,["parameters","safetySetting"],o);const r=s(n,["personGeneration"]);e!==void 0&&r!=null&&a(e,["parameters","personGeneration"],r);const l=s(n,["includeRaiReason"]);e!==void 0&&l!=null&&a(e,["parameters","includeRaiReason"],l);const u=s(n,["outputMimeType"]);e!==void 0&&u!=null&&a(e,["parameters","outputOptions","mimeType"],u);const f=s(n,["outputCompressionQuality"]);e!==void 0&&f!=null&&a(e,["parameters","outputOptions","compressionQuality"],f);const c=s(n,["enhanceInputImage"]);e!==void 0&&c!=null&&a(e,["parameters","upscaleConfig","enhanceInputImage"],c);const d=s(n,["imagePreservationFactor"]);e!==void 0&&d!=null&&a(e,["parameters","upscaleConfig","imagePreservationFactor"],d);const p=s(n,["labels"]);e!==void 0&&p!=null&&a(e,["labels"],p);const h=s(n,["numberOfImages"]);e!==void 0&&h!=null&&a(e,["parameters","sampleCount"],h);const m=s(n,["mode"]);return e!==void 0&&m!=null&&a(e,["parameters","mode"],m),t}function Qf(n,e){const t={},i=s(e,["model"]);i!=null&&a(t,["_url","model"],z(n,i));const o=s(e,["image"]);o!=null&&a(t,["instances[0]","image"],Ee(o));const r=s(e,["upscaleFactor"]);r!=null&&a(t,["parameters","upscaleConfig","upscaleFactor"],r);const l=s(e,["config"]);return l!=null&&Xf(l,t),t}function Zf(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const i=s(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>Jn(r))),a(e,["generatedImages"],o)}return e}function jf(n){const e={},t=s(n,["uri"]);t!=null&&a(e,["uri"],t);const i=s(n,["encodedVideo"]);i!=null&&a(e,["videoBytes"],Le(i));const o=s(n,["encoding"]);return o!=null&&a(e,["mimeType"],o),e}function ed(n){const e={},t=s(n,["gcsUri"]);t!=null&&a(e,["uri"],t);const i=s(n,["bytesBase64Encoded"]);i!=null&&a(e,["videoBytes"],Le(i));const o=s(n,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function nd(n){const e={},t=s(n,["image"]);t!=null&&a(e,["_self"],Ee(t));const i=s(n,["maskMode"]);return i!=null&&a(e,["maskMode"],i),e}function td(n){const e={},t=s(n,["image"]);t!=null&&a(e,["image"],zn(t));const i=s(n,["referenceType"]);return i!=null&&a(e,["referenceType"],i),e}function id(n){const e={},t=s(n,["image"]);t!=null&&a(e,["image"],Ee(t));const i=s(n,["referenceType"]);return i!=null&&a(e,["referenceType"],i),e}function is(n){const e={},t=s(n,["uri"]);t!=null&&a(e,["uri"],t);const i=s(n,["videoBytes"]);i!=null&&a(e,["encodedVideo"],Le(i));const o=s(n,["mimeType"]);return o!=null&&a(e,["encoding"],o),e}function os(n){const e={},t=s(n,["uri"]);t!=null&&a(e,["gcsUri"],t);const i=s(n,["videoBytes"]);i!=null&&a(e,["bytesBase64Encoded"],Le(i));const o=s(n,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function od(n,e){const t={},i=s(n,["displayName"]);return e!==void 0&&i!=null&&a(e,["displayName"],i),t}function rd(n){const e={},t=s(n,["config"]);return t!=null&&od(t,e),e}function sd(n,e){const t={},i=s(n,["force"]);return e!==void 0&&i!=null&&a(e,["_query","force"],i),t}function ld(n){const e={},t=s(n,["name"]);t!=null&&a(e,["_url","name"],t);const i=s(n,["config"]);return i!=null&&sd(i,e),e}function ad(n){const e={},t=s(n,["name"]);return t!=null&&a(e,["_url","name"],t),e}function ud(n,e){const t={},i=s(n,["customMetadata"]);if(e!==void 0&&i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>l)),a(e,["customMetadata"],r)}const o=s(n,["chunkingConfig"]);return e!==void 0&&o!=null&&a(e,["chunkingConfig"],o),t}function cd(n){const e={},t=s(n,["name"]);t!=null&&a(e,["name"],t);const i=s(n,["metadata"]);i!=null&&a(e,["metadata"],i);const o=s(n,["done"]);o!=null&&a(e,["done"],o);const r=s(n,["error"]);r!=null&&a(e,["error"],r);const l=s(n,["response"]);return l!=null&&a(e,["response"],dd(l)),e}function fd(n){const e={},t=s(n,["fileSearchStoreName"]);t!=null&&a(e,["_url","file_search_store_name"],t);const i=s(n,["fileName"]);i!=null&&a(e,["fileName"],i);const o=s(n,["config"]);return o!=null&&ud(o,e),e}function dd(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const i=s(n,["parent"]);i!=null&&a(e,["parent"],i);const o=s(n,["documentName"]);return o!=null&&a(e,["documentName"],o),e}function pd(n,e){const t={},i=s(n,["pageSize"]);e!==void 0&&i!=null&&a(e,["_query","pageSize"],i);const o=s(n,["pageToken"]);return e!==void 0&&o!=null&&a(e,["_query","pageToken"],o),t}function hd(n){const e={},t=s(n,["config"]);return t!=null&&pd(t,e),e}function md(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const i=s(n,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const o=s(n,["fileSearchStores"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),a(e,["fileSearchStores"],r)}return e}function rs(n,e){const t={},i=s(n,["mimeType"]);e!==void 0&&i!=null&&a(e,["mimeType"],i);const o=s(n,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const r=s(n,["customMetadata"]);if(e!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),a(e,["customMetadata"],u)}const l=s(n,["chunkingConfig"]);return e!==void 0&&l!=null&&a(e,["chunkingConfig"],l),t}function gd(n){const e={},t=s(n,["fileSearchStoreName"]);t!=null&&a(e,["_url","file_search_store_name"],t);const i=s(n,["config"]);return i!=null&&rs(i,e),e}function yd(n){const e={},t=s(n,["sdkHttpResponse"]);return t!=null&&a(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vd="Content-Type",Td="X-Server-Timeout",Ed="User-Agent",Tt="x-goog-api-client",Cd="1.34.0",Sd=`google-genai-sdk/${Cd}`,_d="v1beta1",Id="v1beta";class Ad{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:_d,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Id,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[l,u]of Object.entries(e.queryParams))o.searchParams.append(l,String(u));let r={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,t,o.toString(),e.abortSignal),this.unaryApiCall(o,r,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[o,r]of Object.entries(t))typeof r=="object"?i[o]=Object.assign(Object.assign({},i[o]),r):r!==void 0&&(i[o]=r);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let r={};return r.body=e.body,r=await this.includeExtraHttpOptionsToRequestInit(r,t,o.toString(),e.abortSignal),this.streamApiCall(o,r,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,o){if(t&&t.timeout||o){const r=new AbortController,l=r.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const u=setTimeout(()=>r.abort(),t.timeout);u&&typeof u.unref=="function"&&u.unref()}o&&o.addEventListener("abort",()=>{r.abort()}),e.signal=l}return t&&t.extraBody!==null&&wd(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await Do(o),new ht(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await Do(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return ve(this,arguments,function*(){var i;const o=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),r=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let l="";const u="data:",f=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:d}=yield V(o.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=r.decode(d,{stream:!0});try{const g=JSON.parse(p);if("error"in g){const T=JSON.parse(JSON.stringify(g.error)),E=T.status,C=T.code,A=`got status: ${E}. ${JSON.stringify(g)}`;if(C>=400&&C<600)throw new Bn({message:A,status:C})}}catch(g){if(g.name==="ApiError")throw g}l+=p;let h=-1,m=0;for(;;){h=-1,m=0;for(const E of f){const C=l.indexOf(E);C!==-1&&(h===-1||C<h)&&(h=C,m=E.length)}if(h===-1)break;const g=l.substring(0,h);l=l.substring(h+m);const T=g.trim();if(T.startsWith(u)){const E=T.substring(u.length).trim();try{const C=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield V(new ht(C))}catch(C){throw new Error(`exception parsing stream chunk ${E}. ${C}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=Sd+" "+this.clientOptions.userAgentExtra;return e[Ed]=t,e[Tt]=t,e[vd]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[o,r]of Object.entries(e.headers))i.append(o,r);e.timeout&&e.timeout>0&&i.append(Td,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const r=this.clientOptions.uploader,l=await r.stat(e);o.sizeBytes=String(l.size);const u=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:l.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=u;const f={file:o},c=this.getFileName(e),d=k("upload/v1beta/files",f._url),p=await this.fetchUploadUrl(d,o.sizeBytes,o.mimeType,c,f,t==null?void 0:t.httpOptions);return r.upload(e,p,this)}async uploadFileToFileSearchStore(e,t,i){var o;const r=this.clientOptions.uploader,l=await r.stat(t),u=String(l.size),f=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:l.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,d=this.getFileName(t),p={};i!=null&&rs(i,p);const h=await this.fetchUploadUrl(c,u,f,d,p,i==null?void 0:i.httpOptions);return r.uploadToFileSearchStore(t,h,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,o,r,l){var u;let f={};l?f=l:f={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const c=await this.request({path:e,body:JSON.stringify(r),httpMethod:"POST",httpOptions:f});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(u=c==null?void 0:c.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function Do(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw t>=400&&t<600?new Bn({message:o,status:t}):new Error(o)}}function wd(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const r=JSON.parse(n.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))t=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(r,l){const u=Object.assign({},r);for(const f in l)if(Object.prototype.hasOwnProperty.call(l,f)){const c=l[f],d=u[f];c&&typeof c=="object"&&!Array.isArray(c)&&d&&typeof d=="object"&&!Array.isArray(d)?u[f]=i(d,c):(d&&c&&typeof d!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof d}, New type: ${typeof c}. Overwriting.`),u[f]=c)}return u}const o=i(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xd="mcp_used/unknown";let Rd=!1;function ss(n){for(const e of n)if(Pd(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Rd}function ls(n){var e;const t=(e=n[Tt])!==null&&e!==void 0?e:"";n[Tt]=(t+` ${xd}`).trimStart()}function Pd(n){return n!==null&&typeof n=="object"&&n instanceof zt}function kd(n){return ve(this,arguments,function*(t,i=100){let o,r=0;for(;r<i;){const l=yield V(t.listTools({cursor:o}));for(const u of l.tools)yield yield V(u),r++;if(!l.nextCursor)break;o=l.nextCursor}})}class zt{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new zt(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;const r={},l=[];for(const d of this.mcpClients)try{for(var u=!0,f=(t=void 0,Te(kd(d))),c;c=await f.next(),e=c.done,!e;u=!0){o=c.value,u=!1;const p=o;l.push(p);const h=p.name;if(r[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);r[h]=d}}catch(p){t={error:p}}finally{try{!u&&!e&&(i=f.return)&&await i.call(f)}finally{if(t)throw t.error}}this.mcpTools=l,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),la(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const l=await o.callTool({name:i.name,arguments:i.args},void 0,r);t.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Md(n,e,t){const i=new jl;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)}class Nd{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),l=bd(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),f=`${o}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${u}`;let c=()=>{};const d=new Promise(_=>{c=_}),p=e.callbacks,h=function(){c({})},m=this.apiClient,g={onopen:h,onmessage:_=>{Md(m,p.onmessage,_)},onerror:(t=p==null?void 0:p.onerror)!==null&&t!==void 0?t:function(_){},onclose:(i=p==null?void 0:p.onclose)!==null&&i!==void 0?i:function(_){}},T=this.webSocketFactory.create(f,Ld(l),g);T.connect(),await d;const A={setup:{model:z(this.apiClient,e.model)}};return T.send(JSON.stringify(A)),new Dd(T,this.apiClient)}}class Dd{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=oc(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=ic(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(We.PLAY)}pause(){this.sendPlaybackControl(We.PAUSE)}stop(){this.sendPlaybackControl(We.STOP)}resetContext(){this.sendPlaybackControl(We.RESET_CONTEXT)}close(){this.conn.close()}}function Ld(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function bd(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ud="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Fd(n,e,t){const i=new Zl;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const r=JSON.parse(o);if(n.isVertexAI()){const l=lc(r);Object.assign(i,l)}else Object.assign(i,r);e(i)}class Vd{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new Nd(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,r,l,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let d;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&ss(e.config.tools)&&ls(p);const h=qd(p);if(this.apiClient.isVertexAI())d=`${f}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,d);else{const P=this.apiClient.getApiKey();let b="BidiGenerateContent",N="key";P!=null&&P.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),b="BidiGenerateContentConstrained",N="access_token"),d=`${f}/ws/google.ai.generativelanguage.${c}.GenerativeService.${b}?${N}=${P}`}let m=()=>{};const g=new Promise(P=>{m=P}),T=e.callbacks,E=function(){var P;(P=T==null?void 0:T.onopen)===null||P===void 0||P.call(T),m({})},C=this.apiClient,A={onopen:E,onmessage:P=>{Fd(C,T.onmessage,P)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(P){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(P){}},_=this.webSocketFactory.create(d,Bd(h),A);_.connect(),await g;let R=z(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&R.startsWith("publishers/")){const P=this.apiClient.getProject(),b=this.apiClient.getLocation();R=`projects/${P}/locations/${b}/`+R}let D={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Dn.AUDIO]}:e.config.responseModalities=[Dn.AUDIO]),!((r=e.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const S=(u=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[],M=[];for(const P of S)if(this.isCallableTool(P)){const b=P;M.push(await b.tool())}else M.push(P);M.length>0&&(e.config.tools=M);const H={model:R,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?D=tc(this.apiClient,H):D=nc(this.apiClient,H),delete D.config,_.send(JSON.stringify(D)),new Hd(_,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Gd={turnComplete:!0};class Hd{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=de(t.turns),e.isVertexAI()||(i=i.map(o=>qn(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const r of i){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error(Ud)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},Gd),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:sc(e)}:t={realtimeInput:rc(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function Bd(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function qd(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Lo=10;function bo(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const l of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Xe(l)){o=!0;break}if(!o)return!0;const r=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function Xe(n){return"callTool"in n&&typeof n.callTool=="function"}function Jd(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Xe(o)))!==null&&i!==void 0?i:!1}function Uo(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,o)=>{if(Xe(i))return;const r=i;r.functionDeclarations&&r.functionDeclarations.length>0&&t.push(o)}),t}function Fo(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zd extends Pe{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,r,l,u;const f=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!Jd(t)||bo(t.config))return await this.generateContentInternal(f);const c=Uo(t);if(c.length>0){const T=c.map(E=>`tools[${E}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${T}.`)}let d,p;const h=de(f.contents),m=(r=(o=(i=f.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:Lo;let g=0;for(;g<m&&(d=await this.generateContentInternal(f),!(!d.functionCalls||d.functionCalls.length===0));){const T=d.candidates[0].content,E=[];for(const C of(u=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[])if(Xe(C)){const _=await C.callTool(d.functionCalls);E.push(..._)}g++,p={role:"user",parts:E},f.contents=de(f.contents),f.contents.push(T),f.contents.push(p),Fo(f.config)&&(h.push(T),h.push(p))}return Fo(f.config)&&(d.automaticFunctionCallingHistory=h),d},this.generateContentStream=async t=>{var i,o,r,l,u;if(this.maybeMoveToResponseJsonSchem(t),bo(t.config)){const p=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(p)}const f=Uo(t);if(f.length>0){const p=f.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(r=(o=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||r===void 0?void 0:r.streamFunctionCallArguments,d=(u=(l=t==null?void 0:t.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(c&&!d)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let r;const l=[];if(i!=null&&i.generatedImages)for(const f of i.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((o=f==null?void 0:f.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?r=f==null?void 0:f.safetyAttributes:l.push(f);let u;return r?u={generatedImages:l,positivePromptSafetyAttributes:r,sdkHttpResponse:i.sdkHttpResponse}:u={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},u}),this.list=async t=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new He(Re.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(l),l)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var i,o,r,l,u,f;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((l=(r=t.source)===null||r===void 0?void 0:r.video)===null||l===void 0)&&l.uri&&(!((f=(u=t.source)===null||u===void 0?void 0:u.video)===null||f===void 0)&&f.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,o;const r=(t=e.config)===null||t===void 0?void 0:t.tools;if(!r)return e;const l=await Promise.all(r.map(async f=>Xe(f)?await f.tool():f)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(u.config.tools=l,e.config&&e.config.tools&&ss(e.config.tools)){const f=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let c=Object.assign({},f);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),ls(c),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return u}async initAfcToolsMap(e){var t,i,o;const r=new Map;for(const l of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Xe(l)){const u=l,f=await u.tool();for(const c of(o=f.functionDeclarations)!==null&&o!==void 0?o:[]){if(!c.name)throw new Error("Function declaration name is required.");if(r.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);r.set(c.name,u)}}return r}async processAfcStream(e){var t,i,o;const r=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:Lo;let l=!1,u=0;const f=await this.initAfcToolsMap(e);return function(c,d,p){return ve(this,arguments,function*(){for(var h,m,g,T,E,C;u<r;){l&&(u++,l=!1);const D=yield V(c.processParamsMaybeAddMcpUsage(p)),S=yield V(c.generateContentStreamInternal(D)),M=[],H=[];try{for(var A=!0,_=(m=void 0,Te(S)),R;R=yield V(_.next()),h=R.done,!h;A=!0){T=R.value,A=!1;const P=T;if(yield yield V(P),P.candidates&&(!((E=P.candidates[0])===null||E===void 0)&&E.content)){H.push(P.candidates[0].content);for(const b of(C=P.candidates[0].content.parts)!==null&&C!==void 0?C:[])if(u<r&&b.functionCall){if(!b.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(b.functionCall.name)){const N=yield V(d.get(b.functionCall.name).callTool([b.functionCall]));M.push(...N)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${b.functionCall.name}`)}}}}catch(P){m={error:P}}finally{try{!A&&!h&&(g=_.return)&&(yield V(g.call(_)))}finally{if(m)throw m.error}}if(M.length>0){l=!0;const P=new an;P.candidates=[{content:{role:"user",parts:M}}],yield yield V(P);const b=[];b.push(...H),b.push({role:"user",parts:M});const N=de(p.contents).concat(b);p.contents=N}else break}})}(this,f,e)}async generateContentInternal(e){var t,i,o,r;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=ko(this.apiClient,e);return u=k("{model}:generateContent",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),l.then(d=>{const p=No(d),h=new an;return Object.assign(h,p),h})}else{const c=Po(this.apiClient,e);return u=k("{model}:generateContent",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),l.then(d=>{const p=Mo(d),h=new an;return Object.assign(h,p),h})}}async generateContentStreamInternal(e){var t,i,o,r;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=ko(this.apiClient,e);return u=k("{model}:streamGenerateContent?alt=sse",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(p){return ve(this,arguments,function*(){var h,m,g,T;try{for(var E=!0,C=Te(p),A;A=yield V(C.next()),h=A.done,!h;E=!0){T=A.value,E=!1;const _=T,R=No(yield V(_.json()));R.sdkHttpResponse={headers:_.headers};const D=new an;Object.assign(D,R),yield yield V(D)}}catch(_){m={error:_}}finally{try{!E&&!h&&(g=C.return)&&(yield V(g.call(C)))}finally{if(m)throw m.error}}})})}else{const c=Po(this.apiClient,e);return u=k("{model}:streamGenerateContent?alt=sse",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),l.then(function(p){return ve(this,arguments,function*(){var h,m,g,T;try{for(var E=!0,C=Te(p),A;A=yield V(C.next()),h=A.done,!h;E=!0){T=A.value,E=!1;const _=T,R=Mo(yield V(_.json()));R.sdkHttpResponse={headers:_.headers};const D=new an;Object.assign(D,R),yield yield V(D)}}catch(_){m={error:_}}finally{try{!E&&!h&&(g=C.return)&&(yield V(g.call(C)))}finally{if(m)throw m.error}}})})}}async embedContent(e){var t,i,o,r;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=Fc(this.apiClient,e);return u=k("{model}:predict",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),l.then(d=>{const p=Gc(d),h=new fo;return Object.assign(h,p),h})}else{const c=Uc(this.apiClient,e);return u=k("{model}:batchEmbedContents",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),l.then(d=>{const p=Vc(d),h=new fo;return Object.assign(h,p),h})}}async generateImagesInternal(e){var t,i,o,r;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=Xc(this.apiClient,e);return u=k("{model}:predict",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),l.then(d=>{const p=Zc(d),h=new po;return Object.assign(h,p),h})}else{const c=Kc(this.apiClient,e);return u=k("{model}:predict",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),l.then(d=>{const p=Qc(d),h=new po;return Object.assign(h,p),h})}}async editImageInternal(e){var t,i;let o,r="",l={};if(this.apiClient.isVertexAI()){const u=Nc(this.apiClient,e);return r=k("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:f.headers},d})),o.then(f=>{const c=Dc(f),d=new Bl;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,r="",l={};if(this.apiClient.isVertexAI()){const u=Qf(this.apiClient,e);return r=k("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:f.headers},d})),o.then(f=>{const c=Zf(f),d=new ql;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let o,r="",l={};if(this.apiClient.isVertexAI()){const u=Nf(this.apiClient,e);return r=k("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const c=Df(f),d=new Jl;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let o,r="",l={};if(this.apiClient.isVertexAI()){const u=Gf(this.apiClient,e);return r=k("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const c=Hf(f),d=new zl;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,r;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=gf(this.apiClient,e);return u=k("{name}",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>vt(d))}else{const c=mf(this.apiClient,e);return u=k("{name}",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),l.then(d=>yt(d))}}async listInternal(e){var t,i,o,r;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=Af(this.apiClient,e);return u=k("{models_url}",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),l.then(d=>{const p=xf(d),h=new ho;return Object.assign(h,p),h})}else{const c=If(this.apiClient,e);return u=k("{models_url}",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),l.then(d=>{const p=wf(d),h=new ho;return Object.assign(h,p),h})}}async update(e){var t,i,o,r;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=Kf(this.apiClient,e);return u=k("{model}",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>vt(d))}else{const c=Yf(this.apiClient,e);return u=k("{name}",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),l.then(d=>yt(d))}}async delete(e){var t,i,o,r;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=Rc(this.apiClient,e);return u=k("{name}",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),l.then(d=>{const p=kc(d),h=new mo;return Object.assign(h,p),h})}else{const c=xc(this.apiClient,e);return u=k("{name}",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),l.then(d=>{const p=Pc(d),h=new mo;return Object.assign(h,p),h})}}async countTokens(e){var t,i,o,r;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=Ic(this.apiClient,e);return u=k("{model}:countTokens",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),l.then(d=>{const p=wc(d),h=new go;return Object.assign(h,p),h})}else{const c=_c(this.apiClient,e);return u=k("{model}:countTokens",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),l.then(d=>{const p=Ac(d),h=new go;return Object.assign(h,p),h})}}async computeTokens(e){var t,i;let o,r="",l={};if(this.apiClient.isVertexAI()){const u=gc(this.apiClient,e);return r=k("{model}:computeTokens",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:f.headers},d})),o.then(f=>{const c=yc(f),d=new Ol;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,o,r;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=rf(this.apiClient,e);return u=k("{model}:predictLongRunning",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l.then(d=>{const p=tf(d),h=new Ln;return Object.assign(h,p),h})}else{const c=of(this.apiClient,e);return u=k("{model}:predictLongRunning",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),l.then(d=>{const p=nf(d),h=new Ln;return Object.assign(h,p),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Od extends Pe{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let r;i&&"httpOptions"in i&&(r=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:r}});return t._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let r;i&&"httpOptions"in i&&(r=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:r}});return t._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,o,r;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=bl(e);return u=k("{operationName}",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),l}else{const c=Ll(e);return u=k("{operationName}",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),l}}async fetchPredictVideosOperationInternal(e){var t,i;let o,r="",l={};if(this.apiClient.isVertexAI()){const u=xl(e);return r=k("{resourceName}:fetchPredictOperation",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $d(n){const e={},t=s(n,["data"]);if(t!=null&&a(e,["data"],t),s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=s(n,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function Wd(n){const e={},t=s(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>tp(r))),a(e,["parts"],o)}const i=s(n,["role"]);return i!=null&&a(e,["role"],i),e}function Yd(n,e,t){const i={},o=s(e,["expireTime"]);t!==void 0&&o!=null&&a(t,["expireTime"],o);const r=s(e,["newSessionExpireTime"]);t!==void 0&&r!=null&&a(t,["newSessionExpireTime"],r);const l=s(e,["uses"]);t!==void 0&&l!=null&&a(t,["uses"],l);const u=s(e,["liveConnectConstraints"]);t!==void 0&&u!=null&&a(t,["bidiGenerateContentSetup"],np(n,u));const f=s(e,["lockAdditionalFields"]);return t!==void 0&&f!=null&&a(t,["fieldMask"],f),i}function Kd(n,e){const t={},i=s(e,["config"]);return i!=null&&a(t,["config"],Yd(n,i,t)),t}function Xd(n){const e={};if(s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=s(n,["fileUri"]);t!=null&&a(e,["fileUri"],t);const i=s(n,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function Qd(n){const e={},t=s(n,["id"]);t!=null&&a(e,["id"],t);const i=s(n,["args"]);i!=null&&a(e,["args"],i);const o=s(n,["name"]);if(o!=null&&a(e,["name"],o),s(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(s(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Zd(n){const e={};if(s(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=s(n,["enableWidget"]);return t!=null&&a(e,["enableWidget"],t),e}function jd(n){const e={};if(s(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(s(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=s(n,["timeRangeFilter"]);return t!=null&&a(e,["timeRangeFilter"],t),e}function ep(n,e){const t={},i=s(n,["generationConfig"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig"],i);const o=s(n,["responseModalities"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig","responseModalities"],o);const r=s(n,["temperature"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig","temperature"],r);const l=s(n,["topP"]);e!==void 0&&l!=null&&a(e,["setup","generationConfig","topP"],l);const u=s(n,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const f=s(n,["maxOutputTokens"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","maxOutputTokens"],f);const c=s(n,["mediaResolution"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","mediaResolution"],c);const d=s(n,["seed"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","seed"],d);const p=s(n,["speechConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","speechConfig"],Jt(p));const h=s(n,["thinkingConfig"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","thinkingConfig"],h);const m=s(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=s(n,["systemInstruction"]);e!==void 0&&g!=null&&a(e,["setup","systemInstruction"],Wd(ne(g)));const T=s(n,["tools"]);if(e!==void 0&&T!=null){let S=en(T);Array.isArray(S)&&(S=S.map(M=>op(je(M)))),a(e,["setup","tools"],S)}const E=s(n,["sessionResumption"]);e!==void 0&&E!=null&&a(e,["setup","sessionResumption"],ip(E));const C=s(n,["inputAudioTranscription"]);e!==void 0&&C!=null&&a(e,["setup","inputAudioTranscription"],C);const A=s(n,["outputAudioTranscription"]);e!==void 0&&A!=null&&a(e,["setup","outputAudioTranscription"],A);const _=s(n,["realtimeInputConfig"]);e!==void 0&&_!=null&&a(e,["setup","realtimeInputConfig"],_);const R=s(n,["contextWindowCompression"]);e!==void 0&&R!=null&&a(e,["setup","contextWindowCompression"],R);const D=s(n,["proactivity"]);if(e!==void 0&&D!=null&&a(e,["setup","proactivity"],D),s(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function np(n,e){const t={},i=s(e,["model"]);i!=null&&a(t,["setup","model"],z(n,i));const o=s(e,["config"]);return o!=null&&a(t,["config"],ep(o,t)),t}function tp(n){const e={},t=s(n,["mediaResolution"]);t!=null&&a(e,["mediaResolution"],t);const i=s(n,["codeExecutionResult"]);i!=null&&a(e,["codeExecutionResult"],i);const o=s(n,["executableCode"]);o!=null&&a(e,["executableCode"],o);const r=s(n,["fileData"]);r!=null&&a(e,["fileData"],Xd(r));const l=s(n,["functionCall"]);l!=null&&a(e,["functionCall"],Qd(l));const u=s(n,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const f=s(n,["inlineData"]);f!=null&&a(e,["inlineData"],$d(f));const c=s(n,["text"]);c!=null&&a(e,["text"],c);const d=s(n,["thought"]);d!=null&&a(e,["thought"],d);const p=s(n,["thoughtSignature"]);p!=null&&a(e,["thoughtSignature"],p);const h=s(n,["videoMetadata"]);return h!=null&&a(e,["videoMetadata"],h),e}function ip(n){const e={},t=s(n,["handle"]);if(t!=null&&a(e,["handle"],t),s(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function op(n){const e={},t=s(n,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(p=>p)),a(e,["functionDeclarations"],d)}if(s(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(n,["googleSearchRetrieval"]);i!=null&&a(e,["googleSearchRetrieval"],i);const o=s(n,["computerUse"]);o!=null&&a(e,["computerUse"],o);const r=s(n,["fileSearch"]);r!=null&&a(e,["fileSearch"],r);const l=s(n,["codeExecution"]);if(l!=null&&a(e,["codeExecution"],l),s(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=s(n,["googleMaps"]);u!=null&&a(e,["googleMaps"],Zd(u));const f=s(n,["googleSearch"]);f!=null&&a(e,["googleSearch"],jd(f));const c=s(n,["urlContext"]);return c!=null&&a(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rp(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(r=>`${t}.${r}`);e.push(...o)}else e.push(t)}return e.join(",")}function sp(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const r=i.setup;typeof r=="object"&&r!==null?(n.bidiGenerateContentSetup=r,t=r):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const r=rp(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)r?n.fieldMask=r:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];o.length>0&&(u=o.map(c=>l.includes(c)?`generationConfig.${c}`:c));const f=[];r&&f.push(r),u.length>0&&f.push(...u),f.length>0?n.fieldMask=f.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class lp extends Pe{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=Kd(this.apiClient,e);r=k("auth_tokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query;const f=sp(u,e.config);return o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ap(n,e){const t={},i=s(n,["force"]);return e!==void 0&&i!=null&&a(e,["_query","force"],i),t}function up(n){const e={},t=s(n,["name"]);t!=null&&a(e,["_url","name"],t);const i=s(n,["config"]);return i!=null&&ap(i,e),e}function cp(n){const e={},t=s(n,["name"]);return t!=null&&a(e,["_url","name"],t),e}function fp(n,e){const t={},i=s(n,["pageSize"]);e!==void 0&&i!=null&&a(e,["_query","pageSize"],i);const o=s(n,["pageToken"]);return e!==void 0&&o!=null&&a(e,["_query","pageToken"],o),t}function dp(n){const e={},t=s(n,["parent"]);t!=null&&a(e,["_url","parent"],t);const i=s(n,["config"]);return i!=null&&fp(i,e),e}function pp(n){const e={},t=s(n,["sdkHttpResponse"]);t!=null&&a(e,["sdkHttpResponse"],t);const i=s(n,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const o=s(n,["documents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),a(e,["documents"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hp extends Pe{constructor(e){super(),this.apiClient=e,this.list=async t=>new He(Re.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=cp(e);return r=k("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async delete(e){var t,i;let o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=up(e);o=k("{name}",l._url),r=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=dp(e);return r=k("{parent}/documents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const c=pp(f),d=new $l;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mp extends Pe{constructor(e,t=new hp(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new He(Re.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=rd(e);return r=k("fileSearchStores",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async get(e){var t,i;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ad(e);return r=k("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async delete(e){var t,i;let o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=ld(e);o=k("{name}",l._url),r=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=hd(e);return r=k("fileSearchStores",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const c=md(f),d=new Wl;return Object.assign(d,c),d})}}async uploadToFileSearchStoreInternal(e){var t,i;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=gd(e);return r=k("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const c=yd(f),d=new Yl;return Object.assign(d,c),d})}}async importFile(e){var t,i;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=fd(e);return r=k("{file_search_store_name}:importFile",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const c=cd(f),d=new Vt;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let as=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return as=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const gp=()=>as();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Et(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Ct=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pe extends Error{}class oe extends pe{constructor(e,t,i,o){super(`${oe.makeMessage(e,t,i)}`),this.status=e,this.headers=o,this.error=t}static makeMessage(e,t,i){const o=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,t,i,o){if(!e||!o)return new On({message:i,cause:Ct(t)});const r=t;return e===400?new cs(e,r,i,o):e===401?new fs(e,r,i,o):e===403?new ds(e,r,i,o):e===404?new ps(e,r,i,o):e===409?new hs(e,r,i,o):e===422?new ms(e,r,i,o):e===429?new gs(e,r,i,o):e>=500?new ys(e,r,i,o):new oe(e,r,i,o)}}class St extends oe{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class On extends oe{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class us extends On{constructor({message:e}={}){super({message:e??"Request timed out."})}}class cs extends oe{}class fs extends oe{}class ds extends oe{}class ps extends oe{}class hs extends oe{}class ms extends oe{}class gs extends oe{}class ys extends oe{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yp=/^[a-z][a-z0-9+.-]*:/i,vp=n=>yp.test(n);let _t=n=>(_t=Array.isArray,_t(n));const Tp=_t;let Ep=Tp;const Vo=Ep;function Cp(n){if(!n)return!0;for(const e in n)return!1;return!0}function Sp(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const _p=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new pe(`${n} must be an integer`);if(e<0)throw new pe(`${n} must be a positive integer`);return e},Ip=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ap=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $e="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wp(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const xp=()=>{var n,e,t,i,o;const r=wp();if(r==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$e,"X-Stainless-OS":Ho(Deno.build.os),"X-Stainless-Arch":Go(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$e,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(r==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$e,"X-Stainless-OS":Ho((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":Go((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const l=Rp();return l?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$e,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${l.browser}`,"X-Stainless-Runtime-Version":l.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$e,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Rp(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const o=i[1]||0,r=i[2]||0,l=i[3]||0;return{browser:e,version:`${o}.${r}.${l}`}}}return null}const Go=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",Ho=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let En;const Pp=()=>En??(En=xp());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kp(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function vs(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function Mp(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return vs({start(){},async pull(t){const{done:i,value:o}=await e.next();i?t.close():t.enqueue(o)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function Ts(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Np(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),o=i.cancel();i.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dp=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Es=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function jn(n,e,t){return Es(),new File(n,e??"unknown_file",t)}function Lp(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const bp=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cs=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",Up=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&Cs(n),Fp=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function Vp(n,e,t){if(Es(),n=await n,Up(n))return n instanceof File?n:jn([await n.arrayBuffer()],n.name);if(Fp(n)){const o=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),jn(await It(o),e,t)}const i=await It(n);if(e||(e=Lp(n)),!(t!=null&&t.type)){const o=i.find(r=>typeof r=="object"&&"type"in r&&r.type);typeof o=="string"&&(t=Object.assign(Object.assign({},t),{type:o}))}return jn(i,e,t)}async function It(n){var e,t,i,o,r;let l=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)l.push(n);else if(Cs(n))l.push(n instanceof Blob?n:await n.arrayBuffer());else if(bp(n))try{for(var u=!0,f=Te(n),c;c=await f.next(),e=c.done,!e;u=!0){o=c.value,u=!1;const d=o;l.push(...await It(d))}}catch(d){t={error:d}}finally{try{!u&&!e&&(i=f.return)&&await i.call(f)}finally{if(t)throw t.error}}else{const d=(r=n==null?void 0:n.constructor)===null||r===void 0?void 0:r.name;throw new Error(`Unexpected data type: ${typeof n}${d?`; constructor: ${d}`:""}${Gp(n)}`)}return l}function Gp(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ss{constructor(e){this._client=e}}Ss._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _s(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Bo=Object.freeze(Object.create(null)),Hp=(n=_s)=>function(t,...i){if(t.length===1)return t[0];let o=!1;const r=[],l=t.reduce((d,p,h)=>{var m,g,T;/[?#]/.test(p)&&(o=!0);const E=i[h];let C=(o?encodeURIComponent:n)(""+E);return h!==i.length&&(E==null||typeof E=="object"&&E.toString===((T=Object.getPrototypeOf((g=Object.getPrototypeOf((m=E.hasOwnProperty)!==null&&m!==void 0?m:Bo))!==null&&g!==void 0?g:Bo))===null||T===void 0?void 0:T.toString))&&(C=E+"",r.push({start:d.length+p.length,length:C.length,error:`Value of type ${Object.prototype.toString.call(E).slice(8,-1)} is not a valid path parameter`})),d+p+(h===i.length?"":C)},""),u=l.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=f.exec(u))!==null;)r.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(r.sort((d,p)=>d.start-p.start),r.length>0){let d=0;const p=r.reduce((h,m)=>{const g=" ".repeat(m.start-d),T="^".repeat(m.length);return d=m.start+m.length,h+g+T},"");throw new pe(`Path parameters result in path with invalid segments:
${r.map(h=>h.error).join(`
`)}
${l}
${p}`)}return l},Cn=Hp(_s);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Is extends Ss{create(e,t){var i;const{api_version:o=this._client.apiVersion}=e,r=Un(e,["api_version"]);if("model"in r&&"agent_config"in r)throw new pe("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in r&&"generation_config"in r)throw new pe("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Cn`/${o}/interactions`,Object.assign(Object.assign({body:r},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:o=this._client.apiVersion}=t??{};return this._client.delete(Cn`/${o}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:o=this._client.apiVersion}=t??{};return this._client.post(Cn`/${o}/interactions/${e}/cancel`,i)}get(e,t={},i){var o;const r=t??{},{api_version:l=this._client.apiVersion}=r,u=Un(r,["api_version"]);return this._client.get(Cn`/${l}/interactions/${e}`,Object.assign(Object.assign({query:u},i),{stream:(o=t==null?void 0:t.stream)!==null&&o!==void 0?o:!1}))}}Is._key=Object.freeze(["interactions"]);class As extends Is{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bp(n){let e=0;for(const o of n)e+=o.length;const t=new Uint8Array(e);let i=0;for(const o of n)t.set(o,i),i+=o.length;return t}let Sn;function Ot(n){let e;return(Sn??(e=new globalThis.TextEncoder,Sn=e.encode.bind(e)))(n)}let _n;function qo(n){let e;return(_n??(e=new globalThis.TextDecoder,_n=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $n{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Ot(e):e;this.buffer=Bp([this.buffer,t]);const i=[];let o;for(;(o=qp(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(qo(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const r=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,l=qo(this.buffer.subarray(0,r));i.push(l),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}$n.NEWLINE_CHARS=new Set([`
`,"\r"]);$n.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function qp(n,e){for(let o=e??0;o<n.length;o++){if(n[o]===10)return{preceding:o,index:o+1,carriage:!1};if(n[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function Jp(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fn={off:0,error:200,warn:300,info:400,debug:500},Jo=(n,e,t)=>{if(n){if(Sp(Fn,n))return n;ie(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Fn))}`)}};function dn(){}function In(n,e,t){return!e||Fn[n]>Fn[t]?dn:e[n].bind(e)}const zp={error:dn,warn:dn,info:dn,debug:dn};let zo=new WeakMap;function ie(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return zp;const o=zo.get(t);if(o&&o[0]===i)return o[1];const r={error:In("error",t,i),warn:In("warn",t,i),info:In("info",t,i),debug:In("debug",t,i)};return zo.set(t,[i,r]),r}const Ve=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ye{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let o=!1;const r=i?ie(i):console;function l(){return ve(this,arguments,function*(){var f,c,d,p;if(o)throw new pe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let h=!1;try{try{for(var m=!0,g=Te(Op(e,t)),T;T=yield V(g.next()),f=T.done,!f;m=!0){p=T.value,m=!1;const E=p;if(!h)if(E.data.startsWith("[DONE]")){h=!0;continue}else try{yield yield V(JSON.parse(E.data))}catch(C){throw r.error("Could not parse message into JSON:",E.data),r.error("From chunk:",E.raw),C}}}catch(E){c={error:E}}finally{try{!m&&!f&&(d=g.return)&&(yield V(d.call(g)))}finally{if(c)throw c.error}}h=!0}catch(E){if(Et(E))return yield V(void 0);throw E}finally{h||t.abort()}})}return new Ye(l,t,i)}static fromReadableStream(e,t,i){let o=!1;function r(){return ve(this,arguments,function*(){var f,c,d,p;const h=new $n,m=Ts(e);try{for(var g=!0,T=Te(m),E;E=yield V(T.next()),f=E.done,!f;g=!0){p=E.value,g=!1;const C=p;for(const A of h.decode(C))yield yield V(A)}}catch(C){c={error:C}}finally{try{!g&&!f&&(d=T.return)&&(yield V(d.call(T)))}finally{if(c)throw c.error}}for(const C of h.flush())yield yield V(C)})}function l(){return ve(this,arguments,function*(){var f,c,d,p;if(o)throw new pe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let h=!1;try{try{for(var m=!0,g=Te(r()),T;T=yield V(g.next()),f=T.done,!f;m=!0){p=T.value,m=!1;const E=p;h||E&&(yield yield V(JSON.parse(E)))}}catch(E){c={error:E}}finally{try{!m&&!f&&(d=g.return)&&(yield V(d.call(g)))}finally{if(c)throw c.error}}h=!0}catch(E){if(Et(E))return yield V(void 0);throw E}finally{h||t.abort()}})}return new Ye(l,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),o=r=>({next:()=>{if(r.length===0){const l=i.next();e.push(l),t.push(l)}return r.shift()}});return[new Ye(()=>o(e),this.controller,this.client),new Ye(()=>o(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return vs({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:r}=await t.next();if(r)return i.close();const l=Ot(JSON.stringify(o)+`
`);i.enqueue(l)}catch(o){i.error(o)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}}function Op(n,e){return ve(this,arguments,function*(){var i,o,r,l;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new pe("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new pe("Attempted to iterate over a response with no body");const u=new Wp,f=new $n,c=Ts(n.body);try{for(var d=!0,p=Te($p(c)),h;h=yield V(p.next()),i=h.done,!i;d=!0){l=h.value,d=!1;const m=l;for(const g of f.decode(m)){const T=u.decode(g);T&&(yield yield V(T))}}}catch(m){o={error:m}}finally{try{!d&&!i&&(r=p.return)&&(yield V(r.call(p)))}finally{if(o)throw o.error}}for(const m of f.flush()){const g=u.decode(m);g&&(yield yield V(g))}})}function $p(n){return ve(this,arguments,function*(){var t,i,o,r;let l=new Uint8Array;try{for(var u=!0,f=Te(n),c;c=yield V(f.next()),t=c.done,!t;u=!0){r=c.value,u=!1;const d=r;if(d==null)continue;const p=d instanceof ArrayBuffer?new Uint8Array(d):typeof d=="string"?Ot(d):d;let h=new Uint8Array(l.length+p.length);h.set(l),h.set(p,l.length),l=h;let m;for(;(m=Jp(l))!==-1;)yield yield V(l.slice(0,m)),l=l.slice(m)}}catch(d){i={error:d}}finally{try{!u&&!t&&(o=f.return)&&(yield V(o.call(f)))}finally{if(i)throw i.error}}l.length>0&&(yield yield V(l))})}class Wp{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,o]=Yp(e,":");return o.startsWith(" ")&&(o=o.substring(1)),t==="event"?this.event=o:t==="data"&&this.data.push(o),null}}function Yp(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Kp(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:o,startTime:r}=e,l=await(async()=>{var u;if(e.options.stream)return ie(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Ye.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const f=t.headers.get("content-type"),c=(u=f==null?void 0:f.split(";")[0])===null||u===void 0?void 0:u.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await t.json():await t.text()})();return ie(n).debug(`[${i}] response parsed`,Ve({retryOfRequestLogID:o,url:t.url,status:t.status,body:l,durationMs:Date.now()-r})),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $t extends Promise{constructor(e,t,i=Kp){super(o=>{o(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new $t(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ws=Symbol("brand.privateNullableHeaders");function*Xp(n){if(!n)return;if(ws in n){const{values:i,nulls:o}=n;yield*i.entries();for(const r of o)yield[r,null];return}let e=!1,t;n instanceof Headers?t=n.entries():Vo(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const r=Vo(i[1])?i[1]:[i[1]];let l=!1;for(const u of r)u!==void 0&&(e&&!l&&(l=!0,yield[o,null]),yield[o,u])}}const un=n=>{const e=new Headers,t=new Set;for(const i of n){const o=new Set;for(const[r,l]of Xp(i)){const u=r.toLowerCase();o.has(u)||(e.delete(r),o.add(u)),l===null?(e.delete(r),t.add(u)):(e.append(r,l),t.delete(u))}}return{[ws]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const et=n=>{var e,t,i,o,r,l;if(typeof globalThis.process<"u")return(i=(t=(e=Cl)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(l=(r=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||r===void 0?void 0:r.call(o,n))===null||l===void 0?void 0:l.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var xs;class Wn{constructor(e){var t,i,o,r,l,u,f,{baseURL:c=et("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:d=(t=et("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:p="v1beta"}=e,h=Un(e,["baseURL","apiKey","apiVersion"]);const m=Object.assign(Object.assign({apiKey:d,apiVersion:p},h),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=m.baseURL,this.timeout=(i=m.timeout)!==null&&i!==void 0?i:Wn.DEFAULT_TIMEOUT,this.logger=(o=m.logger)!==null&&o!==void 0?o:console;const g="warn";this.logLevel=g,this.logLevel=(l=(r=Jo(m.logLevel,"ClientOptions.logLevel",this))!==null&&r!==void 0?r:Jo(et("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:g,this.fetchOptions=m.fetchOptions,this.maxRetries=(u=m.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(f=m.fetch)!==null&&f!==void 0?f:kp(),this.encoder=Dp,this._options=m,this.apiKey=d,this.apiVersion=p,this.clientAdapter=m.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=un([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return un([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return un([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new pe(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${$e}`}defaultIdempotencyKey(){return`stainless-node-retry-${gp()}`}makeStatusError(e,t,i,o){return oe.generate(e,t,i,o)}buildURL(e,t,i){const o=!this.baseURLOverridden()&&i||this.baseURL,r=vp(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return Cp(l)||(t=Object.assign(Object.assign({},l),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(r.search=this.stringifyQuery(t)),r.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:e,path:t},o)))}request(e,t=null){return new $t(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var o,r,l;const u=await e,f=(o=u.maxRetries)!==null&&o!==void 0?o:this.maxRetries;t==null&&(t=f),await this.prepareOptions(u);const{req:c,url:d,timeout:p}=await this.buildRequest(u,{retryCount:f-t});await this.prepareRequest(c,{url:d,options:u});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=i===void 0?"":`, retryOf: ${i}`,g=Date.now();if(ie(this).debug(`[${h}] sending request`,Ve({retryOfRequestLogID:i,method:u.method,url:d,options:u,headers:c.headers})),!((r=u.signal)===null||r===void 0)&&r.aborted)throw new St;const T=new AbortController,E=await this.fetchWithTimeout(d,c,p,T).catch(Ct),C=Date.now();if(E instanceof globalThis.Error){const _=`retrying, ${t} attempts remaining`;if(!((l=u.signal)===null||l===void 0)&&l.aborted)throw new St;const R=Et(E)||/timed? ?out/i.test(String(E)+("cause"in E?String(E.cause):""));if(t)return ie(this).info(`[${h}] connection ${R?"timed out":"failed"} - ${_}`),ie(this).debug(`[${h}] connection ${R?"timed out":"failed"} (${_})`,Ve({retryOfRequestLogID:i,url:d,durationMs:C-g,message:E.message})),this.retryRequest(u,t,i??h);throw ie(this).info(`[${h}] connection ${R?"timed out":"failed"} - error; no more retries left`),ie(this).debug(`[${h}] connection ${R?"timed out":"failed"} (error; no more retries left)`,Ve({retryOfRequestLogID:i,url:d,durationMs:C-g,message:E.message})),R?new us:new On({cause:E})}const A=`[${h}${m}] ${c.method} ${d} ${E.ok?"succeeded":"failed"} with status ${E.status} in ${C-g}ms`;if(!E.ok){const _=await this.shouldRetry(E);if(t&&_){const P=`retrying, ${t} attempts remaining`;return await Np(E.body),ie(this).info(`${A} - ${P}`),ie(this).debug(`[${h}] response error (${P})`,Ve({retryOfRequestLogID:i,url:E.url,status:E.status,headers:E.headers,durationMs:C-g})),this.retryRequest(u,t,i??h,E.headers)}const R=_?"error; no more retries left":"error; not retryable";ie(this).info(`${A} - ${R}`);const D=await E.text().catch(P=>Ct(P).message),S=Ip(D),M=S?void 0:D;throw ie(this).debug(`[${h}] response error (${R})`,Ve({retryOfRequestLogID:i,url:E.url,status:E.status,headers:E.headers,message:M,durationMs:Date.now()-g})),this.makeStatusError(E.status,S,M,E.headers)}return ie(this).info(A),ie(this).debug(`[${h}] response start`,Ve({retryOfRequestLogID:i,url:E.url,status:E.status,headers:E.headers,durationMs:C-g})),{response:E,options:u,controller:T,requestLogID:h,retryOfRequestLogID:i,startTime:g}}async fetchWithTimeout(e,t,i,o){const r=t||{},{signal:l,method:u}=r,f=Un(r,["signal","method"]);l&&l.addEventListener("abort",()=>o.abort());const c=setTimeout(()=>o.abort(),i),d=globalThis.ReadableStream&&f.body instanceof globalThis.ReadableStream||typeof f.body=="object"&&f.body!==null&&Symbol.asyncIterator in f.body,p=Object.assign(Object.assign(Object.assign({signal:o.signal},d?{duplex:"half"}:{}),{method:"GET"}),f);u&&(p.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,p)}finally{clearTimeout(c)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,o){var r;let l;const u=o==null?void 0:o.get("retry-after-ms");if(u){const c=parseFloat(u);Number.isNaN(c)||(l=c)}const f=o==null?void 0:o.get("retry-after");if(f&&!l){const c=parseFloat(f);Number.isNaN(c)?l=Date.parse(f)-Date.now():l=c*1e3}if(!(l&&0<=l&&l<60*1e3)){const c=(r=e.maxRetries)!==null&&r!==void 0?r:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(t,c)}return await Ap(l),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const r=t-e,l=Math.min(.5*Math.pow(2,r),8),u=1-Math.random()*.25;return l*u*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,o,r;const l=Object.assign({},e),{method:u,path:f,query:c,defaultBaseURL:d}=l,p=this.buildURL(f,c,d);"timeout"in l&&_p("timeout",l.timeout),l.timeout=(i=l.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:h,body:m}=this.buildBody({options:l}),g=await this.buildHeaders({options:e,method:u,bodyHeaders:h,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:g},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"}),m&&{body:m}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(r=l.fetchOptions)!==null&&r!==void 0?r:{}),url:p,timeout:l.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:o}){let r={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),r[this.idempotencyHeader]=e.idempotencyKey);const l=await this.authHeaders(e);let u=un([r,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Pp()),this._options.defaultHeaders,i,e.headers,l]);return this.validateHeaders(u),u.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=un([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Mp(e)}:this.encoder({body:e,headers:i})}}Wn.DEFAULT_TIMEOUT=6e4;class j extends Wn{constructor(){super(...arguments),this.interactions=new As(this)}}xs=j;j.GeminiNextGenAPIClient=xs;j.GeminiNextGenAPIClientError=pe;j.APIError=oe;j.APIConnectionError=On;j.APIConnectionTimeoutError=us;j.APIUserAbortError=St;j.NotFoundError=ps;j.ConflictError=hs;j.RateLimitError=gs;j.BadRequestError=cs;j.AuthenticationError=fs;j.InternalServerError=ys;j.PermissionDeniedError=ds;j.UnprocessableEntityError=ms;j.toFile=Vp;j.Interactions=As;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qp(n,e){const t={},i=s(n,["name"]);return i!=null&&a(t,["_url","name"],i),t}function Zp(n,e){const t={},i=s(n,["name"]);return i!=null&&a(t,["_url","name"],i),t}function jp(n,e){const t={},i=s(n,["sdkHttpResponse"]);return i!=null&&a(t,["sdkHttpResponse"],i),t}function eh(n,e){const t={},i=s(n,["sdkHttpResponse"]);return i!=null&&a(t,["sdkHttpResponse"],i),t}function nh(n,e,t){const i={};if(s(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=s(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&a(e,["displayName"],o),s(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=s(n,["epochCount"]);e!==void 0&&r!=null&&a(e,["tuningTask","hyperparameters","epochCount"],r);const l=s(n,["learningRateMultiplier"]);if(l!=null&&a(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),s(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(s(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(s(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=s(n,["batchSize"]);e!==void 0&&u!=null&&a(e,["tuningTask","hyperparameters","batchSize"],u);const f=s(n,["learningRate"]);if(e!==void 0&&f!=null&&a(e,["tuningTask","hyperparameters","learningRate"],f),s(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(s(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function th(n,e,t){const i={};let o=s(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const m=s(n,["validationDataset"]);e!==void 0&&m!=null&&a(e,["supervisedTuningSpec"],Oo(m))}else if(o==="PREFERENCE_TUNING"){const m=s(n,["validationDataset"]);e!==void 0&&m!=null&&a(e,["preferenceOptimizationSpec"],Oo(m))}const r=s(n,["tunedModelDisplayName"]);e!==void 0&&r!=null&&a(e,["tunedModelDisplayName"],r);const l=s(n,["description"]);e!==void 0&&l!=null&&a(e,["description"],l);let u=s(t,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const m=s(n,["epochCount"]);e!==void 0&&m!=null&&a(e,["supervisedTuningSpec","hyperParameters","epochCount"],m)}else if(u==="PREFERENCE_TUNING"){const m=s(n,["epochCount"]);e!==void 0&&m!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],m)}let f=s(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const m=s(n,["learningRateMultiplier"]);e!==void 0&&m!=null&&a(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],m)}else if(f==="PREFERENCE_TUNING"){const m=s(n,["learningRateMultiplier"]);e!==void 0&&m!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],m)}let c=s(t,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const m=s(n,["exportLastCheckpointOnly"]);e!==void 0&&m!=null&&a(e,["supervisedTuningSpec","exportLastCheckpointOnly"],m)}else if(c==="PREFERENCE_TUNING"){const m=s(n,["exportLastCheckpointOnly"]);e!==void 0&&m!=null&&a(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],m)}let d=s(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const m=s(n,["adapterSize"]);e!==void 0&&m!=null&&a(e,["supervisedTuningSpec","hyperParameters","adapterSize"],m)}else if(d==="PREFERENCE_TUNING"){const m=s(n,["adapterSize"]);e!==void 0&&m!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],m)}if(s(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(s(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=s(n,["labels"]);e!==void 0&&p!=null&&a(e,["labels"],p);const h=s(n,["beta"]);return e!==void 0&&h!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","beta"],h),i}function ih(n,e){const t={},i=s(n,["baseModel"]);i!=null&&a(t,["baseModel"],i);const o=s(n,["preTunedModel"]);o!=null&&a(t,["preTunedModel"],o);const r=s(n,["trainingDataset"]);r!=null&&hh(r);const l=s(n,["config"]);return l!=null&&nh(l,t),t}function oh(n,e){const t={},i=s(n,["baseModel"]);i!=null&&a(t,["baseModel"],i);const o=s(n,["preTunedModel"]);o!=null&&a(t,["preTunedModel"],o);const r=s(n,["trainingDataset"]);r!=null&&mh(r,t,e);const l=s(n,["config"]);return l!=null&&th(l,t,e),t}function rh(n,e){const t={},i=s(n,["name"]);return i!=null&&a(t,["_url","name"],i),t}function sh(n,e){const t={},i=s(n,["name"]);return i!=null&&a(t,["_url","name"],i),t}function lh(n,e,t){const i={},o=s(n,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=s(n,["pageToken"]);e!==void 0&&r!=null&&a(e,["_query","pageToken"],r);const l=s(n,["filter"]);return e!==void 0&&l!=null&&a(e,["_query","filter"],l),i}function ah(n,e,t){const i={},o=s(n,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=s(n,["pageToken"]);e!==void 0&&r!=null&&a(e,["_query","pageToken"],r);const l=s(n,["filter"]);return e!==void 0&&l!=null&&a(e,["_query","filter"],l),i}function uh(n,e){const t={},i=s(n,["config"]);return i!=null&&lh(i,t),t}function ch(n,e){const t={},i=s(n,["config"]);return i!=null&&ah(i,t),t}function fh(n,e){const t={},i=s(n,["sdkHttpResponse"]);i!=null&&a(t,["sdkHttpResponse"],i);const o=s(n,["nextPageToken"]);o!=null&&a(t,["nextPageToken"],o);const r=s(n,["tunedModels"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Rs(u))),a(t,["tuningJobs"],l)}return t}function dh(n,e){const t={},i=s(n,["sdkHttpResponse"]);i!=null&&a(t,["sdkHttpResponse"],i);const o=s(n,["nextPageToken"]);o!=null&&a(t,["nextPageToken"],o);const r=s(n,["tuningJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>At(u))),a(t,["tuningJobs"],l)}return t}function ph(n,e){const t={},i=s(n,["name"]);i!=null&&a(t,["model"],i);const o=s(n,["name"]);return o!=null&&a(t,["endpoint"],o),t}function hh(n,e){const t={};if(s(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(s(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=s(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),a(t,["examples","examples"],o)}return t}function mh(n,e,t){const i={};let o=s(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const l=s(n,["gcsUri"]);e!==void 0&&l!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(o==="PREFERENCE_TUNING"){const l=s(n,["gcsUri"]);e!==void 0&&l!=null&&a(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let r=s(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const l=s(n,["vertexDatasetResource"]);e!==void 0&&l!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(r==="PREFERENCE_TUNING"){const l=s(n,["vertexDatasetResource"]);e!==void 0&&l!=null&&a(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(s(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function Rs(n,e){const t={},i=s(n,["sdkHttpResponse"]);i!=null&&a(t,["sdkHttpResponse"],i);const o=s(n,["name"]);o!=null&&a(t,["name"],o);const r=s(n,["state"]);r!=null&&a(t,["state"],zr(r));const l=s(n,["createTime"]);l!=null&&a(t,["createTime"],l);const u=s(n,["tuningTask","startTime"]);u!=null&&a(t,["startTime"],u);const f=s(n,["tuningTask","completeTime"]);f!=null&&a(t,["endTime"],f);const c=s(n,["updateTime"]);c!=null&&a(t,["updateTime"],c);const d=s(n,["description"]);d!=null&&a(t,["description"],d);const p=s(n,["baseModel"]);p!=null&&a(t,["baseModel"],p);const h=s(n,["_self"]);return h!=null&&a(t,["tunedModel"],ph(h)),t}function At(n,e){const t={},i=s(n,["sdkHttpResponse"]);i!=null&&a(t,["sdkHttpResponse"],i);const o=s(n,["name"]);o!=null&&a(t,["name"],o);const r=s(n,["state"]);r!=null&&a(t,["state"],zr(r));const l=s(n,["createTime"]);l!=null&&a(t,["createTime"],l);const u=s(n,["startTime"]);u!=null&&a(t,["startTime"],u);const f=s(n,["endTime"]);f!=null&&a(t,["endTime"],f);const c=s(n,["updateTime"]);c!=null&&a(t,["updateTime"],c);const d=s(n,["error"]);d!=null&&a(t,["error"],d);const p=s(n,["description"]);p!=null&&a(t,["description"],p);const h=s(n,["baseModel"]);h!=null&&a(t,["baseModel"],h);const m=s(n,["tunedModel"]);m!=null&&a(t,["tunedModel"],m);const g=s(n,["preTunedModel"]);g!=null&&a(t,["preTunedModel"],g);const T=s(n,["supervisedTuningSpec"]);T!=null&&a(t,["supervisedTuningSpec"],T);const E=s(n,["preferenceOptimizationSpec"]);E!=null&&a(t,["preferenceOptimizationSpec"],E);const C=s(n,["tuningDataStats"]);C!=null&&a(t,["tuningDataStats"],C);const A=s(n,["encryptionSpec"]);A!=null&&a(t,["encryptionSpec"],A);const _=s(n,["partnerModelTuningSpec"]);_!=null&&a(t,["partnerModelTuningSpec"],_);const R=s(n,["customBaseModel"]);R!=null&&a(t,["customBaseModel"],R);const D=s(n,["experiment"]);D!=null&&a(t,["experiment"],D);const S=s(n,["labels"]);S!=null&&a(t,["labels"],S);const M=s(n,["outputUri"]);M!=null&&a(t,["outputUri"],M);const H=s(n,["pipelineJob"]);H!=null&&a(t,["pipelineJob"],H);const P=s(n,["serviceAccount"]);P!=null&&a(t,["serviceAccount"],P);const b=s(n,["tunedModelDisplayName"]);b!=null&&a(t,["tunedModelDisplayName"],b);const N=s(n,["veoTuningSpec"]);return N!=null&&a(t,["veoTuningSpec"],N),t}function gh(n,e){const t={},i=s(n,["sdkHttpResponse"]);i!=null&&a(t,["sdkHttpResponse"],i);const o=s(n,["name"]);o!=null&&a(t,["name"],o);const r=s(n,["metadata"]);r!=null&&a(t,["metadata"],r);const l=s(n,["done"]);l!=null&&a(t,["done"],l);const u=s(n,["error"]);return u!=null&&a(t,["error"],u),t}function Oo(n,e){const t={},i=s(n,["gcsUri"]);i!=null&&a(t,["validationDatasetUri"],i);const o=s(n,["vertexDatasetResource"]);return o!=null&&a(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yh extends Pe{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new He(Re.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const r=Object.assign(Object.assign({},t),{preTunedModel:o});return r.baseModel=void 0,await this.tuneInternal(r)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),r=await this.tuneMldevInternal(o);let l="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?l=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(l=r.name.split("/operations/")[0]),{name:l,state:pt.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,r;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=sh(e);return u=k("{name}",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),l.then(d=>At(d))}else{const c=rh(e);return u=k("{name}",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),l.then(d=>Rs(d))}}async listInternal(e){var t,i,o,r;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=ch(e);return u=k("tuningJobs",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),l.then(d=>{const p=dh(d),h=new yo;return Object.assign(h,p),h})}else{const c=uh(e);return u=k("tunedModels",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),l.then(d=>{const p=fh(d),h=new yo;return Object.assign(h,p),h})}}async cancel(e){var t,i,o,r;let l,u="",f={};if(this.apiClient.isVertexAI()){const c=Zp(e);return u=k("{name}:cancel",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),l.then(d=>{const p=eh(d),h=new vo;return Object.assign(h,p),h})}else{const c=Qp(e);return u=k("{name}:cancel",c._url),f=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:d.headers},h})),l.then(d=>{const p=jp(d),h=new vo;return Object.assign(h,p),h})}}async tuneInternal(e){var t,i;let o,r="",l={};if(this.apiClient.isVertexAI()){const u=oh(e,e);return r=k("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:f.headers},d})),o.then(f=>At(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ih(e);return r=k("tunedModels",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:f.headers},d})),o.then(f=>gh(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vh{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Th=1024*1024*8,Eh=3,Ch=1e3,Sh=2,Vn="x-goog-upload-status";async function _h(n,e,t){var i;const o=await Ps(n,e,t),r=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Vn])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return r.file}async function Ih(n,e,t){var i;const o=await Ps(n,e,t),r=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Vn])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=Vr(r),u=new Gt;return Object.assign(u,l),u}async function Ps(n,e,t){var i,o;let r=0,l=0,u=new ht(new Response),f="upload";for(r=n.size;l<r;){const c=Math.min(Th,r-l),d=n.slice(l,l+c);l+c>=r&&(f+=", finalize");let p=0,h=Ch;for(;p<Eh&&(u=await t.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(l),"Content-Length":String(c)}}}),!(!((i=u==null?void 0:u.headers)===null||i===void 0)&&i[Vn]));)p++,await wh(h),h=h*Sh;if(l+=c,((o=u==null?void 0:u.headers)===null||o===void 0?void 0:o[Vn])!=="active")break;if(r<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function Ah(n){return{size:n.size,type:n.type}}function wh(n){return new Promise(e=>setTimeout(e,n))}class xh{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await _h(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Ih(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Ah(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rh{create(e,t,i){return new Ph(e,t,i)}}class Ph{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $o="x-goog-api-key";class kh{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get($o)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append($o,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Mh="gl-node/";class ET{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new j({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=Al(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const o=new kh(this.apiKey);this.apiClient=new Ad({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Mh+"web",uploader:new xh,downloader:new vh}),this.models=new zd(this.apiClient),this.live=new Vd(this.apiClient,o,new Rh),this.batches=new eu(this.apiClient),this.chats=new bu(this.models,this.apiClient),this.caches=new Nu(this.apiClient),this.files=new Ou(this.apiClient),this.operations=new Od(this.apiClient),this.authTokens=new lp(this.apiClient),this.tunings=new yh(this.apiClient),this.fileSearchStores=new mp(this.apiClient)}}function Nh(n,e){const t={};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const Dh=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Lh=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,bh={};function Wo(n,e){return(bh.jsx?Lh:Dh).test(n)}const Uh=/[ \t\n\f\r]/g;function Fh(n){return typeof n=="object"?n.type==="text"?Yo(n.value):!1:Yo(n)}function Yo(n){return n.replace(Uh,"")===""}class yn{constructor(e,t,i){this.normal=t,this.property=e,i&&(this.space=i)}}yn.prototype.normal={};yn.prototype.property={};yn.prototype.space=void 0;function ks(n,e){const t={},i={};for(const o of n)Object.assign(t,o.property),Object.assign(i,o.normal);return new yn(t,i,e)}function wt(n){return n.toLowerCase()}class le{constructor(e,t){this.attribute=t,this.property=e}}le.prototype.attribute="";le.prototype.booleanish=!1;le.prototype.boolean=!1;le.prototype.commaOrSpaceSeparated=!1;le.prototype.commaSeparated=!1;le.prototype.defined=!1;le.prototype.mustUseProperty=!1;le.prototype.number=!1;le.prototype.overloadedBoolean=!1;le.prototype.property="";le.prototype.spaceSeparated=!1;le.prototype.space=void 0;let Vh=0;const B=Be(),Z=Be(),xt=Be(),w=Be(),K=Be(),Qe=Be(),ue=Be();function Be(){return 2**++Vh}const Rt=Object.freeze(Object.defineProperty({__proto__:null,boolean:B,booleanish:Z,commaOrSpaceSeparated:ue,commaSeparated:Qe,number:w,overloadedBoolean:xt,spaceSeparated:K},Symbol.toStringTag,{value:"Module"})),nt=Object.keys(Rt);class Wt extends le{constructor(e,t,i,o){let r=-1;if(super(e,t),Ko(this,"space",o),typeof i=="number")for(;++r<nt.length;){const l=nt[r];Ko(this,nt[r],(i&Rt[l])===Rt[l])}}}Wt.prototype.defined=!0;function Ko(n,e,t){t&&(n[e]=t)}function tn(n){const e={},t={};for(const[i,o]of Object.entries(n.properties)){const r=new Wt(i,n.transform(n.attributes||{},i),o,n.space);n.mustUseProperty&&n.mustUseProperty.includes(i)&&(r.mustUseProperty=!0),e[i]=r,t[wt(i)]=i,t[wt(r.attribute)]=i}return new yn(e,t,n.space)}const Ms=tn({properties:{ariaActiveDescendant:null,ariaAtomic:Z,ariaAutoComplete:null,ariaBusy:Z,ariaChecked:Z,ariaColCount:w,ariaColIndex:w,ariaColSpan:w,ariaControls:K,ariaCurrent:null,ariaDescribedBy:K,ariaDetails:null,ariaDisabled:Z,ariaDropEffect:K,ariaErrorMessage:null,ariaExpanded:Z,ariaFlowTo:K,ariaGrabbed:Z,ariaHasPopup:null,ariaHidden:Z,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:K,ariaLevel:w,ariaLive:null,ariaModal:Z,ariaMultiLine:Z,ariaMultiSelectable:Z,ariaOrientation:null,ariaOwns:K,ariaPlaceholder:null,ariaPosInSet:w,ariaPressed:Z,ariaReadOnly:Z,ariaRelevant:null,ariaRequired:Z,ariaRoleDescription:K,ariaRowCount:w,ariaRowIndex:w,ariaRowSpan:w,ariaSelected:Z,ariaSetSize:w,ariaSort:null,ariaValueMax:w,ariaValueMin:w,ariaValueNow:w,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Ns(n,e){return e in n?n[e]:e}function Ds(n,e){return Ns(n,e.toLowerCase())}const Gh=tn({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Qe,acceptCharset:K,accessKey:K,action:null,allow:null,allowFullScreen:B,allowPaymentRequest:B,allowUserMedia:B,alt:null,as:null,async:B,autoCapitalize:null,autoComplete:K,autoFocus:B,autoPlay:B,blocking:K,capture:null,charSet:null,checked:B,cite:null,className:K,cols:w,colSpan:null,content:null,contentEditable:Z,controls:B,controlsList:K,coords:w|Qe,crossOrigin:null,data:null,dateTime:null,decoding:null,default:B,defer:B,dir:null,dirName:null,disabled:B,download:xt,draggable:Z,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:B,formTarget:null,headers:K,height:w,hidden:xt,high:w,href:null,hrefLang:null,htmlFor:K,httpEquiv:K,id:null,imageSizes:null,imageSrcSet:null,inert:B,inputMode:null,integrity:null,is:null,isMap:B,itemId:null,itemProp:K,itemRef:K,itemScope:B,itemType:K,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:B,low:w,manifest:null,max:null,maxLength:w,media:null,method:null,min:null,minLength:w,multiple:B,muted:B,name:null,nonce:null,noModule:B,noValidate:B,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:B,optimum:w,pattern:null,ping:K,placeholder:null,playsInline:B,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:B,referrerPolicy:null,rel:K,required:B,reversed:B,rows:w,rowSpan:w,sandbox:K,scope:null,scoped:B,seamless:B,selected:B,shadowRootClonable:B,shadowRootDelegatesFocus:B,shadowRootMode:null,shape:null,size:w,sizes:null,slot:null,span:w,spellCheck:Z,src:null,srcDoc:null,srcLang:null,srcSet:null,start:w,step:null,style:null,tabIndex:w,target:null,title:null,translate:null,type:null,typeMustMatch:B,useMap:null,value:Z,width:w,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:K,axis:null,background:null,bgColor:null,border:w,borderColor:null,bottomMargin:w,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:B,declare:B,event:null,face:null,frame:null,frameBorder:null,hSpace:w,leftMargin:w,link:null,longDesc:null,lowSrc:null,marginHeight:w,marginWidth:w,noResize:B,noHref:B,noShade:B,noWrap:B,object:null,profile:null,prompt:null,rev:null,rightMargin:w,rules:null,scheme:null,scrolling:Z,standby:null,summary:null,text:null,topMargin:w,valueType:null,version:null,vAlign:null,vLink:null,vSpace:w,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:B,disableRemotePlayback:B,prefix:null,property:null,results:w,security:null,unselectable:null},space:"html",transform:Ds}),Hh=tn({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:ue,accentHeight:w,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:w,amplitude:w,arabicForm:null,ascent:w,attributeName:null,attributeType:null,azimuth:w,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:w,by:null,calcMode:null,capHeight:w,className:K,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:w,diffuseConstant:w,direction:null,display:null,dur:null,divisor:w,dominantBaseline:null,download:B,dx:null,dy:null,edgeMode:null,editable:null,elevation:w,enableBackground:null,end:null,event:null,exponent:w,externalResourcesRequired:null,fill:null,fillOpacity:w,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Qe,g2:Qe,glyphName:Qe,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:w,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:w,horizOriginX:w,horizOriginY:w,id:null,ideographic:w,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:w,k:w,k1:w,k2:w,k3:w,k4:w,kernelMatrix:ue,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:w,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:w,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:w,overlineThickness:w,paintOrder:null,panose1:null,path:null,pathLength:w,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:K,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:w,pointsAtY:w,pointsAtZ:w,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ue,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ue,rev:ue,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ue,requiredFeatures:ue,requiredFonts:ue,requiredFormats:ue,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:w,specularExponent:w,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:w,strikethroughThickness:w,string:null,stroke:null,strokeDashArray:ue,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:w,strokeOpacity:w,strokeWidth:null,style:null,surfaceScale:w,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ue,tabIndex:w,tableValues:null,target:null,targetX:w,targetY:w,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ue,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:w,underlineThickness:w,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:w,values:null,vAlphabetic:w,vMathematical:w,vectorEffect:null,vHanging:w,vIdeographic:w,version:null,vertAdvY:w,vertOriginX:w,vertOriginY:w,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:w,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Ns}),Ls=tn({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),bs=tn({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Ds}),Us=tn({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),Bh={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},qh=/[A-Z]/g,Xo=/-[a-z]/g,Jh=/^data[-\w.:]+$/i;function zh(n,e){const t=wt(e);let i=e,o=le;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&Jh.test(e)){if(e.charAt(4)==="-"){const r=e.slice(5).replace(Xo,$h);i="data"+r.charAt(0).toUpperCase()+r.slice(1)}else{const r=e.slice(4);if(!Xo.test(r)){let l=r.replace(qh,Oh);l.charAt(0)!=="-"&&(l="-"+l),e="data"+l}}o=Wt}return new o(i,e)}function Oh(n){return"-"+n.toLowerCase()}function $h(n){return n.charAt(1).toUpperCase()}const Wh=ks([Ms,Gh,Ls,bs,Us],"html"),Yt=ks([Ms,Hh,Ls,bs,Us],"svg");function Yh(n){return n.join(" ").trim()}var Kt={},Qo=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Kh=/\n/g,Xh=/^\s*/,Qh=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Zh=/^:\s*/,jh=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,em=/^[;\s]*/,nm=/^\s+|\s+$/g,tm=`
`,Zo="/",jo="*",Ge="",im="comment",om="declaration";function rm(n,e){if(typeof n!="string")throw new TypeError("First argument must be a string");if(!n)return[];e=e||{};var t=1,i=1;function o(g){var T=g.match(Kh);T&&(t+=T.length);var E=g.lastIndexOf(tm);i=~E?g.length-E:i+g.length}function r(){var g={line:t,column:i};return function(T){return T.position=new l(g),c(),T}}function l(g){this.start=g,this.end={line:t,column:i},this.source=e.source}l.prototype.content=n;function u(g){var T=new Error(e.source+":"+t+":"+i+": "+g);if(T.reason=g,T.filename=e.source,T.line=t,T.column=i,T.source=n,!e.silent)throw T}function f(g){var T=g.exec(n);if(T){var E=T[0];return o(E),n=n.slice(E.length),T}}function c(){f(Xh)}function d(g){var T;for(g=g||[];T=p();)T!==!1&&g.push(T);return g}function p(){var g=r();if(!(Zo!=n.charAt(0)||jo!=n.charAt(1))){for(var T=2;Ge!=n.charAt(T)&&(jo!=n.charAt(T)||Zo!=n.charAt(T+1));)++T;if(T+=2,Ge===n.charAt(T-1))return u("End of comment missing");var E=n.slice(2,T-2);return i+=2,o(E),n=n.slice(T),i+=2,g({type:im,comment:E})}}function h(){var g=r(),T=f(Qh);if(T){if(p(),!f(Zh))return u("property missing ':'");var E=f(jh),C=g({type:om,property:er(T[0].replace(Qo,Ge)),value:E?er(E[0].replace(Qo,Ge)):Ge});return f(em),C}}function m(){var g=[];d(g);for(var T;T=h();)T!==!1&&(g.push(T),d(g));return g}return c(),m()}function er(n){return n?n.replace(nm,Ge):Ge}var sm=rm,lm=Nn&&Nn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.default=um;const am=lm(sm);function um(n,e){let t=null;if(!n||typeof n!="string")return t;const i=(0,am.default)(n),o=typeof e=="function";return i.forEach(r=>{if(r.type!=="declaration")return;const{property:l,value:u}=r;o?e(l,u,r):u&&(t=t||{},t[l]=u)}),t}var Yn={};Object.defineProperty(Yn,"__esModule",{value:!0});Yn.camelCase=void 0;var cm=/^--[a-zA-Z0-9_-]+$/,fm=/-([a-z])/g,dm=/^[^-]+$/,pm=/^-(webkit|moz|ms|o|khtml)-/,hm=/^-(ms)-/,mm=function(n){return!n||dm.test(n)||cm.test(n)},gm=function(n,e){return e.toUpperCase()},nr=function(n,e){return"".concat(e,"-")},ym=function(n,e){return e===void 0&&(e={}),mm(n)?n:(n=n.toLowerCase(),e.reactCompat?n=n.replace(hm,nr):n=n.replace(pm,nr),n.replace(fm,gm))};Yn.camelCase=ym;var vm=Nn&&Nn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}},Tm=vm(Kt),Em=Yn;function Pt(n,e){var t={};return!n||typeof n!="string"||(0,Tm.default)(n,function(i,o){i&&o&&(t[(0,Em.camelCase)(i,e)]=o)}),t}Pt.default=Pt;var Cm=Pt;const Sm=Fr(Cm),Fs=Vs("end"),Xt=Vs("start");function Vs(n){return e;function e(t){const i=t&&t.position&&t.position[n]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function _m(n){const e=Xt(n),t=Fs(n);if(e&&t)return{start:e,end:t}}function pn(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?tr(n.position):"start"in n||"end"in n?tr(n):"line"in n||"column"in n?kt(n):""}function kt(n){return ir(n&&n.line)+":"+ir(n&&n.column)}function tr(n){return kt(n&&n.start)+"-"+kt(n&&n.end)}function ir(n){return n&&typeof n=="number"?n:1}class te extends Error{constructor(e,t,i){super(),typeof t=="string"&&(i=t,t=void 0);let o="",r={},l=!1;if(t&&("line"in t&&"column"in t?r={place:t}:"start"in t&&"end"in t?r={place:t}:"type"in t?r={ancestors:[t],place:t.position}:r={...t}),typeof e=="string"?o=e:!r.cause&&e&&(l=!0,o=e.message,r.cause=e),!r.ruleId&&!r.source&&typeof i=="string"){const f=i.indexOf(":");f===-1?r.ruleId=i:(r.source=i.slice(0,f),r.ruleId=i.slice(f+1))}if(!r.place&&r.ancestors&&r.ancestors){const f=r.ancestors[r.ancestors.length-1];f&&(r.place=f.position)}const u=r.place&&"start"in r.place?r.place.start:r.place;this.ancestors=r.ancestors||void 0,this.cause=r.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file="",this.message=o,this.line=u?u.line:void 0,this.name=pn(r.place)||"1:1",this.place=r.place||void 0,this.reason=this.message,this.ruleId=r.ruleId||void 0,this.source=r.source||void 0,this.stack=l&&r.cause&&typeof r.cause.stack=="string"?r.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}te.prototype.file="";te.prototype.name="";te.prototype.reason="";te.prototype.message="";te.prototype.stack="";te.prototype.column=void 0;te.prototype.line=void 0;te.prototype.ancestors=void 0;te.prototype.cause=void 0;te.prototype.fatal=void 0;te.prototype.place=void 0;te.prototype.ruleId=void 0;te.prototype.source=void 0;const Qt={}.hasOwnProperty,Im=new Map,Am=/[A-Z]/g,wm=new Set(["table","tbody","thead","tfoot","tr"]),xm=new Set(["td","th"]),Gs="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Rm(n,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=Um(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=bm(t,e.jsx,e.jsxs)}const o={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Yt:Wh,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},r=Hs(o,n,void 0);return r&&typeof r!="string"?r:o.create(n,o.Fragment,{children:r||void 0},void 0)}function Hs(n,e,t){if(e.type==="element")return Pm(n,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return km(n,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return Nm(n,e,t);if(e.type==="mdxjsEsm")return Mm(n,e);if(e.type==="root")return Dm(n,e,t);if(e.type==="text")return Lm(n,e)}function Pm(n,e,t){const i=n.schema;let o=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(o=Yt,n.schema=o),n.ancestors.push(e);const r=qs(n,e.tagName,!1),l=Fm(n,e);let u=jt(n,e);return wm.has(e.tagName)&&(u=u.filter(function(f){return typeof f=="string"?!Fh(f):!0})),Bs(n,l,r,e),Zt(l,u),n.ancestors.pop(),n.schema=i,n.create(e,r,l,t)}function km(n,e){if(e.data&&e.data.estree&&n.evaluater){const i=e.data.estree.body[0];return i.type,n.evaluater.evaluateExpression(i.expression)}gn(n,e.position)}function Mm(n,e){if(e.data&&e.data.estree&&n.evaluater)return n.evaluater.evaluateProgram(e.data.estree);gn(n,e.position)}function Nm(n,e,t){const i=n.schema;let o=i;e.name==="svg"&&i.space==="html"&&(o=Yt,n.schema=o),n.ancestors.push(e);const r=e.name===null?n.Fragment:qs(n,e.name,!0),l=Vm(n,e),u=jt(n,e);return Bs(n,l,r,e),Zt(l,u),n.ancestors.pop(),n.schema=i,n.create(e,r,l,t)}function Dm(n,e,t){const i={};return Zt(i,jt(n,e)),n.create(e,n.Fragment,i,t)}function Lm(n,e){return e.value}function Bs(n,e,t,i){typeof t!="string"&&t!==n.Fragment&&n.passNode&&(e.node=i)}function Zt(n,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(n.children=t)}}function bm(n,e,t){return i;function i(o,r,l,u){const c=Array.isArray(l.children)?t:e;return u?c(r,l,u):c(r,l)}}function Um(n,e){return t;function t(i,o,r,l){const u=Array.isArray(r.children),f=Xt(i);return e(o,r,l,u,{columnNumber:f?f.column-1:void 0,fileName:n,lineNumber:f?f.line:void 0},void 0)}}function Fm(n,e){const t={};let i,o;for(o in e.properties)if(o!=="children"&&Qt.call(e.properties,o)){const r=Gm(n,o,e.properties[o]);if(r){const[l,u]=r;n.tableCellAlignToStyle&&l==="align"&&typeof u=="string"&&xm.has(e.tagName)?i=u:t[l]=u}}if(i){const r=t.style||(t.style={});r[n.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return t}function Vm(n,e){const t={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&n.evaluater){const r=i.data.estree.body[0];r.type;const l=r.expression;l.type;const u=l.properties[0];u.type,Object.assign(t,n.evaluater.evaluateExpression(u.argument))}else gn(n,e.position);else{const o=i.name;let r;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&n.evaluater){const u=i.value.data.estree.body[0];u.type,r=n.evaluater.evaluateExpression(u.expression)}else gn(n,e.position);else r=i.value===null?!0:i.value;t[o]=r}return t}function jt(n,e){const t=[];let i=-1;const o=n.passKeys?new Map:Im;for(;++i<e.children.length;){const r=e.children[i];let l;if(n.passKeys){const f=r.type==="element"?r.tagName:r.type==="mdxJsxFlowElement"||r.type==="mdxJsxTextElement"?r.name:void 0;if(f){const c=o.get(f)||0;l=f+"-"+c,o.set(f,c+1)}}const u=Hs(n,r,l);u!==void 0&&t.push(u)}return t}function Gm(n,e,t){const i=zh(n.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=i.commaSeparated?Nh(t):Yh(t)),i.property==="style"){let o=typeof t=="object"?t:Hm(n,String(t));return n.stylePropertyNameCase==="css"&&(o=Bm(o)),["style",o]}return[n.elementAttributeNameCase==="react"&&i.space?Bh[i.property]||i.property:i.attribute,t]}}function Hm(n,e){try{return Sm(e,{reactCompat:!0})}catch(t){if(n.ignoreInvalidStyle)return{};const i=t,o=new te("Cannot parse `style` attribute",{ancestors:n.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=n.filePath||void 0,o.url=Gs+"#cannot-parse-style-attribute",o}}function qs(n,e,t){let i;if(!t)i={type:"Literal",value:e};else if(e.includes(".")){const o=e.split(".");let r=-1,l;for(;++r<o.length;){const u=Wo(o[r])?{type:"Identifier",name:o[r]}:{type:"Literal",value:o[r]};l=l?{type:"MemberExpression",object:l,property:u,computed:!!(r&&u.type==="Literal"),optional:!1}:u}i=l}else i=Wo(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const o=i.value;return Qt.call(n.components,o)?n.components[o]:o}if(n.evaluater)return n.evaluater.evaluateExpression(i);gn(n)}function gn(n,e){const t=new te("Cannot handle MDX estrees without `createEvaluater`",{ancestors:n.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=n.filePath||void 0,t.url=Gs+"#cannot-handle-mdx-estrees-without-createevaluater",t}function Bm(n){const e={};let t;for(t in n)Qt.call(n,t)&&(e[qm(t)]=n[t]);return e}function qm(n){let e=n.replace(Am,Jm);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function Jm(n){return"-"+n.toLowerCase()}const tt={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},zm={};function Om(n,e){const t=zm,i=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,o=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return Js(n,i,o)}function Js(n,e,t){if($m(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return or(n.children,e,t)}return Array.isArray(n)?or(n,e,t):""}function or(n,e,t){const i=[];let o=-1;for(;++o<n.length;)i[o]=Js(n[o],e,t);return i.join("")}function $m(n){return!!(n&&typeof n=="object")}const rr=document.createElement("i");function ei(n){const e="&"+n+";";rr.innerHTML=e;const t=rr.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function _e(n,e,t,i){const o=n.length;let r=0,l;if(e<0?e=-e>o?0:o+e:e=e>o?o:e,t=t>0?t:0,i.length<1e4)l=Array.from(i),l.unshift(e,t),n.splice(...l);else for(t&&n.splice(e,t);r<i.length;)l=i.slice(r,r+1e4),l.unshift(e,0),n.splice(...l),r+=1e4,e+=1e4}function fe(n,e){return n.length>0?(_e(n,n.length,0,e),n):e}const sr={}.hasOwnProperty;function Wm(n){const e={};let t=-1;for(;++t<n.length;)Ym(e,n[t]);return e}function Ym(n,e){let t;for(t in e){const o=(sr.call(n,t)?n[t]:void 0)||(n[t]={}),r=e[t];let l;if(r)for(l in r){sr.call(o,l)||(o[l]=[]);const u=r[l];Km(o[l],Array.isArray(u)?u:u?[u]:[])}}}function Km(n,e){let t=-1;const i=[];for(;++t<e.length;)(e[t].add==="after"?n:i).push(e[t]);_e(n,0,0,i)}function zs(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function Ze(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Se=be(/[A-Za-z]/),ce=be(/[\dA-Za-z]/),Xm=be(/[#-'*+\--9=?A-Z^-~]/);function Mt(n){return n!==null&&(n<32||n===127)}const Nt=be(/\d/),Qm=be(/[\dA-Fa-f]/),Zm=be(/[!-/:-@[-`{-~]/);function F(n){return n!==null&&n<-2}function se(n){return n!==null&&(n<0||n===32)}function $(n){return n===-2||n===-1||n===32}const jm=be(new RegExp("\\p{P}|\\p{S}","u")),eg=be(/\s/);function be(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function on(n){const e=[];let t=-1,i=0,o=0;for(;++t<n.length;){const r=n.charCodeAt(t);let l="";if(r===37&&ce(n.charCodeAt(t+1))&&ce(n.charCodeAt(t+2)))o=2;else if(r<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(r))||(l=String.fromCharCode(r));else if(r>55295&&r<57344){const u=n.charCodeAt(t+1);r<56320&&u>56319&&u<57344?(l=String.fromCharCode(r,u),o=1):l=""}else l=String.fromCharCode(r);l&&(e.push(n.slice(i,t),encodeURIComponent(l)),i=t+o+1,l=""),o&&(t+=o,o=0)}return e.join("")+n.slice(i)}function X(n,e,t,i){const o=i?i-1:Number.POSITIVE_INFINITY;let r=0;return l;function l(f){return $(f)?(n.enter(t),u(f)):e(f)}function u(f){return $(f)&&r++<o?(n.consume(f),u):(n.exit(t),e(f))}}const ng={tokenize:tg};function tg(n){const e=n.attempt(this.parser.constructs.contentInitial,i,o);let t;return e;function i(u){if(u===null){n.consume(u);return}return n.enter("lineEnding"),n.consume(u),n.exit("lineEnding"),X(n,e,"linePrefix")}function o(u){return n.enter("paragraph"),r(u)}function r(u){const f=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=f),t=f,l(u)}function l(u){if(u===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(u);return}return F(u)?(n.consume(u),n.exit("chunkText"),r):(n.consume(u),l)}}const ig={tokenize:og},lr={tokenize:rg};function og(n){const e=this,t=[];let i=0,o,r,l;return u;function u(_){if(i<t.length){const R=t[i];return e.containerState=R[1],n.attempt(R[0].continuation,f,c)(_)}return c(_)}function f(_){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,o&&A();const R=e.events.length;let D=R,S;for(;D--;)if(e.events[D][0]==="exit"&&e.events[D][1].type==="chunkFlow"){S=e.events[D][1].end;break}C(i);let M=R;for(;M<e.events.length;)e.events[M][1].end={...S},M++;return _e(e.events,D+1,0,e.events.slice(R)),e.events.length=M,c(_)}return u(_)}function c(_){if(i===t.length){if(!o)return h(_);if(o.currentConstruct&&o.currentConstruct.concrete)return g(_);e.interrupt=!!(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(lr,d,p)(_)}function d(_){return o&&A(),C(i),h(_)}function p(_){return e.parser.lazy[e.now().line]=i!==t.length,l=e.now().offset,g(_)}function h(_){return e.containerState={},n.attempt(lr,m,g)(_)}function m(_){return i++,t.push([e.currentConstruct,e.containerState]),h(_)}function g(_){if(_===null){o&&A(),C(0),n.consume(_);return}return o=o||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:o,contentType:"flow",previous:r}),T(_)}function T(_){if(_===null){E(n.exit("chunkFlow"),!0),C(0),n.consume(_);return}return F(_)?(n.consume(_),E(n.exit("chunkFlow")),i=0,e.interrupt=void 0,u):(n.consume(_),T)}function E(_,R){const D=e.sliceStream(_);if(R&&D.push(null),_.previous=r,r&&(r.next=_),r=_,o.defineSkip(_.start),o.write(D),e.parser.lazy[_.start.line]){let S=o.events.length;for(;S--;)if(o.events[S][1].start.offset<l&&(!o.events[S][1].end||o.events[S][1].end.offset>l))return;const M=e.events.length;let H=M,P,b;for(;H--;)if(e.events[H][0]==="exit"&&e.events[H][1].type==="chunkFlow"){if(P){b=e.events[H][1].end;break}P=!0}for(C(i),S=M;S<e.events.length;)e.events[S][1].end={...b},S++;_e(e.events,H+1,0,e.events.slice(M)),e.events.length=S}}function C(_){let R=t.length;for(;R-- >_;){const D=t[R];e.containerState=D[1],D[0].exit.call(e,n)}t.length=_}function A(){o.write([null]),r=void 0,o=void 0,e.containerState._closeFlow=void 0}}function rg(n,e,t){return X(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ar(n){if(n===null||se(n)||eg(n))return 1;if(jm(n))return 2}function ni(n,e,t){const i=[];let o=-1;for(;++o<n.length;){const r=n[o].resolveAll;r&&!i.includes(r)&&(e=r(e,t),i.push(r))}return e}const Dt={name:"attention",resolveAll:sg,tokenize:lg};function sg(n,e){let t=-1,i,o,r,l,u,f,c,d;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(i=t;i--;)if(n[i][0]==="exit"&&n[i][1].type==="attentionSequence"&&n[i][1]._open&&e.sliceSerialize(n[i][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[i][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[i][1].end.offset-n[i][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;f=n[i][1].end.offset-n[i][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const p={...n[i][1].end},h={...n[t][1].start};ur(p,-f),ur(h,f),l={type:f>1?"strongSequence":"emphasisSequence",start:p,end:{...n[i][1].end}},u={type:f>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:h},r={type:f>1?"strongText":"emphasisText",start:{...n[i][1].end},end:{...n[t][1].start}},o={type:f>1?"strong":"emphasis",start:{...l.start},end:{...u.end}},n[i][1].end={...l.start},n[t][1].start={...u.end},c=[],n[i][1].end.offset-n[i][1].start.offset&&(c=fe(c,[["enter",n[i][1],e],["exit",n[i][1],e]])),c=fe(c,[["enter",o,e],["enter",l,e],["exit",l,e],["enter",r,e]]),c=fe(c,ni(e.parser.constructs.insideSpan.null,n.slice(i+1,t),e)),c=fe(c,[["exit",r,e],["enter",u,e],["exit",u,e],["exit",o,e]]),n[t][1].end.offset-n[t][1].start.offset?(d=2,c=fe(c,[["enter",n[t][1],e],["exit",n[t][1],e]])):d=0,_e(n,i-1,t-i+3,c),t=i+c.length-d-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function lg(n,e){const t=this.parser.constructs.attentionMarkers.null,i=this.previous,o=ar(i);let r;return l;function l(f){return r=f,n.enter("attentionSequence"),u(f)}function u(f){if(f===r)return n.consume(f),u;const c=n.exit("attentionSequence"),d=ar(f),p=!d||d===2&&o||t.includes(f),h=!o||o===2&&d||t.includes(i);return c._open=!!(r===42?p:p&&(o||!h)),c._close=!!(r===42?h:h&&(d||!p)),e(f)}}function ur(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const ag={name:"autolink",tokenize:ug};function ug(n,e,t){let i=0;return o;function o(m){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(m),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),r}function r(m){return Se(m)?(n.consume(m),l):m===64?t(m):c(m)}function l(m){return m===43||m===45||m===46||ce(m)?(i=1,u(m)):c(m)}function u(m){return m===58?(n.consume(m),i=0,f):(m===43||m===45||m===46||ce(m))&&i++<32?(n.consume(m),u):(i=0,c(m))}function f(m){return m===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(m),n.exit("autolinkMarker"),n.exit("autolink"),e):m===null||m===32||m===60||Mt(m)?t(m):(n.consume(m),f)}function c(m){return m===64?(n.consume(m),d):Xm(m)?(n.consume(m),c):t(m)}function d(m){return ce(m)?p(m):t(m)}function p(m){return m===46?(n.consume(m),i=0,d):m===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(m),n.exit("autolinkMarker"),n.exit("autolink"),e):h(m)}function h(m){if((m===45||ce(m))&&i++<63){const g=m===45?h:p;return n.consume(m),g}return t(m)}}const Kn={partial:!0,tokenize:cg};function cg(n,e,t){return i;function i(r){return $(r)?X(n,o,"linePrefix")(r):o(r)}function o(r){return r===null||F(r)?e(r):t(r)}}const Os={continuation:{tokenize:dg},exit:pg,name:"blockQuote",tokenize:fg};function fg(n,e,t){const i=this;return o;function o(l){if(l===62){const u=i.containerState;return u.open||(n.enter("blockQuote",{_container:!0}),u.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(l),n.exit("blockQuoteMarker"),r}return t(l)}function r(l){return $(l)?(n.enter("blockQuotePrefixWhitespace"),n.consume(l),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(l))}}function dg(n,e,t){const i=this;return o;function o(l){return $(l)?X(n,r,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):r(l)}function r(l){return n.attempt(Os,e,t)(l)}}function pg(n){n.exit("blockQuote")}const $s={name:"characterEscape",tokenize:hg};function hg(n,e,t){return i;function i(r){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(r),n.exit("escapeMarker"),o}function o(r){return Zm(r)?(n.enter("characterEscapeValue"),n.consume(r),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(r)}}const Ws={name:"characterReference",tokenize:mg};function mg(n,e,t){const i=this;let o=0,r,l;return u;function u(p){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(p),n.exit("characterReferenceMarker"),f}function f(p){return p===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(p),n.exit("characterReferenceMarkerNumeric"),c):(n.enter("characterReferenceValue"),r=31,l=ce,d(p))}function c(p){return p===88||p===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(p),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),r=6,l=Qm,d):(n.enter("characterReferenceValue"),r=7,l=Nt,d(p))}function d(p){if(p===59&&o){const h=n.exit("characterReferenceValue");return l===ce&&!ei(i.sliceSerialize(h))?t(p):(n.enter("characterReferenceMarker"),n.consume(p),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return l(p)&&o++<r?(n.consume(p),d):t(p)}}const cr={partial:!0,tokenize:yg},fr={concrete:!0,name:"codeFenced",tokenize:gg};function gg(n,e,t){const i=this,o={partial:!0,tokenize:D};let r=0,l=0,u;return f;function f(S){return c(S)}function c(S){const M=i.events[i.events.length-1];return r=M&&M[1].type==="linePrefix"?M[2].sliceSerialize(M[1],!0).length:0,u=S,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),d(S)}function d(S){return S===u?(l++,n.consume(S),d):l<3?t(S):(n.exit("codeFencedFenceSequence"),$(S)?X(n,p,"whitespace")(S):p(S))}function p(S){return S===null||F(S)?(n.exit("codeFencedFence"),i.interrupt?e(S):n.check(cr,T,R)(S)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),h(S))}function h(S){return S===null||F(S)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),p(S)):$(S)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),X(n,m,"whitespace")(S)):S===96&&S===u?t(S):(n.consume(S),h)}function m(S){return S===null||F(S)?p(S):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),g(S))}function g(S){return S===null||F(S)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),p(S)):S===96&&S===u?t(S):(n.consume(S),g)}function T(S){return n.attempt(o,R,E)(S)}function E(S){return n.enter("lineEnding"),n.consume(S),n.exit("lineEnding"),C}function C(S){return r>0&&$(S)?X(n,A,"linePrefix",r+1)(S):A(S)}function A(S){return S===null||F(S)?n.check(cr,T,R)(S):(n.enter("codeFlowValue"),_(S))}function _(S){return S===null||F(S)?(n.exit("codeFlowValue"),A(S)):(n.consume(S),_)}function R(S){return n.exit("codeFenced"),e(S)}function D(S,M,H){let P=0;return b;function b(q){return S.enter("lineEnding"),S.consume(q),S.exit("lineEnding"),N}function N(q){return S.enter("codeFencedFence"),$(q)?X(S,L,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):L(q)}function L(q){return q===u?(S.enter("codeFencedFenceSequence"),U(q)):H(q)}function U(q){return q===u?(P++,S.consume(q),U):P>=l?(S.exit("codeFencedFenceSequence"),$(q)?X(S,O,"whitespace")(q):O(q)):H(q)}function O(q){return q===null||F(q)?(S.exit("codeFencedFence"),M(q)):H(q)}}}function yg(n,e,t){const i=this;return o;function o(l){return l===null?t(l):(n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),r)}function r(l){return i.parser.lazy[i.now().line]?t(l):e(l)}}const it={name:"codeIndented",tokenize:Tg},vg={partial:!0,tokenize:Eg};function Tg(n,e,t){const i=this;return o;function o(c){return n.enter("codeIndented"),X(n,r,"linePrefix",5)(c)}function r(c){const d=i.events[i.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?l(c):t(c)}function l(c){return c===null?f(c):F(c)?n.attempt(vg,l,f)(c):(n.enter("codeFlowValue"),u(c))}function u(c){return c===null||F(c)?(n.exit("codeFlowValue"),l(c)):(n.consume(c),u)}function f(c){return n.exit("codeIndented"),e(c)}}function Eg(n,e,t){const i=this;return o;function o(l){return i.parser.lazy[i.now().line]?t(l):F(l)?(n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),o):X(n,r,"linePrefix",5)(l)}function r(l){const u=i.events[i.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(l):F(l)?o(l):t(l)}}const Cg={name:"codeText",previous:_g,resolve:Sg,tokenize:Ig};function Sg(n){let e=n.length-4,t=3,i,o;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(i=t;++i<e;)if(n[i][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(i=t-1,e++;++i<=e;)o===void 0?i!==e&&n[i][1].type!=="lineEnding"&&(o=i):(i===e||n[i][1].type==="lineEnding")&&(n[o][1].type="codeTextData",i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),e-=i-o-2,i=o+2),o=void 0);return n}function _g(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Ig(n,e,t){let i=0,o,r;return l;function l(p){return n.enter("codeText"),n.enter("codeTextSequence"),u(p)}function u(p){return p===96?(n.consume(p),i++,u):(n.exit("codeTextSequence"),f(p))}function f(p){return p===null?t(p):p===32?(n.enter("space"),n.consume(p),n.exit("space"),f):p===96?(r=n.enter("codeTextSequence"),o=0,d(p)):F(p)?(n.enter("lineEnding"),n.consume(p),n.exit("lineEnding"),f):(n.enter("codeTextData"),c(p))}function c(p){return p===null||p===32||p===96||F(p)?(n.exit("codeTextData"),f(p)):(n.consume(p),c)}function d(p){return p===96?(n.consume(p),o++,d):o===i?(n.exit("codeTextSequence"),n.exit("codeText"),e(p)):(r.type="codeTextData",c(p))}}class Ag{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const i=t??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,t,i){const o=t||0;this.setCursor(Math.trunc(e));const r=this.right.splice(this.right.length-o,Number.POSITIVE_INFINITY);return i&&cn(this.left,i),r.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),cn(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),cn(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);cn(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);cn(this.left,t.reverse())}}}function cn(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function Ys(n){const e={};let t=-1,i,o,r,l,u,f,c;const d=new Ag(n);for(;++t<d.length;){for(;t in e;)t=e[t];if(i=d.get(t),t&&i[1].type==="chunkFlow"&&d.get(t-1)[1].type==="listItemPrefix"&&(f=i[1]._tokenizer.events,r=0,r<f.length&&f[r][1].type==="lineEndingBlank"&&(r+=2),r<f.length&&f[r][1].type==="content"))for(;++r<f.length&&f[r][1].type!=="content";)f[r][1].type==="chunkText"&&(f[r][1]._isInFirstContentOfListItem=!0,r++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,wg(d,t)),t=e[t],c=!0);else if(i[1]._container){for(r=t,o=void 0;r--;)if(l=d.get(r),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(o&&(d.get(o)[1].type="lineEndingBlank"),l[1].type="lineEnding",o=r);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;o&&(i[1].end={...d.get(o)[1].start},u=d.slice(o,t),u.unshift(i),d.splice(o,t-o+1,u))}}return _e(n,0,Number.POSITIVE_INFINITY,d.slice(0)),!c}function wg(n,e){const t=n.get(e)[1],i=n.get(e)[2];let o=e-1;const r=[];let l=t._tokenizer;l||(l=i.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const u=l.events,f=[],c={};let d,p,h=-1,m=t,g=0,T=0;const E=[T];for(;m;){for(;n.get(++o)[1]!==m;);r.push(o),m._tokenizer||(d=i.sliceStream(m),m.next||d.push(null),p&&l.defineSkip(m.start),m._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(d),m._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),p=m,m=m.next}for(m=t;++h<u.length;)u[h][0]==="exit"&&u[h-1][0]==="enter"&&u[h][1].type===u[h-1][1].type&&u[h][1].start.line!==u[h][1].end.line&&(T=h+1,E.push(T),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(l.events=[],m?(m._tokenizer=void 0,m.previous=void 0):E.pop(),h=E.length;h--;){const C=u.slice(E[h],E[h+1]),A=r.pop();f.push([A,A+C.length-1]),n.splice(A,2,C)}for(f.reverse(),h=-1;++h<f.length;)c[g+f[h][0]]=g+f[h][1],g+=f[h][1]-f[h][0]-1;return c}const xg={resolve:Pg,tokenize:kg},Rg={partial:!0,tokenize:Mg};function Pg(n){return Ys(n),n}function kg(n,e){let t;return i;function i(u){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),o(u)}function o(u){return u===null?r(u):F(u)?n.check(Rg,l,r)(u):(n.consume(u),o)}function r(u){return n.exit("chunkContent"),n.exit("content"),e(u)}function l(u){return n.consume(u),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,o}}function Mg(n,e,t){const i=this;return o;function o(l){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),X(n,r,"linePrefix")}function r(l){if(l===null||F(l))return t(l);const u=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(l):n.interrupt(i.parser.constructs.flow,t,e)(l)}}function Ks(n,e,t,i,o,r,l,u,f){const c=f||Number.POSITIVE_INFINITY;let d=0;return p;function p(C){return C===60?(n.enter(i),n.enter(o),n.enter(r),n.consume(C),n.exit(r),h):C===null||C===32||C===41||Mt(C)?t(C):(n.enter(i),n.enter(l),n.enter(u),n.enter("chunkString",{contentType:"string"}),T(C))}function h(C){return C===62?(n.enter(r),n.consume(C),n.exit(r),n.exit(o),n.exit(i),e):(n.enter(u),n.enter("chunkString",{contentType:"string"}),m(C))}function m(C){return C===62?(n.exit("chunkString"),n.exit(u),h(C)):C===null||C===60||F(C)?t(C):(n.consume(C),C===92?g:m)}function g(C){return C===60||C===62||C===92?(n.consume(C),m):m(C)}function T(C){return!d&&(C===null||C===41||se(C))?(n.exit("chunkString"),n.exit(u),n.exit(l),n.exit(i),e(C)):d<c&&C===40?(n.consume(C),d++,T):C===41?(n.consume(C),d--,T):C===null||C===32||C===40||Mt(C)?t(C):(n.consume(C),C===92?E:T)}function E(C){return C===40||C===41||C===92?(n.consume(C),T):T(C)}}function Xs(n,e,t,i,o,r){const l=this;let u=0,f;return c;function c(m){return n.enter(i),n.enter(o),n.consume(m),n.exit(o),n.enter(r),d}function d(m){return u>999||m===null||m===91||m===93&&!f||m===94&&!u&&"_hiddenFootnoteSupport"in l.parser.constructs?t(m):m===93?(n.exit(r),n.enter(o),n.consume(m),n.exit(o),n.exit(i),e):F(m)?(n.enter("lineEnding"),n.consume(m),n.exit("lineEnding"),d):(n.enter("chunkString",{contentType:"string"}),p(m))}function p(m){return m===null||m===91||m===93||F(m)||u++>999?(n.exit("chunkString"),d(m)):(n.consume(m),f||(f=!$(m)),m===92?h:p)}function h(m){return m===91||m===92||m===93?(n.consume(m),u++,p):p(m)}}function Qs(n,e,t,i,o,r){let l;return u;function u(h){return h===34||h===39||h===40?(n.enter(i),n.enter(o),n.consume(h),n.exit(o),l=h===40?41:h,f):t(h)}function f(h){return h===l?(n.enter(o),n.consume(h),n.exit(o),n.exit(i),e):(n.enter(r),c(h))}function c(h){return h===l?(n.exit(r),f(l)):h===null?t(h):F(h)?(n.enter("lineEnding"),n.consume(h),n.exit("lineEnding"),X(n,c,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),d(h))}function d(h){return h===l||h===null||F(h)?(n.exit("chunkString"),c(h)):(n.consume(h),h===92?p:d)}function p(h){return h===l||h===92?(n.consume(h),d):d(h)}}function hn(n,e){let t;return i;function i(o){return F(o)?(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),t=!0,i):$(o)?X(n,i,t?"linePrefix":"lineSuffix")(o):e(o)}}const Ng={name:"definition",tokenize:Lg},Dg={partial:!0,tokenize:bg};function Lg(n,e,t){const i=this;let o;return r;function r(m){return n.enter("definition"),l(m)}function l(m){return Xs.call(i,n,u,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function u(m){return o=Ze(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),m===58?(n.enter("definitionMarker"),n.consume(m),n.exit("definitionMarker"),f):t(m)}function f(m){return se(m)?hn(n,c)(m):c(m)}function c(m){return Ks(n,d,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function d(m){return n.attempt(Dg,p,p)(m)}function p(m){return $(m)?X(n,h,"whitespace")(m):h(m)}function h(m){return m===null||F(m)?(n.exit("definition"),i.parser.defined.push(o),e(m)):t(m)}}function bg(n,e,t){return i;function i(u){return se(u)?hn(n,o)(u):t(u)}function o(u){return Qs(n,r,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function r(u){return $(u)?X(n,l,"whitespace")(u):l(u)}function l(u){return u===null||F(u)?e(u):t(u)}}const Ug={name:"hardBreakEscape",tokenize:Fg};function Fg(n,e,t){return i;function i(r){return n.enter("hardBreakEscape"),n.consume(r),o}function o(r){return F(r)?(n.exit("hardBreakEscape"),e(r)):t(r)}}const Vg={name:"headingAtx",resolve:Gg,tokenize:Hg};function Gg(n,e){let t=n.length-2,i=3,o,r;return n[i][1].type==="whitespace"&&(i+=2),t-2>i&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(i===t-1||t-4>i&&n[t-2][1].type==="whitespace")&&(t-=i+1===t?2:4),t>i&&(o={type:"atxHeadingText",start:n[i][1].start,end:n[t][1].end},r={type:"chunkText",start:n[i][1].start,end:n[t][1].end,contentType:"text"},_e(n,i,t-i+1,[["enter",o,e],["enter",r,e],["exit",r,e],["exit",o,e]])),n}function Hg(n,e,t){let i=0;return o;function o(d){return n.enter("atxHeading"),r(d)}function r(d){return n.enter("atxHeadingSequence"),l(d)}function l(d){return d===35&&i++<6?(n.consume(d),l):d===null||se(d)?(n.exit("atxHeadingSequence"),u(d)):t(d)}function u(d){return d===35?(n.enter("atxHeadingSequence"),f(d)):d===null||F(d)?(n.exit("atxHeading"),e(d)):$(d)?X(n,u,"whitespace")(d):(n.enter("atxHeadingText"),c(d))}function f(d){return d===35?(n.consume(d),f):(n.exit("atxHeadingSequence"),u(d))}function c(d){return d===null||d===35||se(d)?(n.exit("atxHeadingText"),u(d)):(n.consume(d),c)}}const Bg=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],dr=["pre","script","style","textarea"],qg={concrete:!0,name:"htmlFlow",resolveTo:Og,tokenize:$g},Jg={partial:!0,tokenize:Yg},zg={partial:!0,tokenize:Wg};function Og(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function $g(n,e,t){const i=this;let o,r,l,u,f;return c;function c(v){return d(v)}function d(v){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(v),p}function p(v){return v===33?(n.consume(v),h):v===47?(n.consume(v),r=!0,T):v===63?(n.consume(v),o=3,i.interrupt?e:y):Se(v)?(n.consume(v),l=String.fromCharCode(v),E):t(v)}function h(v){return v===45?(n.consume(v),o=2,m):v===91?(n.consume(v),o=5,u=0,g):Se(v)?(n.consume(v),o=4,i.interrupt?e:y):t(v)}function m(v){return v===45?(n.consume(v),i.interrupt?e:y):t(v)}function g(v){const ge="CDATA[";return v===ge.charCodeAt(u++)?(n.consume(v),u===ge.length?i.interrupt?e:L:g):t(v)}function T(v){return Se(v)?(n.consume(v),l=String.fromCharCode(v),E):t(v)}function E(v){if(v===null||v===47||v===62||se(v)){const ge=v===47,Ue=l.toLowerCase();return!ge&&!r&&dr.includes(Ue)?(o=1,i.interrupt?e(v):L(v)):Bg.includes(l.toLowerCase())?(o=6,ge?(n.consume(v),C):i.interrupt?e(v):L(v)):(o=7,i.interrupt&&!i.parser.lazy[i.now().line]?t(v):r?A(v):_(v))}return v===45||ce(v)?(n.consume(v),l+=String.fromCharCode(v),E):t(v)}function C(v){return v===62?(n.consume(v),i.interrupt?e:L):t(v)}function A(v){return $(v)?(n.consume(v),A):b(v)}function _(v){return v===47?(n.consume(v),b):v===58||v===95||Se(v)?(n.consume(v),R):$(v)?(n.consume(v),_):b(v)}function R(v){return v===45||v===46||v===58||v===95||ce(v)?(n.consume(v),R):D(v)}function D(v){return v===61?(n.consume(v),S):$(v)?(n.consume(v),D):_(v)}function S(v){return v===null||v===60||v===61||v===62||v===96?t(v):v===34||v===39?(n.consume(v),f=v,M):$(v)?(n.consume(v),S):H(v)}function M(v){return v===f?(n.consume(v),f=null,P):v===null||F(v)?t(v):(n.consume(v),M)}function H(v){return v===null||v===34||v===39||v===47||v===60||v===61||v===62||v===96||se(v)?D(v):(n.consume(v),H)}function P(v){return v===47||v===62||$(v)?_(v):t(v)}function b(v){return v===62?(n.consume(v),N):t(v)}function N(v){return v===null||F(v)?L(v):$(v)?(n.consume(v),N):t(v)}function L(v){return v===45&&o===2?(n.consume(v),Y):v===60&&o===1?(n.consume(v),Q):v===62&&o===4?(n.consume(v),me):v===63&&o===3?(n.consume(v),y):v===93&&o===5?(n.consume(v),Ie):F(v)&&(o===6||o===7)?(n.exit("htmlFlowData"),n.check(Jg,Ae,U)(v)):v===null||F(v)?(n.exit("htmlFlowData"),U(v)):(n.consume(v),L)}function U(v){return n.check(zg,O,Ae)(v)}function O(v){return n.enter("lineEnding"),n.consume(v),n.exit("lineEnding"),q}function q(v){return v===null||F(v)?U(v):(n.enter("htmlFlowData"),L(v))}function Y(v){return v===45?(n.consume(v),y):L(v)}function Q(v){return v===47?(n.consume(v),l="",he):L(v)}function he(v){if(v===62){const ge=l.toLowerCase();return dr.includes(ge)?(n.consume(v),me):L(v)}return Se(v)&&l.length<8?(n.consume(v),l+=String.fromCharCode(v),he):L(v)}function Ie(v){return v===93?(n.consume(v),y):L(v)}function y(v){return v===62?(n.consume(v),me):v===45&&o===2?(n.consume(v),y):L(v)}function me(v){return v===null||F(v)?(n.exit("htmlFlowData"),Ae(v)):(n.consume(v),me)}function Ae(v){return n.exit("htmlFlow"),e(v)}}function Wg(n,e,t){const i=this;return o;function o(l){return F(l)?(n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),r):t(l)}function r(l){return i.parser.lazy[i.now().line]?t(l):e(l)}}function Yg(n,e,t){return i;function i(o){return n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),n.attempt(Kn,e,t)}}const Kg={name:"htmlText",tokenize:Xg};function Xg(n,e,t){const i=this;let o,r,l;return u;function u(y){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(y),f}function f(y){return y===33?(n.consume(y),c):y===47?(n.consume(y),D):y===63?(n.consume(y),_):Se(y)?(n.consume(y),H):t(y)}function c(y){return y===45?(n.consume(y),d):y===91?(n.consume(y),r=0,g):Se(y)?(n.consume(y),A):t(y)}function d(y){return y===45?(n.consume(y),m):t(y)}function p(y){return y===null?t(y):y===45?(n.consume(y),h):F(y)?(l=p,Q(y)):(n.consume(y),p)}function h(y){return y===45?(n.consume(y),m):p(y)}function m(y){return y===62?Y(y):y===45?h(y):p(y)}function g(y){const me="CDATA[";return y===me.charCodeAt(r++)?(n.consume(y),r===me.length?T:g):t(y)}function T(y){return y===null?t(y):y===93?(n.consume(y),E):F(y)?(l=T,Q(y)):(n.consume(y),T)}function E(y){return y===93?(n.consume(y),C):T(y)}function C(y){return y===62?Y(y):y===93?(n.consume(y),C):T(y)}function A(y){return y===null||y===62?Y(y):F(y)?(l=A,Q(y)):(n.consume(y),A)}function _(y){return y===null?t(y):y===63?(n.consume(y),R):F(y)?(l=_,Q(y)):(n.consume(y),_)}function R(y){return y===62?Y(y):_(y)}function D(y){return Se(y)?(n.consume(y),S):t(y)}function S(y){return y===45||ce(y)?(n.consume(y),S):M(y)}function M(y){return F(y)?(l=M,Q(y)):$(y)?(n.consume(y),M):Y(y)}function H(y){return y===45||ce(y)?(n.consume(y),H):y===47||y===62||se(y)?P(y):t(y)}function P(y){return y===47?(n.consume(y),Y):y===58||y===95||Se(y)?(n.consume(y),b):F(y)?(l=P,Q(y)):$(y)?(n.consume(y),P):Y(y)}function b(y){return y===45||y===46||y===58||y===95||ce(y)?(n.consume(y),b):N(y)}function N(y){return y===61?(n.consume(y),L):F(y)?(l=N,Q(y)):$(y)?(n.consume(y),N):P(y)}function L(y){return y===null||y===60||y===61||y===62||y===96?t(y):y===34||y===39?(n.consume(y),o=y,U):F(y)?(l=L,Q(y)):$(y)?(n.consume(y),L):(n.consume(y),O)}function U(y){return y===o?(n.consume(y),o=void 0,q):y===null?t(y):F(y)?(l=U,Q(y)):(n.consume(y),U)}function O(y){return y===null||y===34||y===39||y===60||y===61||y===96?t(y):y===47||y===62||se(y)?P(y):(n.consume(y),O)}function q(y){return y===47||y===62||se(y)?P(y):t(y)}function Y(y){return y===62?(n.consume(y),n.exit("htmlTextData"),n.exit("htmlText"),e):t(y)}function Q(y){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(y),n.exit("lineEnding"),he}function he(y){return $(y)?X(n,Ie,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(y):Ie(y)}function Ie(y){return n.enter("htmlTextData"),l(y)}}const ti={name:"labelEnd",resolveAll:ey,resolveTo:ny,tokenize:ty},Qg={tokenize:iy},Zg={tokenize:oy},jg={tokenize:ry};function ey(n){let e=-1;const t=[];for(;++e<n.length;){const i=n[e][1];if(t.push(n[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const o=i.type==="labelImage"?4:2;i.type="data",e+=o}}return n.length!==t.length&&_e(n,0,n.length,t),n}function ny(n,e){let t=n.length,i=0,o,r,l,u;for(;t--;)if(o=n[t][1],r){if(o.type==="link"||o.type==="labelLink"&&o._inactive)break;n[t][0]==="enter"&&o.type==="labelLink"&&(o._inactive=!0)}else if(l){if(n[t][0]==="enter"&&(o.type==="labelImage"||o.type==="labelLink")&&!o._balanced&&(r=t,o.type!=="labelLink")){i=2;break}}else o.type==="labelEnd"&&(l=t);const f={type:n[r][1].type==="labelLink"?"link":"image",start:{...n[r][1].start},end:{...n[n.length-1][1].end}},c={type:"label",start:{...n[r][1].start},end:{...n[l][1].end}},d={type:"labelText",start:{...n[r+i+2][1].end},end:{...n[l-2][1].start}};return u=[["enter",f,e],["enter",c,e]],u=fe(u,n.slice(r+1,r+i+3)),u=fe(u,[["enter",d,e]]),u=fe(u,ni(e.parser.constructs.insideSpan.null,n.slice(r+i+4,l-3),e)),u=fe(u,[["exit",d,e],n[l-2],n[l-1],["exit",c,e]]),u=fe(u,n.slice(l+1)),u=fe(u,[["exit",f,e]]),_e(n,r,n.length,u),n}function ty(n,e,t){const i=this;let o=i.events.length,r,l;for(;o--;)if((i.events[o][1].type==="labelImage"||i.events[o][1].type==="labelLink")&&!i.events[o][1]._balanced){r=i.events[o][1];break}return u;function u(h){return r?r._inactive?p(h):(l=i.parser.defined.includes(Ze(i.sliceSerialize({start:r.end,end:i.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(h),n.exit("labelMarker"),n.exit("labelEnd"),f):t(h)}function f(h){return h===40?n.attempt(Qg,d,l?d:p)(h):h===91?n.attempt(Zg,d,l?c:p)(h):l?d(h):p(h)}function c(h){return n.attempt(jg,d,p)(h)}function d(h){return e(h)}function p(h){return r._balanced=!0,t(h)}}function iy(n,e,t){return i;function i(p){return n.enter("resource"),n.enter("resourceMarker"),n.consume(p),n.exit("resourceMarker"),o}function o(p){return se(p)?hn(n,r)(p):r(p)}function r(p){return p===41?d(p):Ks(n,l,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function l(p){return se(p)?hn(n,f)(p):d(p)}function u(p){return t(p)}function f(p){return p===34||p===39||p===40?Qs(n,c,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):d(p)}function c(p){return se(p)?hn(n,d)(p):d(p)}function d(p){return p===41?(n.enter("resourceMarker"),n.consume(p),n.exit("resourceMarker"),n.exit("resource"),e):t(p)}}function oy(n,e,t){const i=this;return o;function o(u){return Xs.call(i,n,r,l,"reference","referenceMarker","referenceString")(u)}function r(u){return i.parser.defined.includes(Ze(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(u):t(u)}function l(u){return t(u)}}function ry(n,e,t){return i;function i(r){return n.enter("reference"),n.enter("referenceMarker"),n.consume(r),n.exit("referenceMarker"),o}function o(r){return r===93?(n.enter("referenceMarker"),n.consume(r),n.exit("referenceMarker"),n.exit("reference"),e):t(r)}}const sy={name:"labelStartImage",resolveAll:ti.resolveAll,tokenize:ly};function ly(n,e,t){const i=this;return o;function o(u){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(u),n.exit("labelImageMarker"),r}function r(u){return u===91?(n.enter("labelMarker"),n.consume(u),n.exit("labelMarker"),n.exit("labelImage"),l):t(u)}function l(u){return u===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(u):e(u)}}const ay={name:"labelStartLink",resolveAll:ti.resolveAll,tokenize:uy};function uy(n,e,t){const i=this;return o;function o(l){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(l),n.exit("labelMarker"),n.exit("labelLink"),r}function r(l){return l===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(l):e(l)}}const ot={name:"lineEnding",tokenize:cy};function cy(n,e){return t;function t(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),X(n,e,"linePrefix")}}const kn={name:"thematicBreak",tokenize:fy};function fy(n,e,t){let i=0,o;return r;function r(c){return n.enter("thematicBreak"),l(c)}function l(c){return o=c,u(c)}function u(c){return c===o?(n.enter("thematicBreakSequence"),f(c)):i>=3&&(c===null||F(c))?(n.exit("thematicBreak"),e(c)):t(c)}function f(c){return c===o?(n.consume(c),i++,f):(n.exit("thematicBreakSequence"),$(c)?X(n,u,"whitespace")(c):u(c))}}const re={continuation:{tokenize:my},exit:yy,name:"list",tokenize:hy},dy={partial:!0,tokenize:vy},py={partial:!0,tokenize:gy};function hy(n,e,t){const i=this,o=i.events[i.events.length-1];let r=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0,l=0;return u;function u(m){const g=i.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!i.containerState.marker||m===i.containerState.marker:Nt(m)){if(i.containerState.type||(i.containerState.type=g,n.enter(g,{_container:!0})),g==="listUnordered")return n.enter("listItemPrefix"),m===42||m===45?n.check(kn,t,c)(m):c(m);if(!i.interrupt||m===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),f(m)}return t(m)}function f(m){return Nt(m)&&++l<10?(n.consume(m),f):(!i.interrupt||l<2)&&(i.containerState.marker?m===i.containerState.marker:m===41||m===46)?(n.exit("listItemValue"),c(m)):t(m)}function c(m){return n.enter("listItemMarker"),n.consume(m),n.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||m,n.check(Kn,i.interrupt?t:d,n.attempt(dy,h,p))}function d(m){return i.containerState.initialBlankLine=!0,r++,h(m)}function p(m){return $(m)?(n.enter("listItemPrefixWhitespace"),n.consume(m),n.exit("listItemPrefixWhitespace"),h):t(m)}function h(m){return i.containerState.size=r+i.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(m)}}function my(n,e,t){const i=this;return i.containerState._closeFlow=void 0,n.check(Kn,o,r);function o(u){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,X(n,e,"listItemIndent",i.containerState.size+1)(u)}function r(u){return i.containerState.furtherBlankLines||!$(u)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,l(u)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,n.attempt(py,e,l)(u))}function l(u){return i.containerState._closeFlow=!0,i.interrupt=void 0,X(n,n.attempt(re,e,t),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function gy(n,e,t){const i=this;return X(n,o,"listItemIndent",i.containerState.size+1);function o(r){const l=i.events[i.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===i.containerState.size?e(r):t(r)}}function yy(n){n.exit(this.containerState.type)}function vy(n,e,t){const i=this;return X(n,o,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function o(r){const l=i.events[i.events.length-1];return!$(r)&&l&&l[1].type==="listItemPrefixWhitespace"?e(r):t(r)}}const pr={name:"setextUnderline",resolveTo:Ty,tokenize:Ey};function Ty(n,e){let t=n.length,i,o,r;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){i=t;break}n[t][1].type==="paragraph"&&(o=t)}else n[t][1].type==="content"&&n.splice(t,1),!r&&n[t][1].type==="definition"&&(r=t);const l={type:"setextHeading",start:{...n[i][1].start},end:{...n[n.length-1][1].end}};return n[o][1].type="setextHeadingText",r?(n.splice(o,0,["enter",l,e]),n.splice(r+1,0,["exit",n[i][1],e]),n[i][1].end={...n[r][1].end}):n[i][1]=l,n.push(["exit",l,e]),n}function Ey(n,e,t){const i=this;let o;return r;function r(c){let d=i.events.length,p;for(;d--;)if(i.events[d][1].type!=="lineEnding"&&i.events[d][1].type!=="linePrefix"&&i.events[d][1].type!=="content"){p=i.events[d][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||p)?(n.enter("setextHeadingLine"),o=c,l(c)):t(c)}function l(c){return n.enter("setextHeadingLineSequence"),u(c)}function u(c){return c===o?(n.consume(c),u):(n.exit("setextHeadingLineSequence"),$(c)?X(n,f,"lineSuffix")(c):f(c))}function f(c){return c===null||F(c)?(n.exit("setextHeadingLine"),e(c)):t(c)}}const Cy={tokenize:Sy};function Sy(n){const e=this,t=n.attempt(Kn,i,n.attempt(this.parser.constructs.flowInitial,o,X(n,n.attempt(this.parser.constructs.flow,o,n.attempt(xg,o)),"linePrefix")));return t;function i(r){if(r===null){n.consume(r);return}return n.enter("lineEndingBlank"),n.consume(r),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function o(r){if(r===null){n.consume(r);return}return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const _y={resolveAll:js()},Iy=Zs("string"),Ay=Zs("text");function Zs(n){return{resolveAll:js(n==="text"?wy:void 0),tokenize:e};function e(t){const i=this,o=this.parser.constructs[n],r=t.attempt(o,l,u);return l;function l(d){return c(d)?r(d):u(d)}function u(d){if(d===null){t.consume(d);return}return t.enter("data"),t.consume(d),f}function f(d){return c(d)?(t.exit("data"),r(d)):(t.consume(d),f)}function c(d){if(d===null)return!0;const p=o[d];let h=-1;if(p)for(;++h<p.length;){const m=p[h];if(!m.previous||m.previous.call(i,i.previous))return!0}return!1}}}function js(n){return e;function e(t,i){let o=-1,r;for(;++o<=t.length;)r===void 0?t[o]&&t[o][1].type==="data"&&(r=o,o++):(!t[o]||t[o][1].type!=="data")&&(o!==r+2&&(t[r][1].end=t[o-1][1].end,t.splice(r+2,o-r-2),o=r+2),r=void 0);return n?n(t,i):t}}function wy(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const i=n[t-1][1],o=e.sliceStream(i);let r=o.length,l=-1,u=0,f;for(;r--;){const c=o[r];if(typeof c=="string"){for(l=c.length;c.charCodeAt(l-1)===32;)u++,l--;if(l)break;l=-1}else if(c===-2)f=!0,u++;else if(c!==-1){r++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(u=0),u){const c={type:t===n.length||f||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:r?l:i.start._bufferIndex+l,_index:i.start._index+r,line:i.end.line,column:i.end.column-u,offset:i.end.offset-u},end:{...i.end}};i.end={...c.start},i.start.offset===i.end.offset?Object.assign(i,c):(n.splice(t,0,["enter",c,e],["exit",c,e]),t+=2)}t++}return n}const xy={42:re,43:re,45:re,48:re,49:re,50:re,51:re,52:re,53:re,54:re,55:re,56:re,57:re,62:Os},Ry={91:Ng},Py={[-2]:it,[-1]:it,32:it},ky={35:Vg,42:kn,45:[pr,kn],60:qg,61:pr,95:kn,96:fr,126:fr},My={38:Ws,92:$s},Ny={[-5]:ot,[-4]:ot,[-3]:ot,33:sy,38:Ws,42:Dt,60:[ag,Kg],91:ay,92:[Ug,$s],93:ti,95:Dt,96:Cg},Dy={null:[Dt,_y]},Ly={null:[42,95]},by={null:[]},Uy=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Ly,contentInitial:Ry,disable:by,document:xy,flow:ky,flowInitial:Py,insideSpan:Dy,string:My,text:Ny},Symbol.toStringTag,{value:"Module"}));function Fy(n,e,t){let i={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const o={},r=[];let l=[],u=[];const f={attempt:M(D),check:M(S),consume:A,enter:_,exit:R,interrupt:M(S,{interrupt:!0})},c={code:null,containerState:{},defineSkip:T,events:[],now:g,parser:n,previous:null,sliceSerialize:h,sliceStream:m,write:p};let d=e.tokenize.call(c,f);return e.resolveAll&&r.push(e),c;function p(N){return l=fe(l,N),E(),l[l.length-1]!==null?[]:(H(e,0),c.events=ni(r,c.events,c),c.events)}function h(N,L){return Gy(m(N),L)}function m(N){return Vy(l,N)}function g(){const{_bufferIndex:N,_index:L,line:U,column:O,offset:q}=i;return{_bufferIndex:N,_index:L,line:U,column:O,offset:q}}function T(N){o[N.line]=N.column,b()}function E(){let N;for(;i._index<l.length;){const L=l[i._index];if(typeof L=="string")for(N=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===N&&i._bufferIndex<L.length;)C(L.charCodeAt(i._bufferIndex));else C(L)}}function C(N){d=d(N)}function A(N){F(N)?(i.line++,i.column=1,i.offset+=N===-3?2:1,b()):N!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===l[i._index].length&&(i._bufferIndex=-1,i._index++)),c.previous=N}function _(N,L){const U=L||{};return U.type=N,U.start=g(),c.events.push(["enter",U,c]),u.push(U),U}function R(N){const L=u.pop();return L.end=g(),c.events.push(["exit",L,c]),L}function D(N,L){H(N,L.from)}function S(N,L){L.restore()}function M(N,L){return U;function U(O,q,Y){let Q,he,Ie,y;return Array.isArray(O)?Ae(O):"tokenize"in O?Ae([O]):me(O);function me(ee){return rn;function rn(Me){const qe=Me!==null&&ee[Me],Je=Me!==null&&ee.null,Tn=[...Array.isArray(qe)?qe:qe?[qe]:[],...Array.isArray(Je)?Je:Je?[Je]:[]];return Ae(Tn)(Me)}}function Ae(ee){return Q=ee,he=0,ee.length===0?Y:v(ee[he])}function v(ee){return rn;function rn(Me){return y=P(),Ie=ee,ee.partial||(c.currentConstruct=ee),ee.name&&c.parser.constructs.disable.null.includes(ee.name)?Ue():ee.tokenize.call(L?Object.assign(Object.create(c),L):c,f,ge,Ue)(Me)}}function ge(ee){return N(Ie,y),q}function Ue(ee){return y.restore(),++he<Q.length?v(Q[he]):Y}}}function H(N,L){N.resolveAll&&!r.includes(N)&&r.push(N),N.resolve&&_e(c.events,L,c.events.length-L,N.resolve(c.events.slice(L),c)),N.resolveTo&&(c.events=N.resolveTo(c.events,c))}function P(){const N=g(),L=c.previous,U=c.currentConstruct,O=c.events.length,q=Array.from(u);return{from:O,restore:Y};function Y(){i=N,c.previous=L,c.currentConstruct=U,c.events.length=O,u=q,b()}}function b(){i.line in o&&i.column<2&&(i.column=o[i.line],i.offset+=o[i.line]-1)}}function Vy(n,e){const t=e.start._index,i=e.start._bufferIndex,o=e.end._index,r=e.end._bufferIndex;let l;if(t===o)l=[n[t].slice(i,r)];else{if(l=n.slice(t,o),i>-1){const u=l[0];typeof u=="string"?l[0]=u.slice(i):l.shift()}r>0&&l.push(n[o].slice(0,r))}return l}function Gy(n,e){let t=-1;const i=[];let o;for(;++t<n.length;){const r=n[t];let l;if(typeof r=="string")l=r;else switch(r){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=e?" ":"	";break}case-1:{if(!e&&o)continue;l=" ";break}default:l=String.fromCharCode(r)}o=r===-2,i.push(l)}return i.join("")}function Hy(n){const i={constructs:Wm([Uy,...(n||{}).extensions||[]]),content:o(ng),defined:[],document:o(ig),flow:o(Cy),lazy:{},string:o(Iy),text:o(Ay)};return i;function o(r){return l;function l(u){return Fy(i,r,u)}}}function By(n){for(;!Ys(n););return n}const hr=/[\0\t\n\r]/g;function qy(){let n=1,e="",t=!0,i;return o;function o(r,l,u){const f=[];let c,d,p,h,m;for(r=e+(typeof r=="string"?r.toString():new TextDecoder(l||void 0).decode(r)),p=0,e="",t&&(r.charCodeAt(0)===65279&&p++,t=void 0);p<r.length;){if(hr.lastIndex=p,c=hr.exec(r),h=c&&c.index!==void 0?c.index:r.length,m=r.charCodeAt(h),!c){e=r.slice(p);break}if(m===10&&p===h&&i)f.push(-3),i=void 0;else switch(i&&(f.push(-5),i=void 0),p<h&&(f.push(r.slice(p,h)),n+=h-p),m){case 0:{f.push(65533),n++;break}case 9:{for(d=Math.ceil(n/4)*4,f.push(-2);n++<d;)f.push(-1);break}case 10:{f.push(-4),n=1;break}default:i=!0,n=1}p=h+1}return u&&(i&&f.push(-5),e&&f.push(e),f.push(null)),f}}const Jy=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function zy(n){return n.replace(Jy,Oy)}function Oy(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const o=t.charCodeAt(1),r=o===120||o===88;return zs(t.slice(r?2:1),r?16:10)}return ei(t)||n}const el={}.hasOwnProperty;function $y(n,e,t){return typeof e!="string"&&(t=e,e=void 0),Wy(t)(By(Hy(t).document().write(qy()(n,e,!0))))}function Wy(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:r(fi),autolinkProtocol:P,autolinkEmail:P,atxHeading:r(ai),blockQuote:r(Je),characterEscape:P,characterReference:P,codeFenced:r(Tn),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:r(Tn,l),codeText:r(dl,l),codeTextData:P,data:P,codeFlowValue:P,definition:r(pl),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:r(hl),hardBreakEscape:r(ui),hardBreakTrailing:r(ui),htmlFlow:r(ci,l),htmlFlowData:P,htmlText:r(ci,l),htmlTextData:P,image:r(ml),label:l,link:r(fi),listItem:r(gl),listItemValue:h,listOrdered:r(di,p),listUnordered:r(di),paragraph:r(yl),reference:v,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:r(ai),strong:r(vl),thematicBreak:r(El)},exit:{atxHeading:f(),atxHeadingSequence:D,autolink:f(),autolinkEmail:qe,autolinkProtocol:Me,blockQuote:f(),characterEscapeValue:b,characterReferenceMarkerHexadecimal:Ue,characterReferenceMarkerNumeric:Ue,characterReferenceValue:ee,characterReference:rn,codeFenced:f(E),codeFencedFence:T,codeFencedFenceInfo:m,codeFencedFenceMeta:g,codeFlowValue:b,codeIndented:f(C),codeText:f(q),codeTextData:b,data:b,definition:f(),definitionDestinationString:R,definitionLabelString:A,definitionTitleString:_,emphasis:f(),hardBreakEscape:f(L),hardBreakTrailing:f(L),htmlFlow:f(U),htmlFlowData:b,htmlText:f(O),htmlTextData:b,image:f(Q),label:Ie,labelText:he,lineEnding:N,link:f(Y),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:ge,resourceDestinationString:y,resourceTitleString:me,resource:Ae,setextHeading:f(H),setextHeadingLineSequence:M,setextHeadingText:S,strong:f(),thematicBreak:f()}};nl(e,(n||{}).mdastExtensions||[]);const t={};return i;function i(I){let x={type:"root",children:[]};const G={stack:[x],tokenStack:[],config:e,enter:u,exit:c,buffer:l,resume:d,data:t},J=[];let W=-1;for(;++W<I.length;)if(I[W][1].type==="listOrdered"||I[W][1].type==="listUnordered")if(I[W][0]==="enter")J.push(W);else{const ye=J.pop();W=o(I,ye,W)}for(W=-1;++W<I.length;){const ye=e[I[W][0]];el.call(ye,I[W][1].type)&&ye[I[W][1].type].call(Object.assign({sliceSerialize:I[W][2].sliceSerialize},G),I[W][1])}if(G.tokenStack.length>0){const ye=G.tokenStack[G.tokenStack.length-1];(ye[1]||mr).call(G,void 0,ye[0])}for(x.position={start:Ne(I.length>0?I[0][1].start:{line:1,column:1,offset:0}),end:Ne(I.length>0?I[I.length-2][1].end:{line:1,column:1,offset:0})},W=-1;++W<e.transforms.length;)x=e.transforms[W](x)||x;return x}function o(I,x,G){let J=x-1,W=-1,ye=!1,Fe,we,sn,ln;for(;++J<=G;){const ae=I[J];switch(ae[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ae[0]==="enter"?W++:W--,ln=void 0;break}case"lineEndingBlank":{ae[0]==="enter"&&(Fe&&!ln&&!W&&!sn&&(sn=J),ln=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ln=void 0}if(!W&&ae[0]==="enter"&&ae[1].type==="listItemPrefix"||W===-1&&ae[0]==="exit"&&(ae[1].type==="listUnordered"||ae[1].type==="listOrdered")){if(Fe){let ze=J;for(we=void 0;ze--;){const xe=I[ze];if(xe[1].type==="lineEnding"||xe[1].type==="lineEndingBlank"){if(xe[0]==="exit")continue;we&&(I[we][1].type="lineEndingBlank",ye=!0),xe[1].type="lineEnding",we=ze}else if(!(xe[1].type==="linePrefix"||xe[1].type==="blockQuotePrefix"||xe[1].type==="blockQuotePrefixWhitespace"||xe[1].type==="blockQuoteMarker"||xe[1].type==="listItemIndent"))break}sn&&(!we||sn<we)&&(Fe._spread=!0),Fe.end=Object.assign({},we?I[we][1].start:ae[1].end),I.splice(we||J,0,["exit",Fe,ae[2]]),J++,G++}if(ae[1].type==="listItemPrefix"){const ze={type:"listItem",_spread:!1,start:Object.assign({},ae[1].start),end:void 0};Fe=ze,I.splice(J,0,["enter",ze,ae[2]]),J++,G++,sn=void 0,ln=!0}}}return I[x][1]._spread=ye,G}function r(I,x){return G;function G(J){u.call(this,I(J),J),x&&x.call(this,J)}}function l(){this.stack.push({type:"fragment",children:[]})}function u(I,x,G){this.stack[this.stack.length-1].children.push(I),this.stack.push(I),this.tokenStack.push([x,G||void 0]),I.position={start:Ne(x.start),end:void 0}}function f(I){return x;function x(G){I&&I.call(this,G),c.call(this,G)}}function c(I,x){const G=this.stack.pop(),J=this.tokenStack.pop();if(J)J[0].type!==I.type&&(x?x.call(this,I,J[0]):(J[1]||mr).call(this,I,J[0]));else throw new Error("Cannot close `"+I.type+"` ("+pn({start:I.start,end:I.end})+"): its not open");G.position.end=Ne(I.end)}function d(){return Om(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function h(I){if(this.data.expectingFirstListItemValue){const x=this.stack[this.stack.length-2];x.start=Number.parseInt(this.sliceSerialize(I),10),this.data.expectingFirstListItemValue=void 0}}function m(){const I=this.resume(),x=this.stack[this.stack.length-1];x.lang=I}function g(){const I=this.resume(),x=this.stack[this.stack.length-1];x.meta=I}function T(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function E(){const I=this.resume(),x=this.stack[this.stack.length-1];x.value=I.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function C(){const I=this.resume(),x=this.stack[this.stack.length-1];x.value=I.replace(/(\r?\n|\r)$/g,"")}function A(I){const x=this.resume(),G=this.stack[this.stack.length-1];G.label=x,G.identifier=Ze(this.sliceSerialize(I)).toLowerCase()}function _(){const I=this.resume(),x=this.stack[this.stack.length-1];x.title=I}function R(){const I=this.resume(),x=this.stack[this.stack.length-1];x.url=I}function D(I){const x=this.stack[this.stack.length-1];if(!x.depth){const G=this.sliceSerialize(I).length;x.depth=G}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function M(I){const x=this.stack[this.stack.length-1];x.depth=this.sliceSerialize(I).codePointAt(0)===61?1:2}function H(){this.data.setextHeadingSlurpLineEnding=void 0}function P(I){const G=this.stack[this.stack.length-1].children;let J=G[G.length-1];(!J||J.type!=="text")&&(J=Tl(),J.position={start:Ne(I.start),end:void 0},G.push(J)),this.stack.push(J)}function b(I){const x=this.stack.pop();x.value+=this.sliceSerialize(I),x.position.end=Ne(I.end)}function N(I){const x=this.stack[this.stack.length-1];if(this.data.atHardBreak){const G=x.children[x.children.length-1];G.position.end=Ne(I.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(x.type)&&(P.call(this,I),b.call(this,I))}function L(){this.data.atHardBreak=!0}function U(){const I=this.resume(),x=this.stack[this.stack.length-1];x.value=I}function O(){const I=this.resume(),x=this.stack[this.stack.length-1];x.value=I}function q(){const I=this.resume(),x=this.stack[this.stack.length-1];x.value=I}function Y(){const I=this.stack[this.stack.length-1];if(this.data.inReference){const x=this.data.referenceType||"shortcut";I.type+="Reference",I.referenceType=x,delete I.url,delete I.title}else delete I.identifier,delete I.label;this.data.referenceType=void 0}function Q(){const I=this.stack[this.stack.length-1];if(this.data.inReference){const x=this.data.referenceType||"shortcut";I.type+="Reference",I.referenceType=x,delete I.url,delete I.title}else delete I.identifier,delete I.label;this.data.referenceType=void 0}function he(I){const x=this.sliceSerialize(I),G=this.stack[this.stack.length-2];G.label=zy(x),G.identifier=Ze(x).toLowerCase()}function Ie(){const I=this.stack[this.stack.length-1],x=this.resume(),G=this.stack[this.stack.length-1];if(this.data.inReference=!0,G.type==="link"){const J=I.children;G.children=J}else G.alt=x}function y(){const I=this.resume(),x=this.stack[this.stack.length-1];x.url=I}function me(){const I=this.resume(),x=this.stack[this.stack.length-1];x.title=I}function Ae(){this.data.inReference=void 0}function v(){this.data.referenceType="collapsed"}function ge(I){const x=this.resume(),G=this.stack[this.stack.length-1];G.label=x,G.identifier=Ze(this.sliceSerialize(I)).toLowerCase(),this.data.referenceType="full"}function Ue(I){this.data.characterReferenceType=I.type}function ee(I){const x=this.sliceSerialize(I),G=this.data.characterReferenceType;let J;G?(J=zs(x,G==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):J=ei(x);const W=this.stack[this.stack.length-1];W.value+=J}function rn(I){const x=this.stack.pop();x.position.end=Ne(I.end)}function Me(I){b.call(this,I);const x=this.stack[this.stack.length-1];x.url=this.sliceSerialize(I)}function qe(I){b.call(this,I);const x=this.stack[this.stack.length-1];x.url="mailto:"+this.sliceSerialize(I)}function Je(){return{type:"blockquote",children:[]}}function Tn(){return{type:"code",lang:null,meta:null,value:""}}function dl(){return{type:"inlineCode",value:""}}function pl(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function hl(){return{type:"emphasis",children:[]}}function ai(){return{type:"heading",depth:0,children:[]}}function ui(){return{type:"break"}}function ci(){return{type:"html",value:""}}function ml(){return{type:"image",title:null,url:"",alt:null}}function fi(){return{type:"link",title:null,url:"",children:[]}}function di(I){return{type:"list",ordered:I.type==="listOrdered",start:null,spread:I._spread,children:[]}}function gl(I){return{type:"listItem",spread:I._spread,checked:null,children:[]}}function yl(){return{type:"paragraph",children:[]}}function vl(){return{type:"strong",children:[]}}function Tl(){return{type:"text",value:""}}function El(){return{type:"thematicBreak"}}}function Ne(n){return{line:n.line,column:n.column,offset:n.offset}}function nl(n,e){let t=-1;for(;++t<e.length;){const i=e[t];Array.isArray(i)?nl(n,i):Yy(n,i)}}function Yy(n,e){let t;for(t in e)if(el.call(e,t))switch(t){case"canContainEols":{const i=e[t];i&&n[t].push(...i);break}case"transforms":{const i=e[t];i&&n[t].push(...i);break}case"enter":case"exit":{const i=e[t];i&&Object.assign(n[t],i);break}}}function mr(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+pn({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+pn({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+pn({start:e.start,end:e.end})+") is still open")}function Ky(n){const e=this;e.parser=t;function t(i){return $y(i,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function Xy(n,e){const t={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(e),!0)};return n.patch(e,t),n.applyData(e,t)}function Qy(n,e){const t={type:"element",tagName:"br",properties:{},children:[]};return n.patch(e,t),[n.applyData(e,t),{type:"text",value:`
`}]}function Zy(n,e){const t=e.value?e.value+`
`:"",i={},o=e.lang?e.lang.split(/\s+/):[];o.length>0&&(i.className=["language-"+o[0]]);let r={type:"element",tagName:"code",properties:i,children:[{type:"text",value:t}]};return e.meta&&(r.data={meta:e.meta}),n.patch(e,r),r=n.applyData(e,r),r={type:"element",tagName:"pre",properties:{},children:[r]},n.patch(e,r),r}function jy(n,e){const t={type:"element",tagName:"del",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function ev(n,e){const t={type:"element",tagName:"em",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function nv(n,e){const t=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),o=on(i.toLowerCase()),r=n.footnoteOrder.indexOf(i);let l,u=n.footnoteCounts.get(i);u===void 0?(u=0,n.footnoteOrder.push(i),l=n.footnoteOrder.length):l=r+1,u+=1,n.footnoteCounts.set(i,u);const f={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+o,id:t+"fnref-"+o+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};n.patch(e,f);const c={type:"element",tagName:"sup",properties:{},children:[f]};return n.patch(e,c),n.applyData(e,c)}function tv(n,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function iv(n,e){if(n.options.allowDangerousHtml){const t={type:"raw",value:e.value};return n.patch(e,t),n.applyData(e,t)}}function tl(n,e){const t=e.referenceType;let i="]";if(t==="collapsed"?i+="[]":t==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const o=n.all(e),r=o[0];r&&r.type==="text"?r.value="["+r.value:o.unshift({type:"text",value:"["});const l=o[o.length-1];return l&&l.type==="text"?l.value+=i:o.push({type:"text",value:i}),o}function ov(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return tl(n,e);const o={src:on(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(o.title=i.title);const r={type:"element",tagName:"img",properties:o,children:[]};return n.patch(e,r),n.applyData(e,r)}function rv(n,e){const t={src:on(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"img",properties:t,children:[]};return n.patch(e,i),n.applyData(e,i)}function sv(n,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};n.patch(e,t);const i={type:"element",tagName:"code",properties:{},children:[t]};return n.patch(e,i),n.applyData(e,i)}function lv(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return tl(n,e);const o={href:on(i.url||"")};i.title!==null&&i.title!==void 0&&(o.title=i.title);const r={type:"element",tagName:"a",properties:o,children:n.all(e)};return n.patch(e,r),n.applyData(e,r)}function av(n,e){const t={href:on(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"a",properties:t,children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function uv(n,e,t){const i=n.all(e),o=t?cv(t):il(e),r={},l=[];if(typeof e.checked=="boolean"){const d=i[0];let p;d&&d.type==="element"&&d.tagName==="p"?p=d:(p={type:"element",tagName:"p",properties:{},children:[]},i.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),r.className=["task-list-item"]}let u=-1;for(;++u<i.length;){const d=i[u];(o||u!==0||d.type!=="element"||d.tagName!=="p")&&l.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!o?l.push(...d.children):l.push(d)}const f=i[i.length-1];f&&(o||f.type!=="element"||f.tagName!=="p")&&l.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:r,children:l};return n.patch(e,c),n.applyData(e,c)}function cv(n){let e=!1;if(n.type==="list"){e=n.spread||!1;const t=n.children;let i=-1;for(;!e&&++i<t.length;)e=il(t[i])}return e}function il(n){const e=n.spread;return e??n.children.length>1}function fv(n,e){const t={},i=n.all(e);let o=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++o<i.length;){const l=i[o];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const r={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:n.wrap(i,!0)};return n.patch(e,r),n.applyData(e,r)}function dv(n,e){const t={type:"element",tagName:"p",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function pv(n,e){const t={type:"root",children:n.wrap(n.all(e))};return n.patch(e,t),n.applyData(e,t)}function hv(n,e){const t={type:"element",tagName:"strong",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function mv(n,e){const t=n.all(e),i=t.shift(),o=[];if(i){const l={type:"element",tagName:"thead",properties:{},children:n.wrap([i],!0)};n.patch(e.children[0],l),o.push(l)}if(t.length>0){const l={type:"element",tagName:"tbody",properties:{},children:n.wrap(t,!0)},u=Xt(e.children[1]),f=Fs(e.children[e.children.length-1]);u&&f&&(l.position={start:u,end:f}),o.push(l)}const r={type:"element",tagName:"table",properties:{},children:n.wrap(o,!0)};return n.patch(e,r),n.applyData(e,r)}function gv(n,e,t){const i=t?t.children:void 0,r=(i?i.indexOf(e):1)===0?"th":"td",l=t&&t.type==="table"?t.align:void 0,u=l?l.length:e.children.length;let f=-1;const c=[];for(;++f<u;){const p=e.children[f],h={},m=l?l[f]:void 0;m&&(h.align=m);let g={type:"element",tagName:r,properties:h,children:[]};p&&(g.children=n.all(p),n.patch(p,g),g=n.applyData(p,g)),c.push(g)}const d={type:"element",tagName:"tr",properties:{},children:n.wrap(c,!0)};return n.patch(e,d),n.applyData(e,d)}function yv(n,e){const t={type:"element",tagName:"td",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const gr=9,yr=32;function vv(n){const e=String(n),t=/\r?\n|\r/g;let i=t.exec(e),o=0;const r=[];for(;i;)r.push(vr(e.slice(o,i.index),o>0,!0),i[0]),o=i.index+i[0].length,i=t.exec(e);return r.push(vr(e.slice(o),o>0,!1)),r.join("")}function vr(n,e,t){let i=0,o=n.length;if(e){let r=n.codePointAt(i);for(;r===gr||r===yr;)i++,r=n.codePointAt(i)}if(t){let r=n.codePointAt(o-1);for(;r===gr||r===yr;)o--,r=n.codePointAt(o-1)}return o>i?n.slice(i,o):""}function Tv(n,e){const t={type:"text",value:vv(String(e.value))};return n.patch(e,t),n.applyData(e,t)}function Ev(n,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(e,t),n.applyData(e,t)}const Cv={blockquote:Xy,break:Qy,code:Zy,delete:jy,emphasis:ev,footnoteReference:nv,heading:tv,html:iv,imageReference:ov,image:rv,inlineCode:sv,linkReference:lv,link:av,listItem:uv,list:fv,paragraph:dv,root:pv,strong:hv,table:mv,tableCell:yv,tableRow:gv,text:Tv,thematicBreak:Ev,toml:An,yaml:An,definition:An,footnoteDefinition:An};function An(){}const ol=-1,Xn=0,mn=1,Gn=2,ii=3,oi=4,ri=5,si=6,rl=7,sl=8,Tr=typeof self=="object"?self:globalThis,Sv=(n,e)=>{const t=(o,r)=>(n.set(r,o),o),i=o=>{if(n.has(o))return n.get(o);const[r,l]=e[o];switch(r){case Xn:case ol:return t(l,o);case mn:{const u=t([],o);for(const f of l)u.push(i(f));return u}case Gn:{const u=t({},o);for(const[f,c]of l)u[i(f)]=i(c);return u}case ii:return t(new Date(l),o);case oi:{const{source:u,flags:f}=l;return t(new RegExp(u,f),o)}case ri:{const u=t(new Map,o);for(const[f,c]of l)u.set(i(f),i(c));return u}case si:{const u=t(new Set,o);for(const f of l)u.add(i(f));return u}case rl:{const{name:u,message:f}=l;return t(new Tr[u](f),o)}case sl:return t(BigInt(l),o);case"BigInt":return t(Object(BigInt(l)),o);case"ArrayBuffer":return t(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:u}=new Uint8Array(l);return t(new DataView(u),l)}}return t(new Tr[r](l),o)};return i},Er=n=>Sv(new Map,n)(0),Oe="",{toString:_v}={},{keys:Iv}=Object,fn=n=>{const e=typeof n;if(e!=="object"||!n)return[Xn,e];const t=_v.call(n).slice(8,-1);switch(t){case"Array":return[mn,Oe];case"Object":return[Gn,Oe];case"Date":return[ii,Oe];case"RegExp":return[oi,Oe];case"Map":return[ri,Oe];case"Set":return[si,Oe];case"DataView":return[mn,t]}return t.includes("Array")?[mn,t]:t.includes("Error")?[rl,t]:[Gn,t]},wn=([n,e])=>n===Xn&&(e==="function"||e==="symbol"),Av=(n,e,t,i)=>{const o=(l,u)=>{const f=i.push(l)-1;return t.set(u,f),f},r=l=>{if(t.has(l))return t.get(l);let[u,f]=fn(l);switch(u){case Xn:{let d=l;switch(f){case"bigint":u=sl,d=l.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+f);d=null;break;case"undefined":return o([ol],l)}return o([u,d],l)}case mn:{if(f){let h=l;return f==="DataView"?h=new Uint8Array(l.buffer):f==="ArrayBuffer"&&(h=new Uint8Array(l)),o([f,[...h]],l)}const d=[],p=o([u,d],l);for(const h of l)d.push(r(h));return p}case Gn:{if(f)switch(f){case"BigInt":return o([f,l.toString()],l);case"Boolean":case"Number":case"String":return o([f,l.valueOf()],l)}if(e&&"toJSON"in l)return r(l.toJSON());const d=[],p=o([u,d],l);for(const h of Iv(l))(n||!wn(fn(l[h])))&&d.push([r(h),r(l[h])]);return p}case ii:return o([u,l.toISOString()],l);case oi:{const{source:d,flags:p}=l;return o([u,{source:d,flags:p}],l)}case ri:{const d=[],p=o([u,d],l);for(const[h,m]of l)(n||!(wn(fn(h))||wn(fn(m))))&&d.push([r(h),r(m)]);return p}case si:{const d=[],p=o([u,d],l);for(const h of l)(n||!wn(fn(h)))&&d.push(r(h));return p}}const{message:c}=l;return o([u,{name:f,message:c}],l)};return r},Cr=(n,{json:e,lossy:t}={})=>{const i=[];return Av(!(e||t),!!e,new Map,i)(n),i},Hn=typeof structuredClone=="function"?(n,e)=>e&&("json"in e||"lossy"in e)?Er(Cr(n,e)):structuredClone(n):(n,e)=>Er(Cr(n,e));function wv(n,e){const t=[{type:"text",value:""}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function xv(n,e){return"Back to reference "+(n+1)+(e>1?"-"+e:"")}function Rv(n){const e=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",t=n.options.footnoteBackContent||wv,i=n.options.footnoteBackLabel||xv,o=n.options.footnoteLabel||"Footnotes",r=n.options.footnoteLabelTagName||"h2",l=n.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let f=-1;for(;++f<n.footnoteOrder.length;){const c=n.footnoteById.get(n.footnoteOrder[f]);if(!c)continue;const d=n.all(c),p=String(c.identifier).toUpperCase(),h=on(p.toLowerCase());let m=0;const g=[],T=n.footnoteCounts.get(p);for(;T!==void 0&&++m<=T;){g.length>0&&g.push({type:"text",value:" "});let A=typeof t=="string"?t:t(f,m);typeof A=="string"&&(A={type:"text",value:A}),g.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+h+(m>1?"-"+m:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(f,m),className:["data-footnote-backref"]},children:Array.isArray(A)?A:[A]})}const E=d[d.length-1];if(E&&E.type==="element"&&E.tagName==="p"){const A=E.children[E.children.length-1];A&&A.type==="text"?A.value+=" ":E.children.push({type:"text",value:" "}),E.children.push(...g)}else d.push(...g);const C={type:"element",tagName:"li",properties:{id:e+"fn-"+h},children:n.wrap(d,!0)};n.patch(c,C),u.push(C)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:r,properties:{...Hn(l),id:"footnote-label"},children:[{type:"text",value:o}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(u,!0)},{type:"text",value:`
`}]}}const ll=function(n){if(n==null)return Nv;if(typeof n=="function")return Qn(n);if(typeof n=="object")return Array.isArray(n)?Pv(n):kv(n);if(typeof n=="string")return Mv(n);throw new Error("Expected function, string, or object as test")};function Pv(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=ll(n[t]);return Qn(i);function i(...o){let r=-1;for(;++r<e.length;)if(e[r].apply(this,o))return!0;return!1}}function kv(n){const e=n;return Qn(t);function t(i){const o=i;let r;for(r in n)if(o[r]!==e[r])return!1;return!0}}function Mv(n){return Qn(e);function e(t){return t&&t.type===n}}function Qn(n){return e;function e(t,i,o){return!!(Dv(t)&&n.call(this,t,typeof i=="number"?i:void 0,o||void 0))}}function Nv(){return!0}function Dv(n){return n!==null&&typeof n=="object"&&"type"in n}const al=[],Lv=!0,Sr=!1,bv="skip";function Uv(n,e,t,i){let o;typeof e=="function"&&typeof t!="function"?(i=t,t=e):o=e;const r=ll(o),l=i?-1:1;u(n,void 0,[])();function u(f,c,d){const p=f&&typeof f=="object"?f:{};if(typeof p.type=="string"){const m=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(f.type+(m?"<"+m+">":""))+")"})}return h;function h(){let m=al,g,T,E;if((!e||r(f,c,d[d.length-1]||void 0))&&(m=Fv(t(f,d)),m[0]===Sr))return m;if("children"in f&&f.children){const C=f;if(C.children&&m[0]!==bv)for(T=(i?C.children.length:-1)+l,E=d.concat(C);T>-1&&T<C.children.length;){const A=C.children[T];if(g=u(A,T,E)(),g[0]===Sr)return g;T=typeof g[1]=="number"?g[1]:T+l}}return m}}}function Fv(n){return Array.isArray(n)?n:typeof n=="number"?[Lv,n]:n==null?al:[n]}function ul(n,e,t,i){let o,r,l;typeof e=="function"&&typeof t!="function"?(r=void 0,l=e,o=t):(r=e,l=t,o=i),Uv(n,r,u,o);function u(f,c){const d=c[c.length-1],p=d?d.children.indexOf(f):void 0;return l(f,p,d)}}const Lt={}.hasOwnProperty,Vv={};function Gv(n,e){const t=e||Vv,i=new Map,o=new Map,r=new Map,l={...Cv,...t.handlers},u={all:c,applyData:Bv,definitionById:i,footnoteById:o,footnoteCounts:r,footnoteOrder:[],handlers:l,one:f,options:t,patch:Hv,wrap:Jv};return ul(n,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const p=d.type==="definition"?i:o,h=String(d.identifier).toUpperCase();p.has(h)||p.set(h,d)}}),u;function f(d,p){const h=d.type,m=u.handlers[h];if(Lt.call(u.handlers,h)&&m)return m(u,d,p);if(u.options.passThrough&&u.options.passThrough.includes(h)){if("children"in d){const{children:T,...E}=d,C=Hn(E);return C.children=u.all(d),C}return Hn(d)}return(u.options.unknownHandler||qv)(u,d,p)}function c(d){const p=[];if("children"in d){const h=d.children;let m=-1;for(;++m<h.length;){const g=u.one(h[m],d);if(g){if(m&&h[m-1].type==="break"&&(!Array.isArray(g)&&g.type==="text"&&(g.value=_r(g.value)),!Array.isArray(g)&&g.type==="element")){const T=g.children[0];T&&T.type==="text"&&(T.value=_r(T.value))}Array.isArray(g)?p.push(...g):p.push(g)}}}return p}}function Hv(n,e){n.position&&(e.position=_m(n))}function Bv(n,e){let t=e;if(n&&n.data){const i=n.data.hName,o=n.data.hChildren,r=n.data.hProperties;if(typeof i=="string")if(t.type==="element")t.tagName=i;else{const l="children"in t?t.children:[t];t={type:"element",tagName:i,properties:{},children:l}}t.type==="element"&&r&&Object.assign(t.properties,Hn(r)),"children"in t&&t.children&&o!==null&&o!==void 0&&(t.children=o)}return t}function qv(n,e){const t=e.data||{},i="value"in e&&!(Lt.call(t,"hProperties")||Lt.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function Jv(n,e){const t=[];let i=-1;for(e&&t.push({type:"text",value:`
`});++i<n.length;)i&&t.push({type:"text",value:`
`}),t.push(n[i]);return e&&n.length>0&&t.push({type:"text",value:`
`}),t}function _r(n){let e=0,t=n.charCodeAt(e);for(;t===9||t===32;)e++,t=n.charCodeAt(e);return n.slice(e)}function Ir(n,e){const t=Gv(n,e),i=t.one(n,void 0),o=Rv(t),r=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return o&&r.children.push({type:"text",value:`
`},o),r}function zv(n,e){return n&&"run"in n?async function(t,i){const o=Ir(t,{file:i,...e});await n.run(o,i)}:function(t,i){return Ir(t,{file:i,...n||e})}}function Ar(n){if(n)throw n}var Mn=Object.prototype.hasOwnProperty,cl=Object.prototype.toString,wr=Object.defineProperty,xr=Object.getOwnPropertyDescriptor,Rr=function(e){return typeof Array.isArray=="function"?Array.isArray(e):cl.call(e)==="[object Array]"},Pr=function(e){if(!e||cl.call(e)!=="[object Object]")return!1;var t=Mn.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&Mn.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!i)return!1;var o;for(o in e);return typeof o>"u"||Mn.call(e,o)},kr=function(e,t){wr&&t.name==="__proto__"?wr(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},Mr=function(e,t){if(t==="__proto__")if(Mn.call(e,t)){if(xr)return xr(e,t).value}else return;return e[t]},Ov=function n(){var e,t,i,o,r,l,u=arguments[0],f=1,c=arguments.length,d=!1;for(typeof u=="boolean"&&(d=u,u=arguments[1]||{},f=2),(u==null||typeof u!="object"&&typeof u!="function")&&(u={});f<c;++f)if(e=arguments[f],e!=null)for(t in e)i=Mr(u,t),o=Mr(e,t),u!==o&&(d&&o&&(Pr(o)||(r=Rr(o)))?(r?(r=!1,l=i&&Rr(i)?i:[]):l=i&&Pr(i)?i:{},kr(u,{name:t,newValue:n(d,l,o)})):typeof o<"u"&&kr(u,{name:t,newValue:o}));return u};const rt=Fr(Ov);function bt(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function $v(){const n=[],e={run:t,use:i};return e;function t(...o){let r=-1;const l=o.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);u(null,...o);function u(f,...c){const d=n[++r];let p=-1;if(f){l(f);return}for(;++p<o.length;)(c[p]===null||c[p]===void 0)&&(c[p]=o[p]);o=c,d?Wv(d,u)(...c):l(null,...c)}}function i(o){if(typeof o!="function")throw new TypeError("Expected `middelware` to be a function, not "+o);return n.push(o),e}}function Wv(n,e){let t;return i;function i(...l){const u=n.length>l.length;let f;u&&l.push(o);try{f=n.apply(this,l)}catch(c){const d=c;if(u&&t)throw d;return o(d)}u||(f&&f.then&&typeof f.then=="function"?f.then(r,o):f instanceof Error?o(f):r(f))}function o(l,...u){t||(t=!0,e(l,...u))}function r(l){o(null,l)}}const Ce={basename:Yv,dirname:Kv,extname:Xv,join:Qv,sep:"/"};function Yv(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');vn(n);let t=0,i=-1,o=n.length,r;if(e===void 0||e.length===0||e.length>n.length){for(;o--;)if(n.codePointAt(o)===47){if(r){t=o+1;break}}else i<0&&(r=!0,i=o+1);return i<0?"":n.slice(t,i)}if(e===n)return"";let l=-1,u=e.length-1;for(;o--;)if(n.codePointAt(o)===47){if(r){t=o+1;break}}else l<0&&(r=!0,l=o+1),u>-1&&(n.codePointAt(o)===e.codePointAt(u--)?u<0&&(i=o):(u=-1,i=l));return t===i?i=l:i<0&&(i=n.length),n.slice(t,i)}function Kv(n){if(vn(n),n.length===0)return".";let e=-1,t=n.length,i;for(;--t;)if(n.codePointAt(t)===47){if(i){e=t;break}}else i||(i=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function Xv(n){vn(n);let e=n.length,t=-1,i=0,o=-1,r=0,l;for(;e--;){const u=n.codePointAt(e);if(u===47){if(l){i=e+1;break}continue}t<0&&(l=!0,t=e+1),u===46?o<0?o=e:r!==1&&(r=1):o>-1&&(r=-1)}return o<0||t<0||r===0||r===1&&o===t-1&&o===i+1?"":n.slice(o,t)}function Qv(...n){let e=-1,t;for(;++e<n.length;)vn(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":Zv(t)}function Zv(n){vn(n);const e=n.codePointAt(0)===47;let t=jv(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function jv(n,e){let t="",i=0,o=-1,r=0,l=-1,u,f;for(;++l<=n.length;){if(l<n.length)u=n.codePointAt(l);else{if(u===47)break;u=47}if(u===47){if(!(o===l-1||r===1))if(o!==l-1&&r===2){if(t.length<2||i!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(f=t.lastIndexOf("/"),f!==t.length-1){f<0?(t="",i=0):(t=t.slice(0,f),i=t.length-1-t.lastIndexOf("/")),o=l,r=0;continue}}else if(t.length>0){t="",i=0,o=l,r=0;continue}}e&&(t=t.length>0?t+"/..":"..",i=2)}else t.length>0?t+="/"+n.slice(o+1,l):t=n.slice(o+1,l),i=l-o-1;o=l,r=0}else u===46&&r>-1?r++:r=-1}return t}function vn(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const eT={cwd:nT};function nT(){return"/"}function Ut(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function tT(n){if(typeof n=="string")n=new URL(n);else if(!Ut(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return iT(n)}function iT(n){if(n.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const i=e.codePointAt(t+2);if(i===70||i===102){const o=new TypeError("File URL path must not include encoded / characters");throw o.code="ERR_INVALID_FILE_URL_PATH",o}}return decodeURIComponent(e)}const st=["history","path","basename","stem","extname","dirname"];class fl{constructor(e){let t;e?Ut(e)?t={path:e}:typeof e=="string"||oT(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":eT.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<st.length;){const r=st[i];r in t&&t[r]!==void 0&&t[r]!==null&&(this[r]=r==="history"?[...t[r]]:t[r])}let o;for(o in t)st.includes(o)||(this[o]=t[o])}get basename(){return typeof this.path=="string"?Ce.basename(this.path):void 0}set basename(e){at(e,"basename"),lt(e,"basename"),this.path=Ce.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Ce.dirname(this.path):void 0}set dirname(e){Nr(this.basename,"dirname"),this.path=Ce.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Ce.extname(this.path):void 0}set extname(e){if(lt(e,"extname"),Nr(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ce.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Ut(e)&&(e=tT(e)),at(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Ce.basename(this.path,this.extname):void 0}set stem(e){at(e,"stem"),lt(e,"stem"),this.path=Ce.join(this.dirname||"",e+(this.extname||""))}fail(e,t,i){const o=this.message(e,t,i);throw o.fatal=!0,o}info(e,t,i){const o=this.message(e,t,i);return o.fatal=void 0,o}message(e,t,i){const o=new te(e,t,i);return this.path&&(o.name=this.path+":"+o.name,o.file=this.path),o.fatal=!1,this.messages.push(o),o}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function lt(n,e){if(n&&n.includes(Ce.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Ce.sep+"`")}function at(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function Nr(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function oT(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const rT=function(n){const i=this.constructor.prototype,o=i[n],r=function(){return o.apply(r,arguments)};return Object.setPrototypeOf(r,i),r},sT={}.hasOwnProperty;class li extends rT{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=$v()}copy(){const e=new li;let t=-1;for(;++t<this.attachers.length;){const i=this.attachers[t];e.use(...i)}return e.data(rt(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(ft("data",this.frozen),this.namespace[e]=t,this):sT.call(this.namespace,e)&&this.namespace[e]||void 0:e?(ft("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const o=t.call(e,...i);typeof o=="function"&&this.transformers.use(o)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=xn(e),i=this.parser||this.Parser;return ut("parse",i),i(String(t),t)}process(e,t){const i=this;return this.freeze(),ut("process",this.parser||this.Parser),ct("process",this.compiler||this.Compiler),t?o(void 0,t):new Promise(o);function o(r,l){const u=xn(e),f=i.parse(u);i.run(f,u,function(d,p,h){if(d||!p||!h)return c(d);const m=p,g=i.stringify(m,h);uT(g)?h.value=g:h.result=g,c(d,h)});function c(d,p){d||!p?l(d):r?r(p):t(void 0,p)}}}processSync(e){let t=!1,i;return this.freeze(),ut("processSync",this.parser||this.Parser),ct("processSync",this.compiler||this.Compiler),this.process(e,o),Lr("processSync","process",t),i;function o(r,l){t=!0,Ar(r),i=l}}run(e,t,i){Dr(e),this.freeze();const o=this.transformers;return!i&&typeof t=="function"&&(i=t,t=void 0),i?r(void 0,i):new Promise(r);function r(l,u){const f=xn(t);o.run(e,f,c);function c(d,p,h){const m=p||e;d?u(d):l?l(m):i(void 0,m,h)}}}runSync(e,t){let i=!1,o;return this.run(e,t,r),Lr("runSync","run",i),o;function r(l,u){Ar(l),o=u,i=!0}}stringify(e,t){this.freeze();const i=xn(t),o=this.compiler||this.Compiler;return ct("stringify",o),Dr(e),o(e,i)}use(e,...t){const i=this.attachers,o=this.namespace;if(ft("use",this.frozen),e!=null)if(typeof e=="function")f(e,t);else if(typeof e=="object")Array.isArray(e)?u(e):l(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function r(c){if(typeof c=="function")f(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[d,...p]=c;f(d,p)}else l(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function l(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(c.plugins),c.settings&&(o.settings=rt(!0,o.settings,c.settings))}function u(c){let d=-1;if(c!=null)if(Array.isArray(c))for(;++d<c.length;){const p=c[d];r(p)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function f(c,d){let p=-1,h=-1;for(;++p<i.length;)if(i[p][0]===c){h=p;break}if(h===-1)i.push([c,...d]);else if(d.length>0){let[m,...g]=d;const T=i[h][1];bt(T)&&bt(m)&&(m=rt(!0,T,m)),i[h]=[c,m,...g]}}}}const lT=new li().freeze();function ut(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function ct(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function ft(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Dr(n){if(!bt(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function Lr(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function xn(n){return aT(n)?n:new fl(n)}function aT(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function uT(n){return typeof n=="string"||cT(n)}function cT(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const fT="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",br=[],Ur={allowDangerousHtml:!0},dT=/^(https?|ircs?|mailto|xmpp)$/i,pT=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function CT(n){const e=hT(n),t=mT(n);return gT(e.runSync(e.parse(t),t),n)}function hT(n){const e=n.rehypePlugins||br,t=n.remarkPlugins||br,i=n.remarkRehypeOptions?{...n.remarkRehypeOptions,...Ur}:Ur;return lT().use(Ky).use(t).use(zv,i).use(e)}function mT(n){const e=n.children||"",t=new fl;return typeof e=="string"&&(t.value=e),t}function gT(n,e){const t=e.allowedElements,i=e.allowElement,o=e.components,r=e.disallowedElements,l=e.skipHtml,u=e.unwrapDisallowed,f=e.urlTransform||yT;for(const d of pT)Object.hasOwn(e,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+fT+d.id,void 0);return ul(n,c),Rm(n,{Fragment:Zn.Fragment,components:o,ignoreInvalidStyle:!0,jsx:Zn.jsx,jsxs:Zn.jsxs,passKeys:!0,passNode:!0});function c(d,p,h){if(d.type==="raw"&&h&&typeof p=="number")return l?h.children.splice(p,1):h.children[p]={type:"text",value:d.value},p;if(d.type==="element"){let m;for(m in tt)if(Object.hasOwn(tt,m)&&Object.hasOwn(d.properties,m)){const g=d.properties[m],T=tt[m];(T===null||T.includes(d.tagName))&&(d.properties[m]=f(String(g||""),m,d))}}if(d.type==="element"){let m=t?!t.includes(d.tagName):r?r.includes(d.tagName):!1;if(!m&&i&&typeof p=="number"&&(m=!i(d,p,h)),m&&h&&typeof p=="number")return u&&d.children?h.children.splice(p,1,...d.children):h.children.splice(p,1),p}}}function yT(n){const e=n.indexOf(":"),t=n.indexOf("?"),i=n.indexOf("#"),o=n.indexOf("/");return e===-1||o!==-1&&e>o||t!==-1&&e>t||i!==-1&&e>i||dT.test(n.slice(0,e))?n:""}export{ET as G,CT as M};
